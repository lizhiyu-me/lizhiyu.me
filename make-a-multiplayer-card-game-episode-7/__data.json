{"type":"data","nodes":[null,{"type":"data","data":[{"post":1},{"title":2,"slug":3,"coverImage":4,"date":5,"excerpt":6,"tags":7,"html":9,"readingTime":10,"relatedPosts":11},"Make a multiplayer card game - Episode 7 | Create 3D graphical interface with Three.js","make-a-multiplayer-card-game-episode-7","/images/posts/blog-posts.jpg","2021-04-02T21:55:15.361Z","Create 3D graphical interface with Three.js",[8],"Tutorial:Make a multiplayer card game","\u003Ch2 id=\"make-a-multiplayer-card-game---episode-7--create-3d-graphical-interface-with-threejs\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-7--create-3d-graphical-interface-with-threejs\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 7 | Create 3D graphical interface with Three.js\u003C/h2>\n\u003Cp>This section mainly introduces the use\nof\u003Ca href=\"https://docs.pmnd.rs/react-three-fiber/getting-started/introduction\" rel=\"nofollow\">react-three-fiber\u003C/a>(referred\nto as R3F bellow) to realize the construction of interactive scenes.\u003C/p>\n\u003Ch3 id=\"why-choose-r3f\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#why-choose-r3f\">\u003Cspan>#\u003C/span>\u003C/a>Why Choose R3F\u003C/h3>\n\u003Cul>\u003Cli>R3F just expresses Three.js in JSX, no extra overhead\u003C/li>\n\u003Cli>Build scenes in a declarative way with react, including but not limited to\ncomponents that can easily react to state, are easy to interact with, and can\nleverage Reactâ€™s ecosystem\u003C/li>\u003C/ul>\n\u003Ch3 id=\"scenario-construction-implementation\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#scenario-construction-implementation\">\u003Cspan>#\u003C/span>\u003C/a>Scenario construction implementation\u003C/h3>\n\u003Cul>\u003Cli>\u003Cstrong>Card\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cp>Note that the texture required for rendering is obtained by passing the image\naddress to \u003Ccode>useTexture\u003C/code>\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token comment\">//Card.tsx\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> useTexture \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"@react-three/drei\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> Mesh \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"three\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">Card\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\n  props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    faceTextureUrl\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    idx\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    beginX\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _selectedOffsetY \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">.2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _beginX \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>beginX\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> _texture \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useTexture\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    map\u003Cspan class=\"token operator\">:\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>faceTextureUrl\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>mesh\n      position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>_beginX \u003Cspan class=\"token operator\">+\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>idx \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">.5\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>idx \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">0.001\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      onClick\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>e\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">any\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        e\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">stopPropagation\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _targetMesh \u003Cspan class=\"token operator\">=\u003C/span> e\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"eventObject\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token keyword\">as\u003C/span> Mesh\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _pos \u003Cspan class=\"token operator\">=\u003C/span> _targetMesh\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _upY\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_pos\u003Cspan class=\"token punctuation\">.\u003C/span>y \u003Cspan class=\"token operator\">==\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> _upY \u003Cspan class=\"token operator\">=\u003C/span> _selectedOffsetY\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">else\u003C/span> _upY \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        _targetMesh\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">set\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_pos\u003Cspan class=\"token punctuation\">.\u003C/span>x\u003Cspan class=\"token punctuation\">,\u003C/span> _upY\u003Cspan class=\"token punctuation\">,\u003C/span> _pos\u003Cspan class=\"token punctuation\">.\u003C/span>z\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      userData\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token string-property property\">\"_d_cardSerial\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>serial \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>boxGeometry args\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">.001\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>meshStandardMaterial \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token operator\">...\u003C/span>_texture\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>mesh\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">export\u003C/span> \u003Cspan class=\"token keyword\">default\u003C/span> Card\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cul>\u003Cli>\u003Cstrong>Game Scene\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cp>First you must declare a Canvas node, because all three.js must be under the\nCanvas node\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token operator\">&lt;\u003C/span>Canvas\n  orthographic\n  camera\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> zoom\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">50\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> position\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">100\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> rotation\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token operator\">&lt;\u003C/span>R3fScene\n    mainHandCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    outCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>outCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    gameModel\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>R3fScene\u003Cspan class=\"token operator\">>\u003C/span>\n\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>Canvas\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>In order to facilitate the use of hooks provided by\u003C/p>\n\u003Ccode>@react-three/fiber\u003C/code> (three.js related hooks can only be used under\nthe Canvas node), the game scene node is proposed separately\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">R3fScene\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n  props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> mainHandCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> gameModel\u003Cspan class=\"token punctuation\">;\u003C/span> outCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    scene\u003Cspan class=\"token punctuation\">,\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token function\">useEffect\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>scene\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getObjectByName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> mainHandCards \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameModel \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>gameModel\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>context \u003Cspan class=\"token operator\">=\u003C/span> scene\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _prefix \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token string\">\"/faces/\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _readableName \u003Cspan class=\"token operator\">=\u003C/span> _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getCardReadableName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"rJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_B.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"bJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_R.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitDic \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"D\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"C\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"H\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"S\"\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitNumber\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> serial \u003Cspan class=\"token operator\">>>\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _suitDic\u003Cspan class=\"token punctuation\">[\u003C/span>_suitNumber\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _readableName \u003Cspan class=\"token operator\">+\u003C/span>\n        \u003Cspan class=\"token string\">\".png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token keyword\">let\u003C/span> _cardCount \u003Cspan class=\"token operator\">=\u003C/span> mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>length\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _beginX \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_cardCount \u003Cspan class=\"token operator\">-\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">.5\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token number\">1.5\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>CameraControls \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>ambientLight intensity\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.1\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>directionalLight color\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"white\"\u003C/span> position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">5\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-1\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-2\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-0\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>In order to reflect the 3D interface, add an orbiting camera (swipe the scene to\nadjust the camera corner)\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token function\">extend\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> OrbitControls \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">CameraControls\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n    gl\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> domElement \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  camera\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">set\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">10\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> controls \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useRef\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token function\">useFrame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>state\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token punctuation\">(\u003C/span>controls\u003Cspan class=\"token punctuation\">.\u003C/span>current \u003Cspan class=\"token keyword\">as\u003C/span> \u003Cspan class=\"token builtin\">unknown\u003C/span> \u003Cspan class=\"token keyword\">as\u003C/span> OrbitControls\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">update\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token comment\">// @ts-ignore\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>orbitControls\n      ref\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>controls\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      args\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>camera\u003Cspan class=\"token punctuation\">,\u003C/span> domElement\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      enableZoom\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      rotationSpeed\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.01\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Scene complete codeï¼š\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token comment\">//App.tsx\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> useEffect\u003Cspan class=\"token punctuation\">,\u003C/span> useRef\u003Cspan class=\"token punctuation\">,\u003C/span> useState \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"react\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> Canvas\u003Cspan class=\"token punctuation\">,\u003C/span> extend\u003Cspan class=\"token punctuation\">,\u003C/span> useFrame\u003Cspan class=\"token punctuation\">,\u003C/span> useThree \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"@react-three/fiber\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> OrbitControls \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"three/examples/jsm/controls/OrbitControls\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token string\">\"./App.css\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> Card \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./component/Card\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> GameModel \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./base/src/game/model/GameModel\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> GameSceneMediator \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./base/src/game/view/GameSceneMediator\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> GameSceneView \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./component/GameSceneView\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token function\">extend\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> OrbitControls \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">CameraControls\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n    gl\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> domElement \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  camera\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">set\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">10\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> controls \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useRef\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token function\">useFrame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>state\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token punctuation\">(\u003C/span>controls\u003Cspan class=\"token punctuation\">.\u003C/span>current \u003Cspan class=\"token keyword\">as\u003C/span> \u003Cspan class=\"token builtin\">unknown\u003C/span> \u003Cspan class=\"token keyword\">as\u003C/span> OrbitControls\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">update\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token comment\">// @ts-ignore\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>orbitControls\n      ref\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>controls\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      args\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>camera\u003Cspan class=\"token punctuation\">,\u003C/span> domElement\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      enableZoom\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      rotationSpeed\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.01\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">R3fScene\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n  props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> mainHandCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> gameModel\u003Cspan class=\"token punctuation\">;\u003C/span> outCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    scene\u003Cspan class=\"token punctuation\">,\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> mainHandCards \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameModel \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>gameModel\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>context \u003Cspan class=\"token operator\">=\u003C/span> scene\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _prefix \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token string\">\"/faces/\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _readableName \u003Cspan class=\"token operator\">=\u003C/span> _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getCardReadableName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"rJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_B.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"bJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_R.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitDic \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"D\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"C\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"H\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"S\"\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitNumber\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> serial \u003Cspan class=\"token operator\">>>\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _suitDic\u003Cspan class=\"token punctuation\">[\u003C/span>_suitNumber\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _readableName \u003Cspan class=\"token operator\">+\u003C/span>\n        \u003Cspan class=\"token string\">\".png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token keyword\">let\u003C/span> _cardCount \u003Cspan class=\"token operator\">=\u003C/span> mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>length\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _beginX \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_cardCount \u003Cspan class=\"token operator\">-\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">.5\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token number\">1.5\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>CameraControls \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>ambientLight intensity\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.1\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>directionalLight color\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"white\"\u003C/span> position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">5\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-1\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-2\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-0\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">App\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">any\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameFacade \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>gameFacade\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameModel\u003Cspan class=\"token operator\">:\u003C/span> GameModel \u003Cspan class=\"token operator\">=\u003C/span> _gameFacade\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">retrieveProxy\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"GameModel\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">,\u003C/span> setMainHandCards\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useState\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>cardsArr\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>outCards\u003Cspan class=\"token punctuation\">,\u003C/span> setOutCards\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useState\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">setMainHandCardsHook\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>setMainHandCards\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">setOutCardsHook\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>setOutCards\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token function\">useEffect\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_gameFacade\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">retrieveMediator\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"GameSceneMediator\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">==\u003C/span> \u003Cspan class=\"token keyword\">null\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n      _gameFacade\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">registerMediator\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\n        \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">GameSceneMediator\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token keyword\">null\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">GameSceneView\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n      \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"canvas-container\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>Canvas\n          orthographic\n          camera\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> zoom\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">50\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> position\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">100\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> rotation\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n        \u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token operator\">&lt;\u003C/span>R3fScene\n            mainHandCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            outCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>outCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            gameModel\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n          \u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>R3fScene\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>Canvas\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div\n        id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"status\"\u003C/span>\n        style\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          display\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"fix\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n          textAlign\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"center\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n          fontSize\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"2em\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n          userSelect\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"none\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">>\u003C/span>\n        hello\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores-1\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores-2\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores-3\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-operation\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-operation-pass\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          pass\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-operation-play\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          play\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">export\u003C/span> \u003Cspan class=\"token keyword\">default\u003C/span> App\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Ch3 id=\"framework-adaptation-changes\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#framework-adaptation-changes\">\u003Cspan>#\u003C/span>\u003C/a>Framework adaptation changes\u003C/h3>\n\u003Cul>\u003Cli>\u003Cstrong>Getting scene node\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token function\">getViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>isDOM\u003Cspan class=\"token operator\">:\u003C/span>\u003Cspan class=\"token builtin\">boolean\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token boolean\">true\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>canvasScene\u003Cspan class=\"token operator\">:\u003C/span>\u003Cspan class=\"token builtin\">any\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">null\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        \u003Cspan class=\"token keyword\">if\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>isDOM\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> document\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getElementById\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n            \u003Cspan class=\"token keyword\">if\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>canvasScene\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> canvasScene\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getObjectByName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>By passing in the scene object of three.js, call the getObjectByName interface\nto obtain the node with the pre-set name attribute\u003C/p>\n\u003Cul>\u003Cli>\u003Cstrong>Card value acquisition, card.userData (\u003Ccode>userData\u003C/code> is the loading\nobject of custom attributes in R3F, similar to \u003Ccode>data-yourAttribute\u003C/code>\nin react, here you can encapsulate a method to decouple GameSceneMediator from\ncard value, making the mediator more reusable )\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token keyword\">private\u003C/span> \u003Cspan class=\"token function\">onOutCards_C2S\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        \u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">hideControlPanel\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _outCardsSerial \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _cardsContainer \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>mViewClass\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getGameModel\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>context\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _cards \u003Cspan class=\"token operator\">=\u003C/span> _cardsContainer\u003Cspan class=\"token punctuation\">.\u003C/span>children\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">for\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token keyword\">let\u003C/span> i \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> i \u003Cspan class=\"token operator\">&lt;\u003C/span> _cards\u003Cspan class=\"token punctuation\">.\u003C/span>length\u003Cspan class=\"token punctuation\">;\u003C/span> i\u003Cspan class=\"token operator\">++\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n            \u003Cspan class=\"token keyword\">let\u003C/span> _card \u003Cspan class=\"token operator\">=\u003C/span> _cards\u003Cspan class=\"token punctuation\">[\u003C/span>i\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n            \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>mViewClass\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">isCardSelected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_card\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n                _outCardsSerial\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">push\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_card\u003Cspan class=\"token punctuation\">.\u003C/span>userData\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"_d_cardSerial\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token operator\">||\u003C/span>_card\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"_d_cardSerial\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">||\u003C/span> _card\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getAttribute\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"data-card-serial\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n            \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n        \u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getNetFacade\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token operator\">?.\u003C/span>\u003Cspan class=\"token function\">sendNotification\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card_game_pb\u003Cspan class=\"token punctuation\">.\u003C/span>Cmd\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PLAYCARDS_C2S\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> _outCardsSerial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cul>\u003Cli>\u003Cstrong>Node coordinate adjustment\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cp>By judging the adjustment of the corresponding css attribute of the node style\nto the corresponding attribute of the node position object\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token function\">isCardSelected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        \u003Cspan class=\"token keyword\">return\u003C/span> card\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>y \u003Cspan class=\"token operator\">==\u003C/span> \u003Cspan class=\"token number\">.2\u003C/span> \u003Cspan class=\"token operator\">?\u003C/span> \u003Cspan class=\"token boolean\">true\u003C/span> \u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode7-r3f\" rel=\"nofollow\">Checkout the repo https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode7-r3f\u003C/a>\u003C/p>\n\u003Chr>\n\u003Cp>æœ¬èŠ‚ä¸»è¦ä»‹ç»åˆ©ç”¨\u003Ca href=\"https://docs.pmnd.rs/react-three-fiber/getting-started/introduction\" rel=\"nofollow\">react-three-fiber\u003C/a>(ä»¥ä¸‹ç®€ç§°R3F)å®ç°äº¤äº’åœºæ™¯çš„æ­å»ºã€‚\u003C/p>\n\u003Ch3 id=\"ä¸ºä»€ä¹ˆé€‰æ‹©r3f\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#ä¸ºä»€ä¹ˆé€‰æ‹©r3f\">\u003Cspan>#\u003C/span>\u003C/a>ä¸ºä»€ä¹ˆé€‰æ‹©R3F\u003C/h3>\n\u003Cul>\u003Cli>R3Fä»…ä»…æ˜¯å°†Three.jsç”¨JSXè¿›è¡Œè¡¨ç¤ºï¼Œæ²¡æœ‰é¢å¤–å¼€é”€\u003C/li>\n\u003Cli>å¯ä»¥ç”¨reactçš„å£°æ˜æ–¹å¼æ„å»ºåœºæ™¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç»„ä»¶å¯è½»æ¾å¯¹çŠ¶æ€åšå‡ºååº”ï¼Œæ˜“äºäº¤äº’ï¼Œå¹¶ä¸”å¯ä»¥åˆ©ç”¨\nReact çš„ç”Ÿæ€\u003C/li>\u003C/ul>\n\u003Ch3 id=\"åœºæ™¯æ„å»ºå®ç°\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#åœºæ™¯æ„å»ºå®ç°\">\u003Cspan>#\u003C/span>\u003C/a>åœºæ™¯æ„å»ºå®ç°\u003C/h3>\n\u003Cul>\u003Cli>\u003Cstrong>æ‰‘å…‹ç‰Œ\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cp>æ³¨æ„æ­¤å¤„é€šè¿‡å°†å›¾ç‰‡åœ°å€ä¼ ç»™\u003Ccode>useTexture\u003C/code>ï¼Œå¾—åˆ°æ¸²æŸ“éœ€è¦çš„çº¹ç†\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token comment\">//Card.tsx\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> useTexture \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"@react-three/drei\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> Mesh \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"three\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">Card\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\n  props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    faceTextureUrl\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    idx\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    beginX\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _selectedOffsetY \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">.2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _beginX \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>beginX\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> _texture \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useTexture\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    map\u003Cspan class=\"token operator\">:\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>faceTextureUrl\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>mesh\n      position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>_beginX \u003Cspan class=\"token operator\">+\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>idx \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">.5\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>idx \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">0.001\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      onClick\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>e\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">any\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        e\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">stopPropagation\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _targetMesh \u003Cspan class=\"token operator\">=\u003C/span> e\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"eventObject\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token keyword\">as\u003C/span> Mesh\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _pos \u003Cspan class=\"token operator\">=\u003C/span> _targetMesh\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _upY\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_pos\u003Cspan class=\"token punctuation\">.\u003C/span>y \u003Cspan class=\"token operator\">==\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> _upY \u003Cspan class=\"token operator\">=\u003C/span> _selectedOffsetY\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">else\u003C/span> _upY \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        _targetMesh\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">set\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_pos\u003Cspan class=\"token punctuation\">.\u003C/span>x\u003Cspan class=\"token punctuation\">,\u003C/span> _upY\u003Cspan class=\"token punctuation\">,\u003C/span> _pos\u003Cspan class=\"token punctuation\">.\u003C/span>z\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      userData\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token string-property property\">\"_d_cardSerial\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>serial \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>boxGeometry args\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">.001\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>meshStandardMaterial \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token operator\">...\u003C/span>_texture\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>mesh\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">export\u003C/span> \u003Cspan class=\"token keyword\">default\u003C/span> Card\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cul>\u003Cli>\u003Cstrong>æ¸¸æˆåœºæ™¯\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cp>é¦–å…ˆå¿…é¡»å£°æ˜ä¸€ä¸ªCanvasèŠ‚ç‚¹ï¼Œå› ä¸ºthree.jsçš„æ‰€æœ‰éƒ½å¿…é¡»åœ¨CanvasèŠ‚ç‚¹ä¸‹\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token operator\">&lt;\u003C/span>Canvas\n  orthographic\n  camera\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> zoom\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">50\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> position\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">100\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> rotation\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token operator\">&lt;\u003C/span>R3fScene\n    mainHandCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    outCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>outCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    gameModel\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>R3fScene\u003Cspan class=\"token operator\">>\u003C/span>\n\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>Canvas\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨\u003Ccode>@react-three/fiber\u003C/code>æä¾›çš„hookï¼ˆthree.jsç›¸å…³çš„hookåªèƒ½åœ¨CanvasèŠ‚ç‚¹ä¸‹ä½¿ç”¨ï¼‰,å°†æ¸¸æˆåœºæ™¯èŠ‚ç‚¹å•ç‹¬æå‡ºæ¥\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">R3fScene\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n  props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> mainHandCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> gameModel\u003Cspan class=\"token punctuation\">;\u003C/span> outCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    scene\u003Cspan class=\"token punctuation\">,\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token function\">useEffect\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>scene\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getObjectByName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> mainHandCards \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameModel \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>gameModel\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>context \u003Cspan class=\"token operator\">=\u003C/span> scene\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _prefix \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token string\">\"/faces/\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _readableName \u003Cspan class=\"token operator\">=\u003C/span> _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getCardReadableName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"rJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_B.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"bJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_R.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitDic \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"D\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"C\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"H\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"S\"\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitNumber\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> serial \u003Cspan class=\"token operator\">>>\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _suitDic\u003Cspan class=\"token punctuation\">[\u003C/span>_suitNumber\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _readableName \u003Cspan class=\"token operator\">+\u003C/span>\n        \u003Cspan class=\"token string\">\".png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token keyword\">let\u003C/span> _cardCount \u003Cspan class=\"token operator\">=\u003C/span> mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>length\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _beginX \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_cardCount \u003Cspan class=\"token operator\">-\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">.5\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token number\">1.5\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>CameraControls \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>ambientLight intensity\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.1\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>directionalLight color\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"white\"\u003C/span> position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">5\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-1\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-2\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-0\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>ä¸ºäº†ä½“ç°3Dç•Œé¢ï¼Œæ·»åŠ ä¸€ä¸ªè½¨é“ç›¸æœºï¼ˆæ»‘åŠ¨åœºæ™¯å³å¯è°ƒæ•´ç›¸æœºè½¬è§’ï¼‰\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token function\">extend\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> OrbitControls \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">CameraControls\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n    gl\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> domElement \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  camera\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">set\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">10\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> controls \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useRef\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token function\">useFrame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>state\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token punctuation\">(\u003C/span>controls\u003Cspan class=\"token punctuation\">.\u003C/span>current \u003Cspan class=\"token keyword\">as\u003C/span> \u003Cspan class=\"token builtin\">unknown\u003C/span> \u003Cspan class=\"token keyword\">as\u003C/span> OrbitControls\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">update\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token comment\">// @ts-ignore\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>orbitControls\n      ref\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>controls\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      args\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>camera\u003Cspan class=\"token punctuation\">,\u003C/span> domElement\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      enableZoom\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      rotationSpeed\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.01\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>åœºæ™¯å®Œæ•´ä»£ç ï¼š\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token comment\">//App.tsx\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> useEffect\u003Cspan class=\"token punctuation\">,\u003C/span> useRef\u003Cspan class=\"token punctuation\">,\u003C/span> useState \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"react\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> Canvas\u003Cspan class=\"token punctuation\">,\u003C/span> extend\u003Cspan class=\"token punctuation\">,\u003C/span> useFrame\u003Cspan class=\"token punctuation\">,\u003C/span> useThree \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"@react-three/fiber\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> OrbitControls \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"three/examples/jsm/controls/OrbitControls\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token string\">\"./App.css\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> Card \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./component/Card\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> GameModel \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./base/src/game/model/GameModel\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> GameSceneMediator \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./base/src/game/view/GameSceneMediator\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> GameSceneView \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./component/GameSceneView\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token function\">extend\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> OrbitControls \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">CameraControls\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n    gl\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> domElement \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  camera\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">set\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">10\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> controls \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useRef\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token function\">useFrame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>state\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token punctuation\">(\u003C/span>controls\u003Cspan class=\"token punctuation\">.\u003C/span>current \u003Cspan class=\"token keyword\">as\u003C/span> \u003Cspan class=\"token builtin\">unknown\u003C/span> \u003Cspan class=\"token keyword\">as\u003C/span> OrbitControls\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">update\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token comment\">// @ts-ignore\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>orbitControls\n      ref\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>controls\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      args\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>camera\u003Cspan class=\"token punctuation\">,\u003C/span> domElement\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      enableZoom\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      rotationSpeed\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.01\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">R3fScene\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n  props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> mainHandCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> gameModel\u003Cspan class=\"token punctuation\">;\u003C/span> outCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    scene\u003Cspan class=\"token punctuation\">,\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> mainHandCards \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameModel \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>gameModel\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>context \u003Cspan class=\"token operator\">=\u003C/span> scene\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _prefix \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token string\">\"/faces/\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _readableName \u003Cspan class=\"token operator\">=\u003C/span> _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getCardReadableName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"rJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_B.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"bJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_R.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitDic \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"D\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"C\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"H\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"S\"\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitNumber\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> serial \u003Cspan class=\"token operator\">>>\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _suitDic\u003Cspan class=\"token punctuation\">[\u003C/span>_suitNumber\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _readableName \u003Cspan class=\"token operator\">+\u003C/span>\n        \u003Cspan class=\"token string\">\".png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token keyword\">let\u003C/span> _cardCount \u003Cspan class=\"token operator\">=\u003C/span> mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>length\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _beginX \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_cardCount \u003Cspan class=\"token operator\">-\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">.5\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token number\">1.5\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>CameraControls \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>ambientLight intensity\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.1\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>directionalLight color\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"white\"\u003C/span> position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">5\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-1\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-2\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-0\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">App\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">any\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameFacade \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>gameFacade\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameModel\u003Cspan class=\"token operator\">:\u003C/span> GameModel \u003Cspan class=\"token operator\">=\u003C/span> _gameFacade\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">retrieveProxy\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"GameModel\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">,\u003C/span> setMainHandCards\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useState\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>cardsArr\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>outCards\u003Cspan class=\"token punctuation\">,\u003C/span> setOutCards\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useState\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">setMainHandCardsHook\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>setMainHandCards\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">setOutCardsHook\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>setOutCards\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token function\">useEffect\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_gameFacade\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">retrieveMediator\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"GameSceneMediator\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">==\u003C/span> \u003Cspan class=\"token keyword\">null\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n      _gameFacade\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">registerMediator\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\n        \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">GameSceneMediator\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token keyword\">null\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">GameSceneView\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n      \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"canvas-container\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>Canvas\n          orthographic\n          camera\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> zoom\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">50\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> position\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">100\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> rotation\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n        \u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token operator\">&lt;\u003C/span>R3fScene\n            mainHandCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            outCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>outCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            gameModel\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n          \u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>R3fScene\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>Canvas\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div\n        id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"status\"\u003C/span>\n        style\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          display\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"fix\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n          textAlign\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"center\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n          fontSize\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"2em\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n          userSelect\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"none\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">>\u003C/span>\n        hello\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores-1\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores-2\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores-3\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-operation\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-operation-pass\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          pass\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-operation-play\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          play\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">export\u003C/span> \u003Cspan class=\"token keyword\">default\u003C/span> App\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Ch3 id=\"æ¡†æ¶é€‚é…æ”¹åŠ¨\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#æ¡†æ¶é€‚é…æ”¹åŠ¨\">\u003Cspan>#\u003C/span>\u003C/a>æ¡†æ¶é€‚é…æ”¹åŠ¨\u003C/h3>\n\u003Cul>\u003Cli>\u003Cstrong>è·å–åœºæ™¯èŠ‚ç‚¹\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token function\">getViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>isDOM\u003Cspan class=\"token operator\">:\u003C/span>\u003Cspan class=\"token builtin\">boolean\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token boolean\">true\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>canvasScene\u003Cspan class=\"token operator\">:\u003C/span>\u003Cspan class=\"token builtin\">any\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">null\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        \u003Cspan class=\"token keyword\">if\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>isDOM\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> document\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getElementById\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n            \u003Cspan class=\"token keyword\">if\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>canvasScene\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> canvasScene\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getObjectByName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>é€šè¿‡ä¼ å…¥three.jsçš„åœºæ™¯å¯¹è±¡ï¼Œè°ƒç”¨getObjectByNameæ¥å£è·å–é¢„å…ˆè®¾ç½®å¥½nameå±æ€§çš„èŠ‚ç‚¹\u003C/p>\n\u003Cul>\u003Cli>\u003Cstrong>ç‰Œå€¼è·å–card.userDataï¼ˆuserDataæ˜¯R3Fä¸­è‡ªå®šä¹‰å±æ€§çš„è£…è½½å¯¹è±¡ï¼Œç±»ä¼¼reactä¸­çš„data-yourAttribute,\nåœ¨è¿™é‡Œå¯ä»¥å°è£…ä¸€ä¸ªæ–¹æ³•ï¼Œè®©GameSceneMediatorä¸ç‰Œå–å€¼è§£è€¦ï¼Œä½¿mediatorçš„å¤ç”¨æ€§æ›´å¼ºï¼‰\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token keyword\">private\u003C/span> \u003Cspan class=\"token function\">onOutCards_C2S\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        \u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">hideControlPanel\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _outCardsSerial \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _cardsContainer \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>mViewClass\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getGameModel\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>context\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _cards \u003Cspan class=\"token operator\">=\u003C/span> _cardsContainer\u003Cspan class=\"token punctuation\">.\u003C/span>children\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">for\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token keyword\">let\u003C/span> i \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> i \u003Cspan class=\"token operator\">&lt;\u003C/span> _cards\u003Cspan class=\"token punctuation\">.\u003C/span>length\u003Cspan class=\"token punctuation\">;\u003C/span> i\u003Cspan class=\"token operator\">++\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n            \u003Cspan class=\"token keyword\">let\u003C/span> _card \u003Cspan class=\"token operator\">=\u003C/span> _cards\u003Cspan class=\"token punctuation\">[\u003C/span>i\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n            \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>mViewClass\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">isCardSelected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_card\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n                _outCardsSerial\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">push\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_card\u003Cspan class=\"token punctuation\">.\u003C/span>userData\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"_d_cardSerial\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token operator\">||\u003C/span>_card\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"_d_cardSerial\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">||\u003C/span> _card\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getAttribute\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"data-card-serial\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n            \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n        \u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getNetFacade\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token operator\">?.\u003C/span>\u003Cspan class=\"token function\">sendNotification\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card_game_pb\u003Cspan class=\"token punctuation\">.\u003C/span>Cmd\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PLAYCARDS_C2S\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> _outCardsSerial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cul>\u003Cli>\u003Cstrong>èŠ‚ç‚¹åæ ‡è°ƒæ•´\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cp>ç”±åˆ¤æ–­èŠ‚ç‚¹style ç›¸åº”csså±æ€§çš„è°ƒæ•´ä¸ºèŠ‚ç‚¹positionå¯¹è±¡ç›¸åº”å±æ€§\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token function\">isCardSelected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        \u003Cspan class=\"token keyword\">return\u003C/span> card\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>y \u003Cspan class=\"token operator\">==\u003C/span> \u003Cspan class=\"token number\">.2\u003C/span> \u003Cspan class=\"token operator\">?\u003C/span> \u003Cspan class=\"token boolean\">true\u003C/span> \u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode7-r3f\" rel=\"nofollow\">æŸ¥çœ‹æœ¬èŠ‚ç›¸å…³ä»£ç  https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode7-r3f\u003C/a>\u003C/p>","13 min read",[12,20,28],{"title":13,"slug":14,"coverImage":4,"date":15,"excerpt":16,"tags":17,"html":18,"readingTime":19},"Make a multiplayer card game - Episode 3","change-json-to-protocol-buffers-e3","2021-02-22T21:55:15.361Z","Change JSON to Protocol Buffers",[8],"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C/h2>\n\u003Cblockquote>\u003Cp>Protocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as â€œLesser in\nSize and Better in Performanceâ€, like this article\n\u003Ca href=\"https://anuragthakur.hashnode.dev/protobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\">Why Google moved from JSON to Protocol Buffers?\u003C/a>\nintroduce.\u003C/p>\u003C/blockquote>\n\u003Cp>I used it on all the projects Iâ€™ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C/p>\n\u003Cblockquote>\u003Cp>You can clone\n\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode3\" rel=\"nofollow\">demo for episode3\u003C/a>\nwhich including all the bellow content.\u003C/p>\u003C/blockquote>\n\u003Cp>According to the\n\u003Ca href=\"https://github.com/protocolbuffers/protobuf\" rel=\"nofollow\">official tutorial\u003C/a>, two steps\nshould be done:\u003C/p>\n\u003Col>\u003Cli>Install the runtime library \u003Ccode>google-protobuf\u003C/code>:\u003Ccode>npm install\ngoogle-protobuf\u003C/code>.\u003C/li>\n\u003Cli>Get the Protocol Compiler \u003Ccode>protoc\u003C/code>: download from\n\u003Ca href=\"https://github.com/protocolbuffers/protobuf/releases\" rel=\"nofollow\">https://github.com/protocolbuffers/protobuf/releases\u003C/a>\u003C/li>\u003C/ol>\n\u003Cp>Then run a command like \u003Ccode>protoc â€”js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C/code>, you can get the \u003Ccode>.js\u003C/code> file from\u003C/p>\n\u003Ccode>.proto\u003C/code>.\n\u003Cp>When the \u003Ccode>.js\u003C/code> file generated, the protocol buffers environment is\nready.\u003C/p>\n\u003Cp>Back to our game, we should create a \u003Ccode>.proto\u003C/code> file, named\u003C/p>\n\u003Ccode>card-game.proto\u003C/code>.\n\u003Cp>The first line in \u003Ccode>.proto\u003C/code> file should be:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">syntax = &quot;proto3&quot;;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>which means which version of Protobuf we are using.\u003C/p>\n\u003Cp>Define the enum of Cmd:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">enum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>enum Cmd is for routing, will be introduced later.\u003C/p>\n\u003Cp>Define MainMessage message:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">message MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>In order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C/p>\n\u003Cp>Define data message like:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">message DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Then, generate our own \u003Ccode>.js\u003C/code> file.\u003C/p>\n\u003Cp>As the episode3 demo show, run command bellow in directory proto.\u003C/p>\n\u003Cul>\u003Cli>\u003Cp>Windows\u003C/p>\n\u003Ccode>.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C/code>\u003C/li>\n\u003Cli>\u003Cp>MacOS\u003C/p>\n\u003Ccode>./protoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C/code>\u003C/li>\u003C/ul>\n\u003Cp>Now, we have our own \u003Ccode>.js\u003C/code> file from the \u003Ccode>.proto\u003C/code> in which\nwe define message.\u003C/p>\n\u003Cp>Letâ€™s encoding and decoding message with protocol buffers.\u003C/p>\n\u003Cp>Encoding: &gt;enum Cmd is used to map message type here\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">function encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Decoding: &gt;enum Cmd is used to map message type here\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">function decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cblockquote>\u003Cp>Caution:\u003C/p>\n\u003Col>\u003Cli>Attributes defined as \u003Cstrong>seat_number\u003C/strong> in \u003Ccode>.proto\u003C/code> file should be\ncall like getSeatNumber and setSeatNumebr.\u003C/li>\n\u003Cli>Attributes defined as \u003Cstrong>repeated\u003C/strong> type in \u003Ccode>.proto\u003C/code> should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C/li>\u003C/ol>\u003C/blockquote>","3 min read",{"title":21,"slug":22,"coverImage":4,"date":23,"excerpt":24,"tags":25,"html":26,"readingTime":27},"Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React","create-2d-graphical-interface-with-react-e6","2021-03-29T21:55:15.361Z","This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.",[8],"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React\u003C/h2>\n\u003Cp>This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api. The following is an abstracted interface:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">export interface IGameSceneView &#123;\n    getViewComponent(name: string),\n    getNewViewComponent(comp),\n    getChild(childPath, parent),\n    addClickListener(comp, handler, target),\n    setCard(card, name),\n    setLabel(labelComp, text),\n    removeAllChildren(parent),\n    addChild(child, parent),\n    isCardSelected(card),\n    toggleCardSelectedStatus(card),\n    showComponent(comp),\n    hideComponent(comp)\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Compared with cocos creator, the implementation of react is more operable at the code level. The styles of interface elements are all implemented by handwritten code. The hot-reload that comes with create-react-app also responds to changes very quickly. There is a time to switch editors and wait for the editor to refresh, which is very lightweight.\u003C/p>\n\u003Cp>Code reference \u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode6-react\" rel=\"nofollow\">https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode6-react\u003C/a>\u003C/p>\n\u003Cp>The next article mainly introduces the comparison between cocos creator and react implementation in development.\u003C/p>\n\u003Cp>æœ¬èŠ‚ä¸»è¦æ˜¯ç”¨reactå®ç°UIè§†å›¾ã€‚\nåœ¨æœ¬èŠ‚ä¹‹å‰ï¼Œå·²ç»ç”¨cocos creatorå®ç°äº†ä¸€ä¸ªUIè§†å›¾ç‰ˆæœ¬ï¼Œä¸ºäº†é‡ç”¨åŸºç¡€æ¡†æ¶ï¼Œæˆ‘ä»¬å°†æ¸¸æˆé€»è¾‘è¿›è¡ŒæŠ½è±¡ï¼Œå¹¶å°†ä¸è§†å›¾å¼•æ“apiç›¸å…³çš„é€»è¾‘è§£è€¦å‡ºæ¥ã€‚\nä¸‹é¢æ˜¯æŠ½è±¡å‡ºæ¥çš„ä¸€ä¸ªæ¥å£ï¼š\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token keyword\">export\u003C/span> \u003Cspan class=\"token keyword\">interface\u003C/span> \u003Cspan class=\"token class-name\">IGameSceneView\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token function\">getViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">getNewViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>comp\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">getChild\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>childPath\u003Cspan class=\"token punctuation\">,\u003C/span> parent\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">addClickListener\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>comp\u003Cspan class=\"token punctuation\">,\u003C/span> handler\u003Cspan class=\"token punctuation\">,\u003C/span> target\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">setCard\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card\u003Cspan class=\"token punctuation\">,\u003C/span> name\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">setLabel\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>labelComp\u003Cspan class=\"token punctuation\">,\u003C/span> text\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">removeAllChildren\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>parent\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">addChild\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>child\u003Cspan class=\"token punctuation\">,\u003C/span> parent\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">isCardSelected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">toggleCardSelectedStatus\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">showComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>comp\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">hideComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>comp\u003Cspan class=\"token punctuation\">)\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>ç›¸å¯¹äºcocos creatorï¼Œreactçš„å®ç°åœ¨ä»£ç å±‚é¢å¯æ“ä½œæ€§è¾ƒå¼ºï¼Œä½“ç°åœ¨ç•Œé¢å…ƒç´ çš„æ ·å¼éƒ½é€šè¿‡æ‰‹å†™ä»£ç æ¥å®ç°ï¼Œcreate-react-appè‡ªå¸¦çš„hot-reloadä¹Ÿéå¸¸å¿«åœ°åé¦ˆå˜æ›´ï¼Œä¸ä¼šæœ‰åˆ‡æ¢ç¼–è¾‘å™¨å’Œç­‰å¾…ç¼–è¾‘å™¨åˆ·æ–°çš„æ—¶é—´ï¼Œéå¸¸è½»é‡çš„æ„Ÿè§‰ã€‚\u003C/p>\n\u003Cp>ä»£ç å‚è€ƒ \u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode6-react\" rel=\"nofollow\">https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode6-react\u003C/a>\u003C/p>\n\u003Cp>ä¸‹ä¸€ç¯‡ä¸»è¦ä»‹ç»cocos creator ä¸ react å®ç°åœ¨å¼€å‘ä¸Šçš„å¯¹æ¯”ã€‚\u003C/p>","2 min read",{"title":29,"slug":30,"coverImage":4,"date":31,"excerpt":32,"tags":33,"html":34,"readingTime":27},"Make a multiplayer card game - Episode 1","create-a-simple-server-and-client-from-scratch-e1","2021-02-01T21:55:15.361Z","Create a simple server and client from scratch",[8],"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C/h2>\n\u003Cp>In the coming weeks, Iâ€™ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame â€œDoudizhuâ€, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C/p>\n\u003Cp>Parts including:\u003C/p>\n\u003Cul>\u003Cli>create a simple server and client\u003C/li>\n\u003Cli>play cards in terminal with bots\u003C/li>\n\u003Cli>communicate with server by protobuf\u003C/li>\n\u003Cli>play cards in terminal with other players\u003C/li>\n\u003Cli>create 2D graphical interface with Cocos Creator\u003C/li>\n\u003Cli>create 2D graphical interface with React\u003C/li>\n\u003Cli>create 3D graphical interface with Three.js\u003C/li>\n\u003Cli>add physical lib ammo.js to add a tiny game\u003C/li>\n\u003Cli>connect to Web3 world\u003C/li>\u003C/ul>\n\u003Cp>\u003Cem>open your terminal, input \u003Ccode>node -v\u003C/code>, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\">https://nodejs.org\u003C/a>.\u003C/em>\u003C/p>\n\u003Cp>directory structure :\n\u003Cimg src=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1644775769474/2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\">\u003C/p>\n\u003Cp>create a server, server/index.js:\u003C/p>\n\u003Cdiv class=\"code-block svelte-1pkpsrg\">\n\t\n\t\u003Cpre class=\"language-ts\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-ts\">\u003Cspan class=\"token keyword\">const\u003C/span> net \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">require\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"net\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> server \u003Cspan class=\"token operator\">=\u003C/span> net\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">createServer\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">on\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"data\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token function\">handlerData\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> data\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">handlerData\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">send\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token string-property property\">\"msg\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Welcome, friend.\"\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">send\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> bufferData \u003Cspan class=\"token operator\">=\u003C/span> Buffer\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">from\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token constant\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">stringify\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">write\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>bufferData\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\nserver\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">listen\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">8080\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"server listening on 127.0.0.1:8080\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003C/div>\n\u003Cp>create client, client/index.js:\u003C/p>\n\u003Cdiv class=\"code-block svelte-1pkpsrg\">\n\t\n\t\u003Cpre class=\"language-ts\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-ts\">\u003Cspan class=\"token keyword\">const\u003C/span> net \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">require\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"net\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">const\u003C/span> socket \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">net\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">Socket\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\nsocket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">connect\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  host\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"127.0.0.1\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n  port\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">8080\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> onConnected\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\nsocket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">on\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"data\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">decode\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\nsocket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">on\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"error\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">onConnected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">startGame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">decode\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token constant\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">parse\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>msg\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">request\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> bufferData \u003Cspan class=\"token operator\">=\u003C/span> Buffer\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">from\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token constant\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">stringify\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token string-property property\">\"msg\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> data \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">write\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>bufferData\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">startGame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">request\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"Hello, world!\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003C/div>\n\u003Cp>run :\u003C/p>\n\u003Cp>\u003Ccode>cd server\u003C/code>\u003C/p>\n\u003Cp>\u003Ccode>node index.js\u003C/code>\u003C/p>\n\u003Cp>\u003Ccode>cd client\u003C/code>\u003C/p>\n\u003Cp>\u003Ccode>node index.js\u003C/code>\u003C/p>\n\u003Cp>result:\u003C/p>\n\u003Cp>\u003Cimg src=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1644776034549/t-Jir1j9R.png\" alt=\"demo0-cmd-result.png\">\u003C/p>\n\u003Cp>This episode is end here, the complete demo can be found on\n\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode1\" rel=\"nofollow\">https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode1\u003C/a>\u003C/p>\n\u003Cp>Any problems, discussion is welcome.\u003C/p>\n\u003Cp>\u003Cstrong>In the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C/strong>\u003C/p>\n\u003Cp>Thanks for your reading.\u003C/p>"],"uses":{"url":1}},null]}
