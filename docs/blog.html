<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Favicon -->
		<link
			rel="apple-touch-icon"
			sizes="180x180"
			href="./favicons/apple-touch-icon.png"
		/>
		<link
			rel="icon"
			type="image/png"
			sizes="32x32"
			href="./favicons/favicon-32x32.png"
		/>
		<link
			rel="icon"
			type="image/png"
			sizes="16x16"
			href="./favicons/favicon-16x16.png"
		/>
		<link rel="manifest" href="./favicons/site.webmanifest" />
		<link
			rel="mask-icon"
			href="./favicons/safari-pinned-tab.svg"
			color="#0ca4a5"
		/>
		<link rel="shortcut icon" href="./favicons/favicon.ico" />
		<link rel="icon" href="./favicons/favicon.png" />

		<!-- Tell browser this site is responsive -->
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!-- Tell browser this site supports light and dark mode -->
		<meta name="color-scheme" content="light dark" />
		<!-- Color for browser url bar in mobile/Safari -->
		<meta name="theme-color" media="(prefers-color-scheme: light)" content="#b28cf2" />
		<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#4612A1" />
		<!-- Disable Google FLOC -->
		<meta http-equiv="Permissions-Policy" content="interest-cohort=()" />

		<script>
			// Calling this here so that it loads as quickly as possible
			// Avoiding a flash of light mode in case dark mode is used
			const theme = localStorage.getItem('theme-preference') || 'auto';
			document.firstElementChild?.setAttribute('data-theme', theme);
		</script>

		<meta http-equiv="content-security-policy" content="">
		<link href="./_app/immutable/assets/_layout.13484673.css" rel="stylesheet">
		<link href="./_app/immutable/assets/_layout.4c4b0438.css" rel="stylesheet">
		<link href="./_app/immutable/assets/Footer.1dadae6c.css" rel="stylesheet">
		<link href="./_app/immutable/assets/Socials.1c0e54d1.css" rel="stylesheet">
		<link href="./_app/immutable/assets/_page.f207d5be.css" rel="stylesheet">
		<link href="./_app/immutable/assets/ContentSection.3fd00a97.css" rel="stylesheet">
		<link href="./_app/immutable/assets/Image.0954db74.css" rel="stylesheet">
		<link rel="modulepreload" href="./_app/immutable/entry/start.f5ebb3fd.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/index.8378de51.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/index.d2f8f443.js">
		<link rel="modulepreload" href="./_app/immutable/entry/app.64ca6474.js">
		<link rel="modulepreload" href="./_app/immutable/entry/_layout.svelte.4f5a2415.js">
		<link rel="modulepreload" href="./_app/immutable/entry/_layout.ts.984db11e.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/_layout.da46b06b.js">
		<link rel="modulepreload" href="./_app/immutable/entry/(waves)-layout.svelte.67d035c4.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Footer.a8812241.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Socials.38340573.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/meta.82364fc2.js">
		<link rel="modulepreload" href="./_app/immutable/entry/(waves)-blog-page.svelte.1ba056f6.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/ContentSection.a44e8ed6.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/regex.7dfa9b23.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Image.525abdd9.js"><title>SvelteKit Static Blog Template</title><!-- HEAD_svelte-12ekxku_START --><link rel="“canonical”" href="https://sveltekit-static-blog-template.vercel.app/"><meta name="keywords" content="Svelte, SvelteKit, Template, Blog, Starter, Static Site"><meta name="description" content="A light, neat, and easy-to-use SvelteKit template for your next website."><meta property="og:description" content="A light, neat, and easy-to-use SvelteKit template for your next website."><meta name="twitter:description" content="A light, neat, and easy-to-use SvelteKit template for your next website."><meta property="og:title" content="SvelteKit Static Blog Template"><meta name="twitter:title" content="SvelteKit Static Blog Template"><meta property="og:image" content="https://sveltekit-static-blog-template.vercel.app//images/site-preview.png"><meta name="twitter:image" content="https://sveltekit-static-blog-template.vercel.app//images/site-preview.png"><meta name="twitter:card" content="summary_large_image"><!-- HEAD_svelte-12ekxku_END -->
	</head>
	<body data-sveltekit-preload-data="hover">
		<div id="svelte-root">



<div class="waves-container svelte-of6vnk"><svg class="waves svelte-of6vnk" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax svelte-of6vnk"><use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(var(--color--page-background-rgb),0.7)" class="svelte-of6vnk"></use><use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(var(--color--page-background-rgb),0.5)" class="svelte-of6vnk"></use><use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(var(--color--page-background-rgb),0.3)" class="svelte-of6vnk"></use><use xlink:href="#gentle-wave" x="48" y="7" fill="var(--color--page-background)" class="svelte-of6vnk"></use></g></svg></div>
<header class="svelte-1gvg2a4"><nav class="container svelte-1gvg2a4"><a class="logo svelte-1gvg2a4" href="/" aria-label="Site logo"><div class="logo svelte-qu2viy animated"><svg id="logo-text" width="723.84009" height="116.720268" viewBox="0 0 723.84009 116.720269" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-qu2viy"><text xml:space="preserve" id="text" transform="translate(-278.77228,-206.83728)" class="svelte-qu2viy"><tspan x="275.57227" y="292.17088" id="tspan1319"><tspan style="font-size:106.667px;font-family:YoungSerif;" id="tspan1317">lizhiyu.me</tspan></tspan></text></svg>
</div></a>
		<div class="links svelte-1gvg2a4"><a href="/blog" class="svelte-1gvg2a4">Blog</a>
			<a href="/rss.xml" target="_blank" rel="noopener noreferrer" title="Subscribe to my RSS Feed" class="svelte-1llmev"><svg width="100%" height="100%" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 19C12 14.8 9.2 12 5 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19 19C19 10.6 13.4 5 5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5 19.01L5.01 18.9989" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path></svg></a>
			<noscript>
	<style>.theme-toggle {
			display: none !important;
		}
	</style></noscript>
<button class="theme-toggle svelte-niuf71" title="Toggle between light and dark theme"><svg aria-hidden="true" width="24" height="24" viewBox="0 0 24 24"><mask id="moon" class="svelte-niuf71"><rect x="0" y="0" width="100%" height="100%" fill="white" class="svelte-niuf71"></rect><circle cx="40" cy="8" r="11" fill="black" class="svelte-niuf71"></circle></mask><circle id="sun" cx="12" cy="12" r="11" mask="url(#moon)" class="svelte-niuf71"></circle><g id="sun-beams" class="svelte-niuf71"><line x1="12" y1="1" x2="12" y2="3" class="svelte-niuf71"></line><line x1="12" y1="21" x2="12" y2="23" class="svelte-niuf71"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" class="svelte-niuf71"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" class="svelte-niuf71"></line><line x1="1" y1="12" x2="3" y2="12" class="svelte-niuf71"></line><line x1="21" y1="12" x2="23" y2="12" class="svelte-niuf71"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" class="svelte-niuf71"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" class="svelte-niuf71"></line></g></svg>
	<span class="label svelte-niuf71">Auto</span>
</button></div></nav>
</header>
<main><div class="container"><section class="content-section top svelte-emrvls"><div class="title-area svelte-emrvls"><div class="text svelte-emrvls"><h2>All Blog Posts</h2>
				</div>
		</div>
	<div class="content-area svelte-emrvls"><div class="grid svelte-1mrrl9u"><a class="card blog-post-card  svelte-1kz16cj" href="/make-a-multiplayer-card-game-episode-7" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"><img srcset="/images/posts/blog-posts.avif, /images/posts/blog-posts.webp, /images/posts/blog-posts.png" src="/images/posts/blog-posts.jpg" alt="Cover image of this blog post" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">Make a multiplayer card game - Episode 7 | Create 3D graphical interface with Three.js</p>
		<div class="note svelte-1i7t6gt">13 min read</div>
		<p class="text svelte-1i7t6gt">Create 3D graphical interface with Three.js</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Tutorial:Make a multiplayer card game</div></div></div></div></div>
</a><a class="card blog-post-card  svelte-1kz16cj" href="/create-2d-graphical-interface-with-react-e6" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"><img srcset="/images/posts/blog-posts.avif, /images/posts/blog-posts.webp, /images/posts/blog-posts.png" src="/images/posts/blog-posts.jpg" alt="Cover image of this blog post" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React</p>
		<div class="note svelte-1i7t6gt">2 min read</div>
		<p class="text svelte-1i7t6gt">This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Tutorial:Make a multiplayer card game</div></div></div></div></div>
</a><a class="card blog-post-card  svelte-1kz16cj" href="/make-a-multiplayer-card-game-episode-5" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"><img srcset="/images/posts/blog-posts.avif, /images/posts/blog-posts.webp, /images/posts/blog-posts.png" src="/images/posts/blog-posts.jpg" alt="Cover image of this blog post" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">Make a multiplayer card game - Episode 5 | Create 2D graphical interface with Cocos Creator</p>
		<div class="note svelte-1i7t6gt">4 min read</div>
		<p class="text svelte-1i7t6gt">Create 2D graphical interface with Cocos Creator</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Tutorial:Make a multiplayer card game</div></div></div></div></div>
</a><a class="card blog-post-card  svelte-1kz16cj" href="/prior-for-e5-puremvc" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"><img srcset="/images/posts/blog-posts.avif, /images/posts/blog-posts.webp, /images/posts/blog-posts.png" src="/images/posts/blog-posts.jpg" alt="Cover image of this blog post" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">PureMVC | Prior for Episode 5</p>
		<div class="note svelte-1i7t6gt">2 min read</div>
		<p class="text svelte-1i7t6gt">PureMVC will be included in next episode.</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Tutorial:Make a multiplayer card game</div></div></div></div></div>
</a><a class="card blog-post-card  svelte-1kz16cj" href="/prior-for-e5-ccc" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"><img srcset="/images/posts/blog-posts.avif, /images/posts/blog-posts.webp, /images/posts/blog-posts.png" src="/images/posts/blog-posts.jpg" alt="Cover image of this blog post" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">Prior for Episode 5 - Cocos Creator</p>
		<div class="note svelte-1i7t6gt">1 min read</div>
		<p class="text svelte-1i7t6gt">I am writing a demo by Cocos Creator for episode 5</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Tutorial:Make a multiplayer card game</div></div></div></div></div>
</a><a class="card blog-post-card  svelte-1kz16cj" href="/play-cards-with-other-players-e4" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"><img srcset="/images/posts/blog-posts.avif, /images/posts/blog-posts.webp, /images/posts/blog-posts.png" src="/images/posts/blog-posts.jpg" alt="Cover image of this blog post" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">Make a multiplayer card game - Episode 4</p>
		<div class="note svelte-1i7t6gt">3 min read</div>
		<p class="text svelte-1i7t6gt">Play cards with other players</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Tutorial:Make a multiplayer card game</div></div></div></div></div>
</a><a class="card blog-post-card  svelte-1kz16cj" href="/change-json-to-protocol-buffers-e3" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"><img srcset="/images/posts/blog-posts.avif, /images/posts/blog-posts.webp, /images/posts/blog-posts.png" src="/images/posts/blog-posts.jpg" alt="Cover image of this blog post" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">Make a multiplayer card game - Episode 3</p>
		<div class="note svelte-1i7t6gt">3 min read</div>
		<p class="text svelte-1i7t6gt">Change JSON to Protocol Buffers</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Tutorial:Make a multiplayer card game</div></div></div></div></div>
</a><a class="card blog-post-card  svelte-1kz16cj" href="/prior-knowledge-for-episode-2" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"><img srcset="/images/posts/blog-posts.avif, /images/posts/blog-posts.webp, /images/posts/blog-posts.png" src="/images/posts/blog-posts.jpg" alt="Cover image of this blog post" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">Prior Knowledge For Episode 2</p>
		<div class="note svelte-1i7t6gt">4 min read</div>
		<p class="text svelte-1i7t6gt">Prior Knowledge For Episode 2</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Tutorial:Make a multiplayer card game</div></div></div></div></div>
</a><a class="card blog-post-card  svelte-1kz16cj" href="/play-cards-in-terminal-with-bots-e2" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"><img srcset="/images/posts/blog-posts.avif, /images/posts/blog-posts.webp, /images/posts/blog-posts.png" src="/images/posts/blog-posts.jpg" alt="Cover image of this blog post" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">Play cards in terminal with bots - Episode 2</p>
		<div class="note svelte-1i7t6gt">3 min read</div>
		<p class="text svelte-1i7t6gt">Play cards in terminal with bots</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Tutorial:Make a multiplayer card game</div></div></div></div></div>
</a><a class="card blog-post-card  svelte-1kz16cj" href="/create-a-simple-server-and-client-from-scratch-e1" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"><img srcset="/images/posts/blog-posts.avif, /images/posts/blog-posts.webp, /images/posts/blog-posts.png" src="/images/posts/blog-posts.jpg" alt="Cover image of this blog post" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">Make a multiplayer card game - Episode 1</p>
		<div class="note svelte-1i7t6gt">2 min read</div>
		<p class="text svelte-1i7t6gt">Create a simple server and client from scratch</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Tutorial:Make a multiplayer card game</div></div></div></div></div>
</a><a class="card blog-post-card  svelte-1kz16cj" href="/customization" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"><img srcset="/images/posts/customization.avif, /images/posts/customization.webp, /images/posts/customization.png" src="/images/posts/customization.jpg" alt="Cover image of this blog post" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">How to Customize this Template</p>
		<div class="note svelte-1i7t6gt">3 min read</div>
		<p class="text svelte-1i7t6gt">How to customize what you're seeing here and make it your own.</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Documentation</div></div></div></div></div>
</a><a class="card blog-post-card  svelte-1kz16cj" href="/project-structure" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"><img srcset="/images/posts/project-structure.avif, /images/posts/project-structure.webp, /images/posts/project-structure.png" src="/images/posts/project-structure.jpg" alt="Cover image of this blog post" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">Project Structure</p>
		<div class="note svelte-1i7t6gt">2 min read</div>
		<p class="text svelte-1i7t6gt">How code and structure are organized.</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Documentation</div></div></div></div></div>
</a><a class="card blog-post-card  svelte-1kz16cj" href="/blog-posts" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"><img srcset="/images/posts/blog-posts.avif, /images/posts/blog-posts.webp, /images/posts/blog-posts.png" src="/images/posts/blog-posts.jpg" alt="Cover image of this blog post" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">How Blog Posts Work</p>
		<div class="note svelte-1i7t6gt">3 min read</div>
		<p class="text svelte-1i7t6gt">How to manage existing blog posts and create new ones</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Documentation</div></div></div></div></div>
</a></div></div>
</section>
</div></main>
<footer class="svelte-1m94jhe"><div class="wave"><svg width="100%" height="120" viewBox="0 0 1440 120" fill="none" style="transform: scale(-1,-1)" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" class="footer__wave"><path d="M0 0L48 8.875C96 17.9167 192 35.4167 288 53.3333C384 71.25 480 88.75 576 82.2083C672 75.4167 768 44.5833 864 26.6667C960 8.75 1056 4.58333 1152 11.125C1248 17.9167 1344 35.4167 1392 44.4583L1440 53.3333V120H1392C1344 120 1248 120 1152 120C1056 120 960 120 864 120C768 120 672 120 576 120C480 120 384 120 288 120C192 120 96 120 48 120H0V0Z" fill="var(--body-background-color)"></path></svg></div>
	<div class="content svelte-1m94jhe"><div class="copyright">This template was built by <a href="https://fantinel.dev?utm_source=site-template" target="_blank" rel="noopener noreferrer" class="svelte-1m94jhe">Matheus Fantinel</a>.
		</div>
		<div class="credits svelte-1m94jhe">Powered by <a href="https://kit.svelte.dev/" target="_blank" rel="noopener noreferrer" class="svelte-1m94jhe">SvelteKit</a>. Icons by
			<a href="https://iconoir.com/" target="_blank" rel="noopener noreferrer" class="svelte-1m94jhe">Iconoir</a>.
		</div>
		<div class="socials svelte-1m94jhe"><div class="socials svelte-t4kqcq">
	
	
	
	<a href="https://twitter.com/lychee_fish" target="_blank" rel="noopener noreferrer" title="Send an email" class="svelte-t4kqcq"><svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22.5 5.63a9.04 9.04 0 0 1-2.56 0.7 4.48 4.48 0 0 0 2-2.49 9 9 0 0 1-2.82 1.08 4.5 4.5 0 0 0-7.68 4.08 12.77 12.77 0 0 1-9.25-4.68 4.49 4.49 0 0 0 1.39 6 4.42 4.42 0 0 1-2.03-0.56v0.06a4.5 4.5 0 0 0 3.6 4.41 4.5 4.5 0 0 1-2.03 0.08 4.5 4.5 0 0 0 4.19 3.12 9 9 0 0 1-5.6 1.93A9.15 9.15 0 0 1 2 19.74a12.7 12.7 0 0 0 6.88 2.02c8.26 0 12.79-6.84 12.79-12.79v-0.61a9.13 9.13 0 0 0 2.24-2.33" fill="currentColor"></path></svg></a>
	<a href="mailto:lizhiyu.me@gmail.com" target="_blank" rel="noopener noreferrer" title="Send an email" class="svelte-t4kqcq"><svg width="100%" height="100%" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 9L12 12.5L17 9" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2 17V7C2 5.89543 2.89543 5 4 5H20C21.1046 5 22 5.89543 22 7V17C22 18.1046 21.1046 19 20 19H4C2.89543 19 2 18.1046 2 17Z" stroke="currentColor" stroke-width="1.5"></path></svg></a>
</div>
			<a href="/rss.xml" target="_blank" rel="noopener noreferrer" title="Subscribe to my RSS Feed" class="svelte-1llmev"><svg width="100%" height="100%" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 19C12 14.8 9.2 12 5 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19 19C19 10.6 13.4 5 5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5 19.01L5.01 18.9989" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path></svg></a>
			<noscript>
	<style>.theme-toggle {
			display: none !important;
		}
	</style></noscript>
<button class="theme-toggle svelte-niuf71" title="Toggle between light and dark theme"><svg aria-hidden="true" width="24" height="24" viewBox="0 0 24 24"><mask id="moon" class="svelte-niuf71"><rect x="0" y="0" width="100%" height="100%" fill="white" class="svelte-niuf71"></rect><circle cx="40" cy="8" r="11" fill="black" class="svelte-niuf71"></circle></mask><circle id="sun" cx="12" cy="12" r="11" mask="url(#moon)" class="svelte-niuf71"></circle><g id="sun-beams" class="svelte-niuf71"><line x1="12" y1="1" x2="12" y2="3" class="svelte-niuf71"></line><line x1="12" y1="21" x2="12" y2="23" class="svelte-niuf71"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" class="svelte-niuf71"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" class="svelte-niuf71"></line><line x1="1" y1="12" x2="3" y2="12" class="svelte-niuf71"></line><line x1="21" y1="12" x2="23" y2="12" class="svelte-niuf71"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" class="svelte-niuf71"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" class="svelte-niuf71"></line></g></svg>
	<span class="label svelte-niuf71">Auto</span>
</button></div></div>
</footer>

			
			<script>
				{
					__sveltekit_1hszat3 = {
						env: {},
						base: new URL(".", location).pathname.slice(0, -1),
						element: document.currentScript.parentElement
					};

					const data = [null,null,{"type":"data","data":(function(a,b,c,d,e,f,g){a[0]="Tutorial:Make a multiplayer card game";b[0]="Tutorial:Make a multiplayer card game";c[0]="Tutorial:Make a multiplayer card game";d[0]="Tutorial:Make a multiplayer card game";e[0]="Documentation";f[0]="Documentation";g[0]="Documentation";return {posts:[{title:"Make a multiplayer card game - Episode 7 | Create 3D graphical interface with Three.js",slug:"make-a-multiplayer-card-game-episode-7",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-04-02T21:55:15.361Z",excerpt:"Create 3D graphical interface with Three.js",tags:["Tutorial:Make a multiplayer card game"],html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-7--create-3d-graphical-interface-with-threejs\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-7--create-3d-graphical-interface-with-threejs\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 7 | Create 3D graphical interface with Three.js\u003C\u002Fh2\u003E\n\u003Cp\u003EThis section mainly introduces the use\nof\u003Ca href=\"https:\u002F\u002Fdocs.pmnd.rs\u002Freact-three-fiber\u002Fgetting-started\u002Fintroduction\" rel=\"nofollow\"\u003Ereact-three-fiber\u003C\u002Fa\u003E(referred\nto as R3F bellow) to realize the construction of interactive scenes.\u003C\u002Fp\u003E\n\u003Ch3 id=\"why-choose-r3f\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#why-choose-r3f\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EWhy Choose R3F\u003C\u002Fh3\u003E\n\u003Cul\u003E\u003Cli\u003ER3F just expresses Three.js in JSX, no extra overhead\u003C\u002Fli\u003E\n\u003Cli\u003EBuild scenes in a declarative way with react, including but not limited to\ncomponents that can easily react to state, are easy to interact with, and can\nleverage React’s ecosystem\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Ch3 id=\"scenario-construction-implementation\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#scenario-construction-implementation\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EScenario construction implementation\u003C\u002Fh3\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003ECard\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENote that the texture required for rendering is obtained by passing the image\naddress to \u003Ccode\u003EuseTexture\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token comment\"\u003E\u002F\u002FCard.tsx\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E useTexture \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"@react-three\u002Fdrei\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E Mesh \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"three\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003ECard\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n  props\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    faceTextureUrl\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    idx\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    beginX\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    serial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _selectedOffsetY \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E.2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _beginX \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EbeginX\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E _texture \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseTexture\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    map\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EfaceTextureUrl\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Emesh\n      position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E_beginX \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eidx \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E.5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eidx \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0.001\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      onClick\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ee\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eany\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n        e\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EstopPropagation\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _targetMesh \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E e\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"eventObject\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eas\u003C\u002Fspan\u003E Mesh\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _pos \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _targetMesh\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eposition\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _upY\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ey \u003Cspan class=\"token operator\"\u003E==\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E _upY \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _selectedOffsetY\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Eelse\u003C\u002Fspan\u003E _upY \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        _targetMesh\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eposition\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eset\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ex\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E _upY\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E _pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ez\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      userData\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"_d_cardSerial\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eserial \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EboxGeometry args\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E.001\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EmeshStandardMaterial \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E...\u003C\u002Fspan\u003E_texture\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Emesh\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Edefault\u003C\u002Fspan\u003E Card\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003EGame Scene\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003EFirst you must declare a Canvas node, because all three.js must be under the\nCanvas node\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECanvas\n  orthographic\n  camera\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E zoom\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E50\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E position\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E100\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E rotation\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ER3fScene\n    mainHandCards\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n    outCards\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n    gameModel\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_gameModel\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003ER3fScene\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003ECanvas\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to facilitate the use of hooks provided by\u003C\u002Fp\u003E\n\u003Ccode\u003E@react-three\u002Ffiber\u003C\u002Fcode\u003E (three.js related hooks can only be used under\nthe Canvas node), the game scene node is proposed separately\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003ER3fScene\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n  props\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E mainHandCards\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E gameModel\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E outCards\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    scene\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    camera\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseThree\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EuseEffect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Escene\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetObjectByName\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"handList\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E mainHandCards \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _gameModel \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EgameModel\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  _gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Econtext \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E scene\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"\u002Ffaces\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _readableName \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetCardReadableName\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_readableName \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"rJkr\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Poker_Joker_B.png\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_readableName \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"bJkr\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Poker_Joker_R.png\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _suitDic \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"D\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"C\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"H\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"S\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _suitNumber\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E serial \u003Cspan class=\"token operator\"\u003E\u003E\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Poker_\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E _suitDic\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E_suitNumber\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E _readableName \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token string\"\u003E\".png\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _cardCount \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E mainHandCards\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Elength\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _beginX \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_cardCount \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E.5\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1.5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECameraControls \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EambientLight intensity\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0.1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EdirectionalLight color\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"white\"\u003C\u002Fspan\u003E position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"handList\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E scale\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E.6\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"out-list-1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E scale\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E.6\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"out-list-2\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E scale\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E.6\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"out-list-0\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to reflect the 3D interface, add an orbiting camera (swipe the scene to\nadjust the camera corner)\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token function\"\u003Eextend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E OrbitControls \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003ECameraControls\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    camera\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    gl\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E domElement \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseThree\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  camera\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eposition\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eset\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E controls \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseRef\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EuseFrame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Estate\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Econtrols\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ecurrent \u003Cspan class=\"token keyword\"\u003Eas\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eunknown\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eas\u003C\u002Fspan\u003E OrbitControls\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eupdate\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F @ts-ignore\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EorbitControls\n      ref\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Econtrols\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      args\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Ecamera\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E domElement\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      enableZoom\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token boolean\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      maxAzimuthAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EMath\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPI\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      maxPolarAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EMath\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPI\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      minAzimuthAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003EMath\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPI\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      minPolarAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      rotationSpeed\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0.01\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EScene complete code：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token comment\"\u003E\u002F\u002FApp.tsx\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E useEffect\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E useRef\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E useState \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"react\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E Canvas\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E extend\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E useFrame\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E useThree \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"@react-three\u002Ffiber\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E OrbitControls \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"three\u002Fexamples\u002Fjsm\u002Fcontrols\u002FOrbitControls\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\".\u002FApp.css\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E Card \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\".\u002Fcomponent\u002FCard\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E GameModel \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\".\u002Fbase\u002Fsrc\u002Fgame\u002Fmodel\u002FGameModel\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E GameSceneMediator \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\".\u002Fbase\u002Fsrc\u002Fgame\u002Fview\u002FGameSceneMediator\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E GameSceneView \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\".\u002Fcomponent\u002FGameSceneView\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token function\"\u003Eextend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E OrbitControls \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003ECameraControls\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    camera\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    gl\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E domElement \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseThree\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  camera\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eposition\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eset\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E controls \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseRef\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EuseFrame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Estate\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Econtrols\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ecurrent \u003Cspan class=\"token keyword\"\u003Eas\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eunknown\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eas\u003C\u002Fspan\u003E OrbitControls\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eupdate\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F @ts-ignore\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EorbitControls\n      ref\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Econtrols\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      args\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Ecamera\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E domElement\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      enableZoom\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token boolean\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      maxAzimuthAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EMath\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPI\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      maxPolarAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EMath\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPI\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      minAzimuthAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003EMath\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPI\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      minPolarAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      rotationSpeed\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0.01\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003ER3fScene\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n  props\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E mainHandCards\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E gameModel\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E outCards\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    scene\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    camera\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseThree\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E mainHandCards \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _gameModel \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EgameModel\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  _gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Econtext \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E scene\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"\u002Ffaces\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _readableName \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetCardReadableName\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_readableName \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"rJkr\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Poker_Joker_B.png\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_readableName \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"bJkr\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Poker_Joker_R.png\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _suitDic \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"D\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"C\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"H\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"S\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _suitNumber\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E serial \u003Cspan class=\"token operator\"\u003E\u003E\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Poker_\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E _suitDic\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E_suitNumber\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E _readableName \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token string\"\u003E\".png\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _cardCount \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E mainHandCards\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Elength\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _beginX \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_cardCount \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E.5\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1.5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECameraControls \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EambientLight intensity\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0.1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EdirectionalLight color\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"white\"\u003C\u002Fspan\u003E position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"handList\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E scale\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E.6\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"out-list-1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E scale\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E.6\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"out-list-2\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E scale\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E.6\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"out-list-0\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EApp\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eany\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _gameFacade \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EgameFacade\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _gameModel\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E GameModel \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _gameFacade\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EretrieveProxy\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"GameModel\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E setMainHandCards\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseState\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EcardsArr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E setOutCards\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseState\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  _gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EsetMainHandCardsHook\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EsetMainHandCards\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  _gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EsetOutCardsHook\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EsetOutCards\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token function\"\u003EuseEffect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_gameFacade\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EretrieveMediator\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"GameSceneMediator\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E==\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n      _gameFacade\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EregisterMediator\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EGameSceneMediator\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EGameSceneView\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ediv id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"canvas-container\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECanvas\n          orthographic\n          camera\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E zoom\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E50\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E position\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E100\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E rotation\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ER3fScene\n            mainHandCards\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            outCards\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            gameModel\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_gameModel\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003ER3fScene\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003ECanvas\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ediv\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ediv\n        id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"status\"\u003C\u002Fspan\u003E\n        style\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          display\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"fix\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n          textAlign\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"center\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n          fontSize\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"2em\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n          userSelect\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"none\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        hello\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ediv\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ediv id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-scores\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ebutton id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-scores-1\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlButton\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ebutton\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ebutton id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-scores-2\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlButton\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ebutton\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ebutton id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-scores-3\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlButton\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ebutton\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ediv\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ediv id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-operation\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ebutton id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-operation-pass\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlButton\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          pass\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ebutton\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ebutton id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-operation-play\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlButton\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          play\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ebutton\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ediv\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Edefault\u003C\u002Fspan\u003E App\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"framework-adaptation-changes\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#framework-adaptation-changes\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EFramework adaptation changes\u003C\u002Fh3\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003EGetting scene node\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003EisDOM\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Eboolean\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003EcanvasScene\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Eany\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EisDOM\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E document\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetElementById\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EcanvasScene\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E canvasScene\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetObjectByName\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EBy passing in the scene object of three.js, call the getObjectByName interface\nto obtain the node with the pre-set name attribute\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003ECard value acquisition, card.userData (\u003Ccode\u003EuserData\u003C\u002Fcode\u003E is the loading\nobject of custom attributes in R3F, similar to \u003Ccode\u003Edata-yourAttribute\u003C\u002Fcode\u003E\nin react, here you can encapsulate a method to decouple GameSceneMediator from\ncard value, making the mediator more reusable )\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eprivate\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EonOutCards_C2S\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EhideControlPanel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _outCardsSerial \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _cardsContainer \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EmViewClass\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"handList\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\u003Cspan class=\"token boolean\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetGameModel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Econtext\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _cards \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _cardsContainer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Echildren\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E i \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E i \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E _cards\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Elength\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E i\u003Cspan class=\"token operator\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _card \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _cards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EmViewClass\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_card\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n                _outCardsSerial\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Epush\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_card\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EuserData\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"_d_cardSerial\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E||\u003C\u002Fspan\u003E_card\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"_d_cardSerial\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E||\u003C\u002Fspan\u003E _card\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetAttribute\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data-card-serial\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetNetFacade\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E?.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EsendNotification\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard_game_pb\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ECmd\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPLAYCARDS_C2S\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E _outCardsSerial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003ENode coordinate adjustment\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003EBy judging the adjustment of the corresponding css attribute of the node style\nto the corresponding attribute of the node position object\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E card\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eposition\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ey \u003Cspan class=\"token operator\"\u003E==\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E.2\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E?\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode7-r3f\" rel=\"nofollow\"\u003ECheckout the repo https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode7-r3f\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Cp\u003E本节主要介绍利用\u003Ca href=\"https:\u002F\u002Fdocs.pmnd.rs\u002Freact-three-fiber\u002Fgetting-started\u002Fintroduction\" rel=\"nofollow\"\u003Ereact-three-fiber\u003C\u002Fa\u003E(以下简称R3F)实现交互场景的搭建。\u003C\u002Fp\u003E\n\u003Ch3 id=\"为什么选择r3f\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#为什么选择r3f\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003E为什么选择R3F\u003C\u002Fh3\u003E\n\u003Cul\u003E\u003Cli\u003ER3F仅仅是将Three.js用JSX进行表示，没有额外开销\u003C\u002Fli\u003E\n\u003Cli\u003E可以用react的声明方式构建场景，包括但不限于组件可轻松对状态做出反应，易于交互，并且可以利用\nReact 的生态\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Ch3 id=\"场景构建实现\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#场景构建实现\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003E场景构建实现\u003C\u002Fh3\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003E扑克牌\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E注意此处通过将图片地址传给\u003Ccode\u003EuseTexture\u003C\u002Fcode\u003E，得到渲染需要的纹理\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token comment\"\u003E\u002F\u002FCard.tsx\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E useTexture \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"@react-three\u002Fdrei\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E Mesh \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"three\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003ECard\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n  props\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    faceTextureUrl\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    idx\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    beginX\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    serial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _selectedOffsetY \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E.2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _beginX \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EbeginX\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E _texture \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseTexture\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    map\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EfaceTextureUrl\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Emesh\n      position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E_beginX \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eidx \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E.5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eidx \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0.001\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      onClick\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ee\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eany\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n        e\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EstopPropagation\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _targetMesh \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E e\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"eventObject\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eas\u003C\u002Fspan\u003E Mesh\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _pos \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _targetMesh\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eposition\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _upY\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ey \u003Cspan class=\"token operator\"\u003E==\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E _upY \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _selectedOffsetY\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Eelse\u003C\u002Fspan\u003E _upY \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        _targetMesh\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eposition\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eset\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ex\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E _upY\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E _pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ez\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      userData\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"_d_cardSerial\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eserial \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EboxGeometry args\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E.001\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EmeshStandardMaterial \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E...\u003C\u002Fspan\u003E_texture\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Emesh\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Edefault\u003C\u002Fspan\u003E Card\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003E游戏场景\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E首先必须声明一个Canvas节点，因为three.js的所有都必须在Canvas节点下\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECanvas\n  orthographic\n  camera\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E zoom\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E50\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E position\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E100\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E rotation\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ER3fScene\n    mainHandCards\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n    outCards\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n    gameModel\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_gameModel\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003ER3fScene\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003ECanvas\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E为了方便使用\u003Ccode\u003E@react-three\u002Ffiber\u003C\u002Fcode\u003E提供的hook（three.js相关的hook只能在Canvas节点下使用）,将游戏场景节点单独提出来\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003ER3fScene\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n  props\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E mainHandCards\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E gameModel\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E outCards\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    scene\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    camera\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseThree\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EuseEffect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Escene\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetObjectByName\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"handList\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E mainHandCards \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _gameModel \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EgameModel\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  _gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Econtext \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E scene\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"\u002Ffaces\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _readableName \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetCardReadableName\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_readableName \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"rJkr\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Poker_Joker_B.png\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_readableName \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"bJkr\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Poker_Joker_R.png\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _suitDic \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"D\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"C\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"H\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"S\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _suitNumber\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E serial \u003Cspan class=\"token operator\"\u003E\u003E\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Poker_\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E _suitDic\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E_suitNumber\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E _readableName \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token string\"\u003E\".png\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _cardCount \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E mainHandCards\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Elength\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _beginX \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_cardCount \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E.5\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1.5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECameraControls \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EambientLight intensity\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0.1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EdirectionalLight color\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"white\"\u003C\u002Fspan\u003E position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"handList\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E scale\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E.6\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"out-list-1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E scale\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E.6\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"out-list-2\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E scale\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E.6\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"out-list-0\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E为了体现3D界面，添加一个轨道相机（滑动场景即可调整相机转角）\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token function\"\u003Eextend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E OrbitControls \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003ECameraControls\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    camera\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    gl\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E domElement \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseThree\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  camera\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eposition\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eset\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E controls \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseRef\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EuseFrame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Estate\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Econtrols\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ecurrent \u003Cspan class=\"token keyword\"\u003Eas\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eunknown\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eas\u003C\u002Fspan\u003E OrbitControls\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eupdate\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F @ts-ignore\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EorbitControls\n      ref\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Econtrols\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      args\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Ecamera\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E domElement\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      enableZoom\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token boolean\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      maxAzimuthAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EMath\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPI\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      maxPolarAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EMath\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPI\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      minAzimuthAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003EMath\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPI\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      minPolarAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      rotationSpeed\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0.01\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E场景完整代码：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token comment\"\u003E\u002F\u002FApp.tsx\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E useEffect\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E useRef\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E useState \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"react\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E Canvas\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E extend\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E useFrame\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E useThree \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"@react-three\u002Ffiber\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E OrbitControls \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"three\u002Fexamples\u002Fjsm\u002Fcontrols\u002FOrbitControls\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\".\u002FApp.css\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E Card \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\".\u002Fcomponent\u002FCard\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E GameModel \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\".\u002Fbase\u002Fsrc\u002Fgame\u002Fmodel\u002FGameModel\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E GameSceneMediator \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\".\u002Fbase\u002Fsrc\u002Fgame\u002Fview\u002FGameSceneMediator\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E GameSceneView \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\".\u002Fcomponent\u002FGameSceneView\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token function\"\u003Eextend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E OrbitControls \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003ECameraControls\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    camera\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    gl\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E domElement \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseThree\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  camera\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eposition\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eset\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E10\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E controls \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseRef\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EuseFrame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Estate\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Econtrols\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ecurrent \u003Cspan class=\"token keyword\"\u003Eas\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eunknown\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eas\u003C\u002Fspan\u003E OrbitControls\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eupdate\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F @ts-ignore\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EorbitControls\n      ref\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Econtrols\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      args\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Ecamera\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E domElement\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      enableZoom\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token boolean\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      maxAzimuthAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EMath\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPI\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      maxPolarAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EMath\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPI\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      minAzimuthAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003EMath\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPI\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      minPolarAngle\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      rotationSpeed\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0.01\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003ER3fScene\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n  props\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E mainHandCards\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E gameModel\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E outCards\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    scene\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    camera\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseThree\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E mainHandCards \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _gameModel \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EgameModel\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  _gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Econtext \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E scene\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"\u002Ffaces\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _readableName \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetCardReadableName\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_readableName \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"rJkr\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Poker_Joker_B.png\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_readableName \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"bJkr\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Poker_Joker_R.png\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _suitDic \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"D\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"C\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"H\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"S\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _suitNumber\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E serial \u003Cspan class=\"token operator\"\u003E\u003E\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E _prefix \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Poker_\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E _suitDic\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E_suitNumber\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E _readableName \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token string\"\u003E\".png\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _cardCount \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E mainHandCards\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Elength\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _beginX \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_cardCount \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E.5\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1.5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECameraControls \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EambientLight intensity\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0.1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003EdirectionalLight color\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"white\"\u003C\u002Fspan\u003E position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"handList\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E scale\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E.6\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"out-list-1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E scale\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E.6\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"out-list-2\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Egroup position\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E scale\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E.6\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E name\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"out-list-0\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Enumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E idx\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECard\n              key\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"k\"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E serial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              faceTextureUrl\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetFaceTextureUrl\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              idx\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eidx\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              beginX\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_beginX\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n              serial\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Eserial\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Egroup\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EApp\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eprops\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eany\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _gameFacade \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E props\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EgameFacade\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _gameModel\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E GameModel \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _gameFacade\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EretrieveProxy\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"GameModel\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E setMainHandCards\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseState\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EcardsArr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E setOutCards\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EuseState\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  _gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EsetMainHandCardsHook\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EsetMainHandCards\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  _gameModel\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EsetOutCardsHook\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EsetOutCards\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token function\"\u003EuseEffect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_gameFacade\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EretrieveMediator\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"GameSceneMediator\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E==\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n      _gameFacade\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EregisterMediator\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EGameSceneMediator\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EGameSceneView\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ediv id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"canvas-container\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ECanvas\n          orthographic\n          camera\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E zoom\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E50\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E position\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E100\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E rotation\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003ER3fScene\n            mainHandCards\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EmainHandCards\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            outCards\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EoutCards\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n            gameModel\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E_gameModel\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003ER3fScene\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003ECanvas\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ediv\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ediv\n        id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"status\"\u003C\u002Fspan\u003E\n        style\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n          display\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"fix\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n          textAlign\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"center\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n          fontSize\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"2em\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n          userSelect\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"none\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        hello\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ediv\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ediv id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-scores\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ebutton id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-scores-1\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlButton\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ebutton\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ebutton id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-scores-2\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlButton\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ebutton\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ebutton id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-scores-3\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlButton\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ebutton\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ediv\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ediv id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-operation\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ebutton id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-operation-pass\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlButton\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          pass\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ebutton\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Ebutton id\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlPanel-operation-play\"\u003C\u002Fspan\u003E className\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"controlButton\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n          play\n        \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ebutton\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003Ediv\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Edefault\u003C\u002Fspan\u003E App\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"框架适配改动\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#框架适配改动\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003E框架适配改动\u003C\u002Fh3\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003E获取场景节点\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003EisDOM\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Eboolean\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003EcanvasScene\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Eany\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EisDOM\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E document\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetElementById\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EcanvasScene\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E canvasScene\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetObjectByName\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E通过传入three.js的场景对象，调用getObjectByName接口获取预先设置好name属性的节点\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003E牌值获取card.userData（userData是R3F中自定义属性的装载对象，类似react中的data-yourAttribute,\n在这里可以封装一个方法，让GameSceneMediator与牌取值解耦，使mediator的复用性更强）\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eprivate\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EonOutCards_C2S\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EhideControlPanel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _outCardsSerial \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _cardsContainer \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EmViewClass\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"handList\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\u003Cspan class=\"token boolean\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetGameModel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Econtext\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _cards \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _cardsContainer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Echildren\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E i \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E i \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E _cards\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Elength\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E i\u003Cspan class=\"token operator\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _card \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _cards\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Ei\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EmViewClass\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_card\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n                _outCardsSerial\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Epush\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_card\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EuserData\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"_d_cardSerial\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E||\u003C\u002Fspan\u003E_card\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"_d_cardSerial\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E||\u003C\u002Fspan\u003E _card\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetAttribute\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data-card-serial\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EgetNetFacade\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E?.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EsendNotification\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard_game_pb\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ECmd\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EPLAYCARDS_C2S\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E _outCardsSerial\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003E节点坐标调整\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E由判断节点style 相应css属性的调整为节点position对象相应属性\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E card\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eposition\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ey \u003Cspan class=\"token operator\"\u003E==\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E.2\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E?\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode7-r3f\" rel=\"nofollow\"\u003E查看本节相关代码 https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode7-r3f\u003C\u002Fa\u003E\u003C\u002Fp\u003E",readingTime:"13 min read",relatedPosts:[{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:a,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EProtocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https:\u002F\u002Fanuragthakur.hashnode.dev\u002Fprotobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\"\u003EWhy Google moved from JSON to Protocol Buffers?\u003C\u002Fa\u003E\nintroduce.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EI used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EYou can clone\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode3\" rel=\"nofollow\"\u003Edemo for episode3\u003C\u002Fa\u003E\nwhich including all the bellow content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EAccording to the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eofficial tutorial\u003C\u002Fa\u003E, two steps\nshould be done:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EInstall the runtime library \u003Ccode\u003Egoogle-protobuf\u003C\u002Fcode\u003E:\u003Ccode\u003Enpm install\ngoogle-protobuf\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EGet the Protocol Compiler \u003Ccode\u003Eprotoc\u003C\u002Fcode\u003E: download from\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EThen run a command like \u003Ccode\u003Eprotoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C\u002Fcode\u003E, you can get the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from\u003C\u002Fp\u003E\n\u003Ccode\u003E.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EWhen the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file generated, the protocol buffers environment is\nready.\u003C\u002Fp\u003E\n\u003Cp\u003EBack to our game, we should create a \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file, named\u003C\u002Fp\u003E\n\u003Ccode\u003Ecard-game.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EThe first line in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Esyntax = &quot;proto3&quot;;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhich means which version of Protobuf we are using.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine the enum of Cmd:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eenum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eenum Cmd is for routing, will be introduced later.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine MainMessage message:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine data message like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen, generate our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the episode3 demo show, run command bellow in directory proto.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EWindows\u003C\u002Fp\u003E\n\u003Ccode\u003E.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMacOS\u003C\u002Fp\u003E\n\u003Ccode\u003E.\u002Fprotoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENow, we have our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from the \u003Ccode\u003E.proto\u003C\u002Fcode\u003E in which\nwe define message.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s encoding and decoding message with protocol buffers.\u003C\u002Fp\u003E\n\u003Cp\u003EEncoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDecoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EAttributes defined as \u003Cstrong\u003Eseat_number\u003C\u002Fstrong\u003E in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be\ncall like getSeatNumber and setSeatNumebr.\u003C\u002Fli\u003E\n\u003Cli\u003EAttributes defined as \u003Cstrong\u003Erepeated\u003C\u002Fstrong\u003E type in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E",readingTime:"3 min read"},{title:"Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React",slug:"create-2d-graphical-interface-with-react-e6",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-29T21:55:15.361Z",excerpt:"This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.",tags:b,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 6 | Create 2D graphical interface with React\u003C\u002Fh2\u003E\n\u003Cp\u003EThis section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api. The following is an abstracted interface:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eexport interface IGameSceneView &#123;\n    getViewComponent(name: string),\n    getNewViewComponent(comp),\n    getChild(childPath, parent),\n    addClickListener(comp, handler, target),\n    setCard(card, name),\n    setLabel(labelComp, text),\n    removeAllChildren(parent),\n    addChild(child, parent),\n    isCardSelected(card),\n    toggleCardSelectedStatus(card),\n    showComponent(comp),\n    hideComponent(comp)\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECompared with cocos creator, the implementation of react is more operable at the code level. The styles of interface elements are all implemented by handwritten code. The hot-reload that comes with create-react-app also responds to changes very quickly. There is a time to switch editors and wait for the editor to refresh, which is very lightweight.\u003C\u002Fp\u003E\n\u003Cp\u003ECode reference \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThe next article mainly introduces the comparison between cocos creator and react implementation in development.\u003C\u002Fp\u003E\n\u003Cp\u003E本节主要是用react实现UI视图。\n在本节之前，已经用cocos creator实现了一个UI视图版本，为了重用基础框架，我们将游戏逻辑进行抽象，并将与视图引擎api相关的逻辑解耦出来。\n下面是抽象出来的一个接口：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EIGameSceneView\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetNewViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EchildPath\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddClickListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E handler\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E target\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetCard\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetLabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003ElabelComp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E text\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EremoveAllChildren\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eparent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Echild\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EtoggleCardSelectedStatus\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EshowComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhideComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E相对于cocos creator，react的实现在代码层面可操作性较强，体现在界面元素的样式都通过手写代码来实现，create-react-app自带的hot-reload也非常快地反馈变更，不会有切换编辑器和等待编辑器刷新的时间，非常轻量的感觉。\u003C\u002Fp\u003E\n\u003Cp\u003E代码参考 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E下一篇主要介绍cocos creator 与 react 实现在开发上的对比。\u003C\u002Fp\u003E",readingTime:"2 min read"},{title:"Make a multiplayer card game - Episode 1",slug:"create-a-simple-server-and-client-from-scratch-e1",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-01T21:55:15.361Z",excerpt:"Create a simple server and client from scratch",tags:c,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C\u002Fh2\u003E\n\u003Cp\u003EIn the coming weeks, I’ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame “Doudizhu”, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C\u002Fp\u003E\n\u003Cp\u003EParts including:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Ecreate a simple server and client\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with bots\u003C\u002Fli\u003E\n\u003Cli\u003Ecommunicate with server by protobuf\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with other players\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with Cocos Creator\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with React\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 3D graphical interface with Three.js\u003C\u002Fli\u003E\n\u003Cli\u003Eadd physical lib ammo.js to add a tiny game\u003C\u002Fli\u003E\n\u003Cli\u003Econnect to Web3 world\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Cem\u003Eopen your terminal, input \u003Ccode\u003Enode -v\u003C\u002Fcode\u003E, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\"\u003Ehttps:\u002F\u002Fnodejs.org\u003C\u002Fa\u003E.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Edirectory structure :\n\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644775769474\u002F2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ecreate a server, server\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E server \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E net\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcreateServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Welcome, friend.\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nserver\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elisten\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"server listening on 127.0.0.1:8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Ecreate client, client\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E socket \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003Enet\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ESocket\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Econnect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  host\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"127.0.0.1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  port\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E onConnected\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"error\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EonConnected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emsg\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E data \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello, world!\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Erun :\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd server\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd client\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eresult:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644776034549\u002Ft-Jir1j9R.png\" alt=\"demo0-cmd-result.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis episode is end here, the complete demo can be found on\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAny problems, discussion is welcome.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EIn the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for your reading.\u003C\u002Fp\u003E",readingTime:"2 min read"}]},{title:"Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React",slug:"create-2d-graphical-interface-with-react-e6",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-29T21:55:15.361Z",excerpt:"This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.",tags:b,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 6 | Create 2D graphical interface with React\u003C\u002Fh2\u003E\n\u003Cp\u003EThis section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api. The following is an abstracted interface:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eexport interface IGameSceneView &#123;\n    getViewComponent(name: string),\n    getNewViewComponent(comp),\n    getChild(childPath, parent),\n    addClickListener(comp, handler, target),\n    setCard(card, name),\n    setLabel(labelComp, text),\n    removeAllChildren(parent),\n    addChild(child, parent),\n    isCardSelected(card),\n    toggleCardSelectedStatus(card),\n    showComponent(comp),\n    hideComponent(comp)\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECompared with cocos creator, the implementation of react is more operable at the code level. The styles of interface elements are all implemented by handwritten code. The hot-reload that comes with create-react-app also responds to changes very quickly. There is a time to switch editors and wait for the editor to refresh, which is very lightweight.\u003C\u002Fp\u003E\n\u003Cp\u003ECode reference \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThe next article mainly introduces the comparison between cocos creator and react implementation in development.\u003C\u002Fp\u003E\n\u003Cp\u003E本节主要是用react实现UI视图。\n在本节之前，已经用cocos creator实现了一个UI视图版本，为了重用基础框架，我们将游戏逻辑进行抽象，并将与视图引擎api相关的逻辑解耦出来。\n下面是抽象出来的一个接口：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EIGameSceneView\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetNewViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EchildPath\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddClickListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E handler\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E target\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetCard\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetLabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003ElabelComp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E text\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EremoveAllChildren\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eparent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Echild\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EtoggleCardSelectedStatus\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EshowComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhideComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E相对于cocos creator，react的实现在代码层面可操作性较强，体现在界面元素的样式都通过手写代码来实现，create-react-app自带的hot-reload也非常快地反馈变更，不会有切换编辑器和等待编辑器刷新的时间，非常轻量的感觉。\u003C\u002Fp\u003E\n\u003Cp\u003E代码参考 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E下一篇主要介绍cocos creator 与 react 实现在开发上的对比。\u003C\u002Fp\u003E",readingTime:"2 min read",relatedPosts:[{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:a,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EProtocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https:\u002F\u002Fanuragthakur.hashnode.dev\u002Fprotobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\"\u003EWhy Google moved from JSON to Protocol Buffers?\u003C\u002Fa\u003E\nintroduce.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EI used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EYou can clone\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode3\" rel=\"nofollow\"\u003Edemo for episode3\u003C\u002Fa\u003E\nwhich including all the bellow content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EAccording to the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eofficial tutorial\u003C\u002Fa\u003E, two steps\nshould be done:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EInstall the runtime library \u003Ccode\u003Egoogle-protobuf\u003C\u002Fcode\u003E:\u003Ccode\u003Enpm install\ngoogle-protobuf\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EGet the Protocol Compiler \u003Ccode\u003Eprotoc\u003C\u002Fcode\u003E: download from\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EThen run a command like \u003Ccode\u003Eprotoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C\u002Fcode\u003E, you can get the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from\u003C\u002Fp\u003E\n\u003Ccode\u003E.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EWhen the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file generated, the protocol buffers environment is\nready.\u003C\u002Fp\u003E\n\u003Cp\u003EBack to our game, we should create a \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file, named\u003C\u002Fp\u003E\n\u003Ccode\u003Ecard-game.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EThe first line in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Esyntax = &quot;proto3&quot;;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhich means which version of Protobuf we are using.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine the enum of Cmd:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eenum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eenum Cmd is for routing, will be introduced later.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine MainMessage message:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine data message like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen, generate our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the episode3 demo show, run command bellow in directory proto.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EWindows\u003C\u002Fp\u003E\n\u003Ccode\u003E.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMacOS\u003C\u002Fp\u003E\n\u003Ccode\u003E.\u002Fprotoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENow, we have our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from the \u003Ccode\u003E.proto\u003C\u002Fcode\u003E in which\nwe define message.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s encoding and decoding message with protocol buffers.\u003C\u002Fp\u003E\n\u003Cp\u003EEncoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDecoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EAttributes defined as \u003Cstrong\u003Eseat_number\u003C\u002Fstrong\u003E in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be\ncall like getSeatNumber and setSeatNumebr.\u003C\u002Fli\u003E\n\u003Cli\u003EAttributes defined as \u003Cstrong\u003Erepeated\u003C\u002Fstrong\u003E type in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E",readingTime:"3 min read"},{title:"Make a multiplayer card game - Episode 1",slug:"create-a-simple-server-and-client-from-scratch-e1",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-01T21:55:15.361Z",excerpt:"Create a simple server and client from scratch",tags:c,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C\u002Fh2\u003E\n\u003Cp\u003EIn the coming weeks, I’ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame “Doudizhu”, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C\u002Fp\u003E\n\u003Cp\u003EParts including:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Ecreate a simple server and client\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with bots\u003C\u002Fli\u003E\n\u003Cli\u003Ecommunicate with server by protobuf\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with other players\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with Cocos Creator\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with React\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 3D graphical interface with Three.js\u003C\u002Fli\u003E\n\u003Cli\u003Eadd physical lib ammo.js to add a tiny game\u003C\u002Fli\u003E\n\u003Cli\u003Econnect to Web3 world\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Cem\u003Eopen your terminal, input \u003Ccode\u003Enode -v\u003C\u002Fcode\u003E, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\"\u003Ehttps:\u002F\u002Fnodejs.org\u003C\u002Fa\u003E.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Edirectory structure :\n\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644775769474\u002F2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ecreate a server, server\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E server \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E net\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcreateServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Welcome, friend.\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nserver\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elisten\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"server listening on 127.0.0.1:8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Ecreate client, client\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E socket \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003Enet\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ESocket\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Econnect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  host\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"127.0.0.1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  port\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E onConnected\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"error\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EonConnected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emsg\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E data \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello, world!\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Erun :\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd server\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd client\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eresult:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644776034549\u002Ft-Jir1j9R.png\" alt=\"demo0-cmd-result.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis episode is end here, the complete demo can be found on\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAny problems, discussion is welcome.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EIn the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for your reading.\u003C\u002Fp\u003E",readingTime:"2 min read"},{title:"Make a multiplayer card game - Episode 5 | Create 2D graphical interface with Cocos Creator",slug:"make-a-multiplayer-card-game-episode-5",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-22T21:55:15.361Z",excerpt:"Create 2D graphical interface with Cocos Creator",tags:d,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-5--create-2d-graphical-interface-with-cocos-creator\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-5--create-2d-graphical-interface-with-cocos-creator\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 5 | Create 2D graphical interface with Cocos Creator\u003C\u002Fh2\u003E\n\u003Cp\u003EThis chapter is almost a month away from the previous chapter. During this\nperiod, it is mainly about the transformation and reconstruction of the client.\nThe content of the overall client is almost completely different from the\ncommand-line version of the previous chapter.\u003C\u002Fp\u003E\n\u003Cp\u003EAccording to the previous plan, I converted all the code written in JS to TS and\ntransplanted the command-line interactive interface to the conventional game\ninteractive interface (using cocos creator game engine).\u003C\u002Fp\u003E\n\u003Cp\u003EPreviously, in order to quickly realize the function, the server and client used\nonly one file to encode. Up to now, the client code of the project has been\nmodularized, and the classic PureMVC library has been introduced to completely\ndecouple the UI interaction and data, network messages and game operation logic,\nso as to create conditions for extracting the code of the framework independent\nof the game engine (it is planned to use one framework to access different view\nlayer engines).\u003C\u002Fp\u003E\n\u003Cp\u003EPureMVC has been introduced in previous articles. The core idea is to decouple\nview and data. The data is processed by proxy and the facade is controlled by\nproxy.\u003C\u002Fp\u003E\n\u003Cp\u003ECompared with the previous version, some changes are involved: -The difference\nbetween socket and web socket API. It mainly includes the names of several\nmonitored events and the interfaces for sending messages. -UI display layer\nindependent. Command line output and game engine rendering view interactive\noperation interface.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode5-UICocosCreator\" rel=\"nofollow\"\u003Edemo url\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E本章离前一章快一个月了，在这段时间，主要是对客户端的改造和重构，整体客户端的内容几乎完全不同于上一章命令行版本。\u003C\u002Fp\u003E\n\u003Cp\u003E按照之前的计划，我将之前用js写的代码全部转为了ts，将命令行交互界面移植到常规的游戏交互界面（利用CocosCreator游戏引擎）。\u003C\u002Fp\u003E\n\u003Cp\u003E之前为了快速实现功能，服务器和客户端分别只用一个文件进行编码。\n截至目前，项目客户端代码进行了模块化改造，引入了经典的PureMVC库，将UI交互和数据，网络消息和游戏操作逻辑完全解藕，为后面提取与游戏引擎无关的框架（计划用一个框架接入不同视图层引擎）代码创造条件。\u003C\u002Fp\u003E\n\u003Cp\u003E在之前的文章里面已经介绍过PureMVC，核心的思想就是视图与数据解藕。\n通过一个门面类（Facade）来统管框架，用视图代理（Mediator）控制显示组件逻辑，用数据模型代理（Proxy）存储和处理数据。\u003C\u002Fp\u003E\n\u003Cp\u003E相对于上一版，涉及到的一些改动：\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Esocket 和 web socket api 的区别。主要是几个监听的事件名字，和发送消息的接口。\u003C\u002Fli\u003E\n\u003Cli\u003Eui显示层独立。命令行输出和游戏引擎渲染视图交互操作界面。\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode5-UICocosCreator\" rel=\"nofollow\"\u003Edemo url\u003C\u002Fa\u003E\u003C\u002Fp\u003E",readingTime:"4 min read"}]},{title:"Make a multiplayer card game - Episode 5 | Create 2D graphical interface with Cocos Creator",slug:"make-a-multiplayer-card-game-episode-5",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-22T21:55:15.361Z",excerpt:"Create 2D graphical interface with Cocos Creator",tags:d,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-5--create-2d-graphical-interface-with-cocos-creator\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-5--create-2d-graphical-interface-with-cocos-creator\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 5 | Create 2D graphical interface with Cocos Creator\u003C\u002Fh2\u003E\n\u003Cp\u003EThis chapter is almost a month away from the previous chapter. During this\nperiod, it is mainly about the transformation and reconstruction of the client.\nThe content of the overall client is almost completely different from the\ncommand-line version of the previous chapter.\u003C\u002Fp\u003E\n\u003Cp\u003EAccording to the previous plan, I converted all the code written in JS to TS and\ntransplanted the command-line interactive interface to the conventional game\ninteractive interface (using cocos creator game engine).\u003C\u002Fp\u003E\n\u003Cp\u003EPreviously, in order to quickly realize the function, the server and client used\nonly one file to encode. Up to now, the client code of the project has been\nmodularized, and the classic PureMVC library has been introduced to completely\ndecouple the UI interaction and data, network messages and game operation logic,\nso as to create conditions for extracting the code of the framework independent\nof the game engine (it is planned to use one framework to access different view\nlayer engines).\u003C\u002Fp\u003E\n\u003Cp\u003EPureMVC has been introduced in previous articles. The core idea is to decouple\nview and data. The data is processed by proxy and the facade is controlled by\nproxy.\u003C\u002Fp\u003E\n\u003Cp\u003ECompared with the previous version, some changes are involved: -The difference\nbetween socket and web socket API. It mainly includes the names of several\nmonitored events and the interfaces for sending messages. -UI display layer\nindependent. Command line output and game engine rendering view interactive\noperation interface.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode5-UICocosCreator\" rel=\"nofollow\"\u003Edemo url\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E本章离前一章快一个月了，在这段时间，主要是对客户端的改造和重构，整体客户端的内容几乎完全不同于上一章命令行版本。\u003C\u002Fp\u003E\n\u003Cp\u003E按照之前的计划，我将之前用js写的代码全部转为了ts，将命令行交互界面移植到常规的游戏交互界面（利用CocosCreator游戏引擎）。\u003C\u002Fp\u003E\n\u003Cp\u003E之前为了快速实现功能，服务器和客户端分别只用一个文件进行编码。\n截至目前，项目客户端代码进行了模块化改造，引入了经典的PureMVC库，将UI交互和数据，网络消息和游戏操作逻辑完全解藕，为后面提取与游戏引擎无关的框架（计划用一个框架接入不同视图层引擎）代码创造条件。\u003C\u002Fp\u003E\n\u003Cp\u003E在之前的文章里面已经介绍过PureMVC，核心的思想就是视图与数据解藕。\n通过一个门面类（Facade）来统管框架，用视图代理（Mediator）控制显示组件逻辑，用数据模型代理（Proxy）存储和处理数据。\u003C\u002Fp\u003E\n\u003Cp\u003E相对于上一版，涉及到的一些改动：\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Esocket 和 web socket api 的区别。主要是几个监听的事件名字，和发送消息的接口。\u003C\u002Fli\u003E\n\u003Cli\u003Eui显示层独立。命令行输出和游戏引擎渲染视图交互操作界面。\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode5-UICocosCreator\" rel=\"nofollow\"\u003Edemo url\u003C\u002Fa\u003E\u003C\u002Fp\u003E",readingTime:"4 min read",relatedPosts:[{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:a,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EProtocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https:\u002F\u002Fanuragthakur.hashnode.dev\u002Fprotobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\"\u003EWhy Google moved from JSON to Protocol Buffers?\u003C\u002Fa\u003E\nintroduce.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EI used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EYou can clone\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode3\" rel=\"nofollow\"\u003Edemo for episode3\u003C\u002Fa\u003E\nwhich including all the bellow content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EAccording to the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eofficial tutorial\u003C\u002Fa\u003E, two steps\nshould be done:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EInstall the runtime library \u003Ccode\u003Egoogle-protobuf\u003C\u002Fcode\u003E:\u003Ccode\u003Enpm install\ngoogle-protobuf\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EGet the Protocol Compiler \u003Ccode\u003Eprotoc\u003C\u002Fcode\u003E: download from\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EThen run a command like \u003Ccode\u003Eprotoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C\u002Fcode\u003E, you can get the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from\u003C\u002Fp\u003E\n\u003Ccode\u003E.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EWhen the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file generated, the protocol buffers environment is\nready.\u003C\u002Fp\u003E\n\u003Cp\u003EBack to our game, we should create a \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file, named\u003C\u002Fp\u003E\n\u003Ccode\u003Ecard-game.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EThe first line in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Esyntax = &quot;proto3&quot;;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhich means which version of Protobuf we are using.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine the enum of Cmd:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eenum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eenum Cmd is for routing, will be introduced later.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine MainMessage message:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine data message like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen, generate our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the episode3 demo show, run command bellow in directory proto.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EWindows\u003C\u002Fp\u003E\n\u003Ccode\u003E.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMacOS\u003C\u002Fp\u003E\n\u003Ccode\u003E.\u002Fprotoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENow, we have our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from the \u003Ccode\u003E.proto\u003C\u002Fcode\u003E in which\nwe define message.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s encoding and decoding message with protocol buffers.\u003C\u002Fp\u003E\n\u003Cp\u003EEncoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDecoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EAttributes defined as \u003Cstrong\u003Eseat_number\u003C\u002Fstrong\u003E in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be\ncall like getSeatNumber and setSeatNumebr.\u003C\u002Fli\u003E\n\u003Cli\u003EAttributes defined as \u003Cstrong\u003Erepeated\u003C\u002Fstrong\u003E type in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E",readingTime:"3 min read"},{title:"Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React",slug:"create-2d-graphical-interface-with-react-e6",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-29T21:55:15.361Z",excerpt:"This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.",tags:b,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 6 | Create 2D graphical interface with React\u003C\u002Fh2\u003E\n\u003Cp\u003EThis section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api. The following is an abstracted interface:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eexport interface IGameSceneView &#123;\n    getViewComponent(name: string),\n    getNewViewComponent(comp),\n    getChild(childPath, parent),\n    addClickListener(comp, handler, target),\n    setCard(card, name),\n    setLabel(labelComp, text),\n    removeAllChildren(parent),\n    addChild(child, parent),\n    isCardSelected(card),\n    toggleCardSelectedStatus(card),\n    showComponent(comp),\n    hideComponent(comp)\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECompared with cocos creator, the implementation of react is more operable at the code level. The styles of interface elements are all implemented by handwritten code. The hot-reload that comes with create-react-app also responds to changes very quickly. There is a time to switch editors and wait for the editor to refresh, which is very lightweight.\u003C\u002Fp\u003E\n\u003Cp\u003ECode reference \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThe next article mainly introduces the comparison between cocos creator and react implementation in development.\u003C\u002Fp\u003E\n\u003Cp\u003E本节主要是用react实现UI视图。\n在本节之前，已经用cocos creator实现了一个UI视图版本，为了重用基础框架，我们将游戏逻辑进行抽象，并将与视图引擎api相关的逻辑解耦出来。\n下面是抽象出来的一个接口：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EIGameSceneView\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetNewViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EchildPath\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddClickListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E handler\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E target\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetCard\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetLabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003ElabelComp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E text\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EremoveAllChildren\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eparent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Echild\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EtoggleCardSelectedStatus\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EshowComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhideComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E相对于cocos creator，react的实现在代码层面可操作性较强，体现在界面元素的样式都通过手写代码来实现，create-react-app自带的hot-reload也非常快地反馈变更，不会有切换编辑器和等待编辑器刷新的时间，非常轻量的感觉。\u003C\u002Fp\u003E\n\u003Cp\u003E代码参考 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E下一篇主要介绍cocos creator 与 react 实现在开发上的对比。\u003C\u002Fp\u003E",readingTime:"2 min read"},{title:"Make a multiplayer card game - Episode 1",slug:"create-a-simple-server-and-client-from-scratch-e1",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-01T21:55:15.361Z",excerpt:"Create a simple server and client from scratch",tags:c,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C\u002Fh2\u003E\n\u003Cp\u003EIn the coming weeks, I’ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame “Doudizhu”, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C\u002Fp\u003E\n\u003Cp\u003EParts including:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Ecreate a simple server and client\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with bots\u003C\u002Fli\u003E\n\u003Cli\u003Ecommunicate with server by protobuf\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with other players\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with Cocos Creator\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with React\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 3D graphical interface with Three.js\u003C\u002Fli\u003E\n\u003Cli\u003Eadd physical lib ammo.js to add a tiny game\u003C\u002Fli\u003E\n\u003Cli\u003Econnect to Web3 world\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Cem\u003Eopen your terminal, input \u003Ccode\u003Enode -v\u003C\u002Fcode\u003E, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\"\u003Ehttps:\u002F\u002Fnodejs.org\u003C\u002Fa\u003E.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Edirectory structure :\n\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644775769474\u002F2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ecreate a server, server\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E server \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E net\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcreateServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Welcome, friend.\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nserver\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elisten\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"server listening on 127.0.0.1:8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Ecreate client, client\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E socket \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003Enet\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ESocket\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Econnect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  host\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"127.0.0.1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  port\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E onConnected\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"error\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EonConnected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emsg\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E data \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello, world!\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Erun :\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd server\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd client\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eresult:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644776034549\u002Ft-Jir1j9R.png\" alt=\"demo0-cmd-result.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis episode is end here, the complete demo can be found on\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAny problems, discussion is welcome.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EIn the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for your reading.\u003C\u002Fp\u003E",readingTime:"2 min read"}]},{title:"PureMVC | Prior for Episode 5",slug:"prior-for-e5-puremvc",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-15T21:55:15.361Z",excerpt:"PureMVC will be included in next episode.",tags:["Tutorial:Make a multiplayer card game"],html:"\u003Ch2 id=\"puremvc--prior-for-episode-5\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#puremvc--prior-for-episode-5\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPureMVC | Prior for Episode 5\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EPureMVC will be included in next episode.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cblockquote\u003E\u003Cp\u003EPureMVC is a framework for creating applications based upon the\nwell-established model–view–controller (MVC) design pattern. The free, open\nsource framework was originally implemented in the ActionScript 3 language for\nuse with Adobe Flex, Flash and AIR, and it has since been ported to nearly all\nthe major web development platforms.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1648287487663\u002FTkUwfryAy.jpg\" alt=\"puremvc.jpg\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAdvantages and disadvantages of PureMVC:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003EAdvantages \u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Col\u003E\u003Cli\u003E\u003Cp\u003EUse intermediaries, agents and commands to realize decoupling, which reduces\nthe coupling among model, view and controller and improves the reuse of some\ncodes\u003C\u002Fp\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EThe view interface can be reused\u003C\u002Fp\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EModel data can be reused\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003EDisadvantages \u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Col\u003E\u003Cli\u003ECode redundancy is large. For simple functions, you have to create view,\nmediator, command, facade, proxy and model scripts\u003C\u002Fli\u003E\n\u003Cli\u003EThe operation process is a cumbersome process, and the code in mediator will\nappear complex and difficult to understand, unless you are familiar with the\nimplementation principle of PureMVC\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003EPureMVC features\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Col\u003E\u003Cli\u003EThe notice shall be delivered through the operation of packing and unpacking\u003C\u002Fli\u003E\n\u003Cli\u003EThe command \u002F notification is implemented in the observer mode. The command \u002F\nnotification uses the reflection acquisition method in the observer and is\nexecuted\u003C\u002Fli\u003E\n\u003Cli\u003ENo service (this module for network communication can be added according to\nthe structure of MVC)\u003C\u002Fli\u003E\n\u003Cli\u003EData is transmitted through notification. Sendnotification has only one\nobject type parameter. It will feel that the data transmission is limited.\nYou can combine the data into a type \u002F structure for transmission, or expand\nanother parameter for notification.\u003C\u002Fli\u003E\u003C\u002Fol\u003E",readingTime:"2 min read",relatedPosts:[{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:a,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EProtocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https:\u002F\u002Fanuragthakur.hashnode.dev\u002Fprotobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\"\u003EWhy Google moved from JSON to Protocol Buffers?\u003C\u002Fa\u003E\nintroduce.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EI used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EYou can clone\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode3\" rel=\"nofollow\"\u003Edemo for episode3\u003C\u002Fa\u003E\nwhich including all the bellow content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EAccording to the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eofficial tutorial\u003C\u002Fa\u003E, two steps\nshould be done:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EInstall the runtime library \u003Ccode\u003Egoogle-protobuf\u003C\u002Fcode\u003E:\u003Ccode\u003Enpm install\ngoogle-protobuf\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EGet the Protocol Compiler \u003Ccode\u003Eprotoc\u003C\u002Fcode\u003E: download from\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EThen run a command like \u003Ccode\u003Eprotoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C\u002Fcode\u003E, you can get the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from\u003C\u002Fp\u003E\n\u003Ccode\u003E.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EWhen the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file generated, the protocol buffers environment is\nready.\u003C\u002Fp\u003E\n\u003Cp\u003EBack to our game, we should create a \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file, named\u003C\u002Fp\u003E\n\u003Ccode\u003Ecard-game.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EThe first line in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Esyntax = &quot;proto3&quot;;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhich means which version of Protobuf we are using.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine the enum of Cmd:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eenum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eenum Cmd is for routing, will be introduced later.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine MainMessage message:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine data message like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen, generate our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the episode3 demo show, run command bellow in directory proto.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EWindows\u003C\u002Fp\u003E\n\u003Ccode\u003E.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMacOS\u003C\u002Fp\u003E\n\u003Ccode\u003E.\u002Fprotoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENow, we have our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from the \u003Ccode\u003E.proto\u003C\u002Fcode\u003E in which\nwe define message.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s encoding and decoding message with protocol buffers.\u003C\u002Fp\u003E\n\u003Cp\u003EEncoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDecoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EAttributes defined as \u003Cstrong\u003Eseat_number\u003C\u002Fstrong\u003E in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be\ncall like getSeatNumber and setSeatNumebr.\u003C\u002Fli\u003E\n\u003Cli\u003EAttributes defined as \u003Cstrong\u003Erepeated\u003C\u002Fstrong\u003E type in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E",readingTime:"3 min read"},{title:"Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React",slug:"create-2d-graphical-interface-with-react-e6",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-29T21:55:15.361Z",excerpt:"This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.",tags:b,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 6 | Create 2D graphical interface with React\u003C\u002Fh2\u003E\n\u003Cp\u003EThis section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api. The following is an abstracted interface:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eexport interface IGameSceneView &#123;\n    getViewComponent(name: string),\n    getNewViewComponent(comp),\n    getChild(childPath, parent),\n    addClickListener(comp, handler, target),\n    setCard(card, name),\n    setLabel(labelComp, text),\n    removeAllChildren(parent),\n    addChild(child, parent),\n    isCardSelected(card),\n    toggleCardSelectedStatus(card),\n    showComponent(comp),\n    hideComponent(comp)\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECompared with cocos creator, the implementation of react is more operable at the code level. The styles of interface elements are all implemented by handwritten code. The hot-reload that comes with create-react-app also responds to changes very quickly. There is a time to switch editors and wait for the editor to refresh, which is very lightweight.\u003C\u002Fp\u003E\n\u003Cp\u003ECode reference \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThe next article mainly introduces the comparison between cocos creator and react implementation in development.\u003C\u002Fp\u003E\n\u003Cp\u003E本节主要是用react实现UI视图。\n在本节之前，已经用cocos creator实现了一个UI视图版本，为了重用基础框架，我们将游戏逻辑进行抽象，并将与视图引擎api相关的逻辑解耦出来。\n下面是抽象出来的一个接口：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EIGameSceneView\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetNewViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EchildPath\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddClickListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E handler\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E target\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetCard\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetLabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003ElabelComp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E text\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EremoveAllChildren\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eparent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Echild\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EtoggleCardSelectedStatus\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EshowComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhideComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E相对于cocos creator，react的实现在代码层面可操作性较强，体现在界面元素的样式都通过手写代码来实现，create-react-app自带的hot-reload也非常快地反馈变更，不会有切换编辑器和等待编辑器刷新的时间，非常轻量的感觉。\u003C\u002Fp\u003E\n\u003Cp\u003E代码参考 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E下一篇主要介绍cocos creator 与 react 实现在开发上的对比。\u003C\u002Fp\u003E",readingTime:"2 min read"},{title:"Make a multiplayer card game - Episode 1",slug:"create-a-simple-server-and-client-from-scratch-e1",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-01T21:55:15.361Z",excerpt:"Create a simple server and client from scratch",tags:c,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C\u002Fh2\u003E\n\u003Cp\u003EIn the coming weeks, I’ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame “Doudizhu”, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C\u002Fp\u003E\n\u003Cp\u003EParts including:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Ecreate a simple server and client\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with bots\u003C\u002Fli\u003E\n\u003Cli\u003Ecommunicate with server by protobuf\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with other players\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with Cocos Creator\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with React\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 3D graphical interface with Three.js\u003C\u002Fli\u003E\n\u003Cli\u003Eadd physical lib ammo.js to add a tiny game\u003C\u002Fli\u003E\n\u003Cli\u003Econnect to Web3 world\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Cem\u003Eopen your terminal, input \u003Ccode\u003Enode -v\u003C\u002Fcode\u003E, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\"\u003Ehttps:\u002F\u002Fnodejs.org\u003C\u002Fa\u003E.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Edirectory structure :\n\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644775769474\u002F2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ecreate a server, server\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E server \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E net\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcreateServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Welcome, friend.\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nserver\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elisten\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"server listening on 127.0.0.1:8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Ecreate client, client\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E socket \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003Enet\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ESocket\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Econnect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  host\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"127.0.0.1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  port\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E onConnected\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"error\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EonConnected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emsg\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E data \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello, world!\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Erun :\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd server\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd client\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eresult:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644776034549\u002Ft-Jir1j9R.png\" alt=\"demo0-cmd-result.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis episode is end here, the complete demo can be found on\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAny problems, discussion is welcome.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EIn the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for your reading.\u003C\u002Fp\u003E",readingTime:"2 min read"}]},{title:"Prior for Episode 5 - Cocos Creator",slug:"prior-for-e5-ccc",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-08T21:55:15.361Z",excerpt:"I am writing a demo by Cocos Creator for episode 5",tags:["Tutorial:Make a multiplayer card game"],html:"\u003Ch2 id=\"cocos-creator--prior-for-episode-5\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#cocos-creator--prior-for-episode-5\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECocos Creator | Prior for Episode 5\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EI am wirting a demo by Cocos Creator for episode 5\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Ch3 id=\"what\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#what\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EWhat\u003C\u002Fh3\u003E\n\u003Cp\u003ECocos Creator is a content creation-focused, scripted, component-based and\ndata-driven game development tool. It features an easy-to-use content production\nworkflow and a powerful developer tool suite for implementing game logic and\nhigh-performance game effects. In keeping with Cocos’s usual product features\nlike open-source, easy-to-use, high-performance and cross-platform, this new\ngame engine is designed to be the new choice for developers to create 2D and 3D\ngames.\u003C\u002Fp\u003E\n\u003Ch3 id=\"why\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#why\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EWhy\u003C\u002Fh3\u003E\n\u003Cul\u003E\u003Cli\u003EEasy to use with developer tool suite especially a official visualize editor\u003C\u002Fli\u003E\n\u003Cli\u003EIntegrate many target platforms’ SDK\u003C\u002Fli\u003E\n\u003Cli\u003EWell popularity of Mini Game on Wechat and other platform apps\u003C\u002Fli\u003E\n\u003Cli\u003EAlmost same work flow with Unity, attract developer who use Unity before and\nwant post game on mini game platform\u003C\u002Fli\u003E\u003C\u002Ful\u003E",readingTime:"1 min read",relatedPosts:[{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:a,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EProtocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https:\u002F\u002Fanuragthakur.hashnode.dev\u002Fprotobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\"\u003EWhy Google moved from JSON to Protocol Buffers?\u003C\u002Fa\u003E\nintroduce.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EI used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EYou can clone\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode3\" rel=\"nofollow\"\u003Edemo for episode3\u003C\u002Fa\u003E\nwhich including all the bellow content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EAccording to the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eofficial tutorial\u003C\u002Fa\u003E, two steps\nshould be done:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EInstall the runtime library \u003Ccode\u003Egoogle-protobuf\u003C\u002Fcode\u003E:\u003Ccode\u003Enpm install\ngoogle-protobuf\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EGet the Protocol Compiler \u003Ccode\u003Eprotoc\u003C\u002Fcode\u003E: download from\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EThen run a command like \u003Ccode\u003Eprotoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C\u002Fcode\u003E, you can get the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from\u003C\u002Fp\u003E\n\u003Ccode\u003E.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EWhen the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file generated, the protocol buffers environment is\nready.\u003C\u002Fp\u003E\n\u003Cp\u003EBack to our game, we should create a \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file, named\u003C\u002Fp\u003E\n\u003Ccode\u003Ecard-game.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EThe first line in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Esyntax = &quot;proto3&quot;;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhich means which version of Protobuf we are using.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine the enum of Cmd:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eenum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eenum Cmd is for routing, will be introduced later.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine MainMessage message:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine data message like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen, generate our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the episode3 demo show, run command bellow in directory proto.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EWindows\u003C\u002Fp\u003E\n\u003Ccode\u003E.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMacOS\u003C\u002Fp\u003E\n\u003Ccode\u003E.\u002Fprotoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENow, we have our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from the \u003Ccode\u003E.proto\u003C\u002Fcode\u003E in which\nwe define message.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s encoding and decoding message with protocol buffers.\u003C\u002Fp\u003E\n\u003Cp\u003EEncoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDecoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EAttributes defined as \u003Cstrong\u003Eseat_number\u003C\u002Fstrong\u003E in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be\ncall like getSeatNumber and setSeatNumebr.\u003C\u002Fli\u003E\n\u003Cli\u003EAttributes defined as \u003Cstrong\u003Erepeated\u003C\u002Fstrong\u003E type in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E",readingTime:"3 min read"},{title:"Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React",slug:"create-2d-graphical-interface-with-react-e6",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-29T21:55:15.361Z",excerpt:"This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.",tags:b,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 6 | Create 2D graphical interface with React\u003C\u002Fh2\u003E\n\u003Cp\u003EThis section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api. The following is an abstracted interface:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eexport interface IGameSceneView &#123;\n    getViewComponent(name: string),\n    getNewViewComponent(comp),\n    getChild(childPath, parent),\n    addClickListener(comp, handler, target),\n    setCard(card, name),\n    setLabel(labelComp, text),\n    removeAllChildren(parent),\n    addChild(child, parent),\n    isCardSelected(card),\n    toggleCardSelectedStatus(card),\n    showComponent(comp),\n    hideComponent(comp)\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECompared with cocos creator, the implementation of react is more operable at the code level. The styles of interface elements are all implemented by handwritten code. The hot-reload that comes with create-react-app also responds to changes very quickly. There is a time to switch editors and wait for the editor to refresh, which is very lightweight.\u003C\u002Fp\u003E\n\u003Cp\u003ECode reference \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThe next article mainly introduces the comparison between cocos creator and react implementation in development.\u003C\u002Fp\u003E\n\u003Cp\u003E本节主要是用react实现UI视图。\n在本节之前，已经用cocos creator实现了一个UI视图版本，为了重用基础框架，我们将游戏逻辑进行抽象，并将与视图引擎api相关的逻辑解耦出来。\n下面是抽象出来的一个接口：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EIGameSceneView\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetNewViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EchildPath\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddClickListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E handler\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E target\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetCard\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetLabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003ElabelComp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E text\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EremoveAllChildren\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eparent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Echild\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EtoggleCardSelectedStatus\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EshowComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhideComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E相对于cocos creator，react的实现在代码层面可操作性较强，体现在界面元素的样式都通过手写代码来实现，create-react-app自带的hot-reload也非常快地反馈变更，不会有切换编辑器和等待编辑器刷新的时间，非常轻量的感觉。\u003C\u002Fp\u003E\n\u003Cp\u003E代码参考 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E下一篇主要介绍cocos creator 与 react 实现在开发上的对比。\u003C\u002Fp\u003E",readingTime:"2 min read"},{title:"Make a multiplayer card game - Episode 1",slug:"create-a-simple-server-and-client-from-scratch-e1",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-01T21:55:15.361Z",excerpt:"Create a simple server and client from scratch",tags:c,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C\u002Fh2\u003E\n\u003Cp\u003EIn the coming weeks, I’ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame “Doudizhu”, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C\u002Fp\u003E\n\u003Cp\u003EParts including:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Ecreate a simple server and client\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with bots\u003C\u002Fli\u003E\n\u003Cli\u003Ecommunicate with server by protobuf\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with other players\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with Cocos Creator\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with React\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 3D graphical interface with Three.js\u003C\u002Fli\u003E\n\u003Cli\u003Eadd physical lib ammo.js to add a tiny game\u003C\u002Fli\u003E\n\u003Cli\u003Econnect to Web3 world\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Cem\u003Eopen your terminal, input \u003Ccode\u003Enode -v\u003C\u002Fcode\u003E, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\"\u003Ehttps:\u002F\u002Fnodejs.org\u003C\u002Fa\u003E.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Edirectory structure :\n\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644775769474\u002F2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ecreate a server, server\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E server \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E net\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcreateServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Welcome, friend.\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nserver\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elisten\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"server listening on 127.0.0.1:8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Ecreate client, client\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E socket \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003Enet\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ESocket\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Econnect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  host\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"127.0.0.1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  port\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E onConnected\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"error\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EonConnected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emsg\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E data \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello, world!\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Erun :\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd server\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd client\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eresult:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644776034549\u002Ft-Jir1j9R.png\" alt=\"demo0-cmd-result.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis episode is end here, the complete demo can be found on\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAny problems, discussion is welcome.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EIn the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for your reading.\u003C\u002Fp\u003E",readingTime:"2 min read"}]},{title:"Make a multiplayer card game - Episode 4",slug:"play-cards-with-other-players-e4",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-01T21:55:15.361Z",excerpt:"Play cards with other players",tags:["Tutorial:Make a multiplayer card game"],html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-4--play-cards-with-other-players\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-4--play-cards-with-other-players\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 4 | Play cards with other players\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EThis section is a milestone in this series of tutorials, and after this\narticle, there will present a complete multiplayer local online card game.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EThe key point of this section is how to link multiplayer to play.\u003C\u002Fp\u003E\n\u003Ch4 id=\"almost-all-changes-is-on-the-server-side\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#almost-all-changes-is-on-the-server-side\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAlmost all changes is on the server side:\u003C\u002Fh4\u003E\n\u003Cp\u003EWe make a server and listen on “connection” event.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Econst net = require(&#39;net&#39;);\nconst server = net.createServer();\nserver.on(&quot;connection&quot;,()=&gt;&#123;&#125;);\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen we generate a player ID and seat number for the player connecting.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Evar playerIDArr = [];\nfunction generatePlayerIDAndSeatNumber() &#123;\n    let _seat = playerIDArr.length;\n    let _id = Math.floor(Math.random() * 10000);\n    let _isExist = playerIDArr.indexOf(_id) != -1;\n    if (_isExist) &#123;\n        generatePlayerIDAndSeatNumber();\n    &#125; else &#123;\n        playerIDArr.push(_id);\n    &#125;\n    return &#123; id: _id, seat: _seat &#125;;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EBack to the “connection” event, we assign some attributes on socket to make a\nidentification.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-javascript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-javascript\"\u003Eserver\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"connection\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Esocket\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _id_seat \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EgeneratePlayerIDAndSeatNumber\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _playerID \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _id_seat\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eid\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E _seatNumber \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _id_seat\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eseat\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eid \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _playerID\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eseat \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E _seatNumber\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socketDic\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E_playerID\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E socket\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token function\"\u003EaddSocketListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EAdd event listener to each socket, listen players’ interaction information\nthrough data which cotain the command ID to route different game logic:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction addSocketListener(socket) &#123;\n    socket.on(&#39;data&#39;, (data) =&gt; &#123;\n        let _playerID = socket.id;\n        decodeData(data, _playerID);\n    &#125;);\n    socket.on(&#39;error&#39;, (error) =&gt; &#123;\n        \u002F\u002Fplayer disconnect\n        console.log(error);\n    &#125;);\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ethe server forwards each player’s messages, which are divided into separate\nsending and broadcasting.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003E\u002F\u002Fsend to a specific player\nfunction send(playerID, cmd, data) &#123;\n    if (!mIsGaming) return;\n    const _dataBuffer = encodeData(cmd, data);\n    if (_dataBuffer) socketDic[playerID].write(_dataBuffer);\n&#125;\n\u002F\u002Fsend to all players\nfunction broadcast(cmd, data) &#123;\n    if (!mIsGaming) return;\n    const _dataBuffer = encodeData(cmd, data);\n    if (_dataBuffer) &#123;\n        let _keyArr = Object.keys(socketDic);\n        for (let i = 0; i &lt; _keyArr.length; i++) &#123;\n            let _socket = socketDic[_keyArr[i]];\n            _socket.write(_dataBuffer);\n        &#125;\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThat’s all the key points in this section, as above present, players can be\nconnect to a server and play with each other. You can check\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode4\" rel=\"nofollow\"\u003Eepisode4 tag\u003C\u002Fa\u003E\nto see the complete code.\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Cp\u003EThe progress of the project up to this point have make a milestone, will not add\nnew content to the relevant repo main branch, excluding the subsequent\nrefactoring to prepare for the involvement of the game engine and framework.\u003C\u002Fp\u003E\n\u003Cp\u003EThe addition of new content will open another branch for development. Like each\nepisode, a tag will still be added after the chapter ends. You can find the\ncontent of the corresponding chapter through the corresponding tag at any time.\u003C\u002Fp\u003E\n\u003Cp\u003EIn order to reflect the simplicity of native nodejs, I chose javascript. But I\nhave been developing with typescript in the past few years, is not very familiar\nwith javascript, which I must spend a little bit more time on debugging.\u003C\u002Fp\u003E\n\u003Cp\u003EThe content of the following chapters will expand rapidly. For either the\nrobustness of development or my proficiency. I will use typescript for new\ncontent development and refactoring in later articles.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EThe next episode, as the content list in the first episode, I will add game\nengine Cocos Creator, before which I will make a refactory, besides move\njavascript to typescript, but something about modularity.\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for your reading, and discussion is always welcome, I am very glad to\ntalk with you in below comment section😊.\u003C\u002Fp\u003E",readingTime:"3 min read",relatedPosts:[{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:a,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EProtocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https:\u002F\u002Fanuragthakur.hashnode.dev\u002Fprotobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\"\u003EWhy Google moved from JSON to Protocol Buffers?\u003C\u002Fa\u003E\nintroduce.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EI used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EYou can clone\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode3\" rel=\"nofollow\"\u003Edemo for episode3\u003C\u002Fa\u003E\nwhich including all the bellow content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EAccording to the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eofficial tutorial\u003C\u002Fa\u003E, two steps\nshould be done:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EInstall the runtime library \u003Ccode\u003Egoogle-protobuf\u003C\u002Fcode\u003E:\u003Ccode\u003Enpm install\ngoogle-protobuf\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EGet the Protocol Compiler \u003Ccode\u003Eprotoc\u003C\u002Fcode\u003E: download from\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EThen run a command like \u003Ccode\u003Eprotoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C\u002Fcode\u003E, you can get the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from\u003C\u002Fp\u003E\n\u003Ccode\u003E.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EWhen the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file generated, the protocol buffers environment is\nready.\u003C\u002Fp\u003E\n\u003Cp\u003EBack to our game, we should create a \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file, named\u003C\u002Fp\u003E\n\u003Ccode\u003Ecard-game.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EThe first line in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Esyntax = &quot;proto3&quot;;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhich means which version of Protobuf we are using.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine the enum of Cmd:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eenum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eenum Cmd is for routing, will be introduced later.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine MainMessage message:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine data message like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen, generate our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the episode3 demo show, run command bellow in directory proto.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EWindows\u003C\u002Fp\u003E\n\u003Ccode\u003E.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMacOS\u003C\u002Fp\u003E\n\u003Ccode\u003E.\u002Fprotoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENow, we have our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from the \u003Ccode\u003E.proto\u003C\u002Fcode\u003E in which\nwe define message.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s encoding and decoding message with protocol buffers.\u003C\u002Fp\u003E\n\u003Cp\u003EEncoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDecoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EAttributes defined as \u003Cstrong\u003Eseat_number\u003C\u002Fstrong\u003E in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be\ncall like getSeatNumber and setSeatNumebr.\u003C\u002Fli\u003E\n\u003Cli\u003EAttributes defined as \u003Cstrong\u003Erepeated\u003C\u002Fstrong\u003E type in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E",readingTime:"3 min read"},{title:"Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React",slug:"create-2d-graphical-interface-with-react-e6",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-29T21:55:15.361Z",excerpt:"This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.",tags:b,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 6 | Create 2D graphical interface with React\u003C\u002Fh2\u003E\n\u003Cp\u003EThis section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api. The following is an abstracted interface:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eexport interface IGameSceneView &#123;\n    getViewComponent(name: string),\n    getNewViewComponent(comp),\n    getChild(childPath, parent),\n    addClickListener(comp, handler, target),\n    setCard(card, name),\n    setLabel(labelComp, text),\n    removeAllChildren(parent),\n    addChild(child, parent),\n    isCardSelected(card),\n    toggleCardSelectedStatus(card),\n    showComponent(comp),\n    hideComponent(comp)\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECompared with cocos creator, the implementation of react is more operable at the code level. The styles of interface elements are all implemented by handwritten code. The hot-reload that comes with create-react-app also responds to changes very quickly. There is a time to switch editors and wait for the editor to refresh, which is very lightweight.\u003C\u002Fp\u003E\n\u003Cp\u003ECode reference \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThe next article mainly introduces the comparison between cocos creator and react implementation in development.\u003C\u002Fp\u003E\n\u003Cp\u003E本节主要是用react实现UI视图。\n在本节之前，已经用cocos creator实现了一个UI视图版本，为了重用基础框架，我们将游戏逻辑进行抽象，并将与视图引擎api相关的逻辑解耦出来。\n下面是抽象出来的一个接口：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EIGameSceneView\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetNewViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EchildPath\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddClickListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E handler\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E target\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetCard\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetLabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003ElabelComp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E text\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EremoveAllChildren\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eparent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Echild\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EtoggleCardSelectedStatus\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EshowComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhideComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E相对于cocos creator，react的实现在代码层面可操作性较强，体现在界面元素的样式都通过手写代码来实现，create-react-app自带的hot-reload也非常快地反馈变更，不会有切换编辑器和等待编辑器刷新的时间，非常轻量的感觉。\u003C\u002Fp\u003E\n\u003Cp\u003E代码参考 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E下一篇主要介绍cocos creator 与 react 实现在开发上的对比。\u003C\u002Fp\u003E",readingTime:"2 min read"},{title:"Make a multiplayer card game - Episode 1",slug:"create-a-simple-server-and-client-from-scratch-e1",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-01T21:55:15.361Z",excerpt:"Create a simple server and client from scratch",tags:c,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C\u002Fh2\u003E\n\u003Cp\u003EIn the coming weeks, I’ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame “Doudizhu”, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C\u002Fp\u003E\n\u003Cp\u003EParts including:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Ecreate a simple server and client\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with bots\u003C\u002Fli\u003E\n\u003Cli\u003Ecommunicate with server by protobuf\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with other players\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with Cocos Creator\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with React\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 3D graphical interface with Three.js\u003C\u002Fli\u003E\n\u003Cli\u003Eadd physical lib ammo.js to add a tiny game\u003C\u002Fli\u003E\n\u003Cli\u003Econnect to Web3 world\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Cem\u003Eopen your terminal, input \u003Ccode\u003Enode -v\u003C\u002Fcode\u003E, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\"\u003Ehttps:\u002F\u002Fnodejs.org\u003C\u002Fa\u003E.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Edirectory structure :\n\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644775769474\u002F2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ecreate a server, server\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E server \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E net\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcreateServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Welcome, friend.\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nserver\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elisten\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"server listening on 127.0.0.1:8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Ecreate client, client\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E socket \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003Enet\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ESocket\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Econnect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  host\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"127.0.0.1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  port\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E onConnected\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"error\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EonConnected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emsg\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E data \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello, world!\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Erun :\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd server\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd client\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eresult:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644776034549\u002Ft-Jir1j9R.png\" alt=\"demo0-cmd-result.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis episode is end here, the complete demo can be found on\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAny problems, discussion is welcome.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EIn the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for your reading.\u003C\u002Fp\u003E",readingTime:"2 min read"}]},{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:a,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EProtocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https:\u002F\u002Fanuragthakur.hashnode.dev\u002Fprotobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\"\u003EWhy Google moved from JSON to Protocol Buffers?\u003C\u002Fa\u003E\nintroduce.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EI used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EYou can clone\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode3\" rel=\"nofollow\"\u003Edemo for episode3\u003C\u002Fa\u003E\nwhich including all the bellow content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EAccording to the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eofficial tutorial\u003C\u002Fa\u003E, two steps\nshould be done:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EInstall the runtime library \u003Ccode\u003Egoogle-protobuf\u003C\u002Fcode\u003E:\u003Ccode\u003Enpm install\ngoogle-protobuf\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EGet the Protocol Compiler \u003Ccode\u003Eprotoc\u003C\u002Fcode\u003E: download from\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EThen run a command like \u003Ccode\u003Eprotoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C\u002Fcode\u003E, you can get the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from\u003C\u002Fp\u003E\n\u003Ccode\u003E.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EWhen the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file generated, the protocol buffers environment is\nready.\u003C\u002Fp\u003E\n\u003Cp\u003EBack to our game, we should create a \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file, named\u003C\u002Fp\u003E\n\u003Ccode\u003Ecard-game.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EThe first line in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Esyntax = &quot;proto3&quot;;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhich means which version of Protobuf we are using.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine the enum of Cmd:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eenum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eenum Cmd is for routing, will be introduced later.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine MainMessage message:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine data message like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen, generate our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the episode3 demo show, run command bellow in directory proto.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EWindows\u003C\u002Fp\u003E\n\u003Ccode\u003E.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMacOS\u003C\u002Fp\u003E\n\u003Ccode\u003E.\u002Fprotoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENow, we have our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from the \u003Ccode\u003E.proto\u003C\u002Fcode\u003E in which\nwe define message.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s encoding and decoding message with protocol buffers.\u003C\u002Fp\u003E\n\u003Cp\u003EEncoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDecoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EAttributes defined as \u003Cstrong\u003Eseat_number\u003C\u002Fstrong\u003E in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be\ncall like getSeatNumber and setSeatNumebr.\u003C\u002Fli\u003E\n\u003Cli\u003EAttributes defined as \u003Cstrong\u003Erepeated\u003C\u002Fstrong\u003E type in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E",readingTime:"3 min read",relatedPosts:[{title:"Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React",slug:"create-2d-graphical-interface-with-react-e6",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-29T21:55:15.361Z",excerpt:"This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.",tags:b,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 6 | Create 2D graphical interface with React\u003C\u002Fh2\u003E\n\u003Cp\u003EThis section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api. The following is an abstracted interface:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eexport interface IGameSceneView &#123;\n    getViewComponent(name: string),\n    getNewViewComponent(comp),\n    getChild(childPath, parent),\n    addClickListener(comp, handler, target),\n    setCard(card, name),\n    setLabel(labelComp, text),\n    removeAllChildren(parent),\n    addChild(child, parent),\n    isCardSelected(card),\n    toggleCardSelectedStatus(card),\n    showComponent(comp),\n    hideComponent(comp)\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECompared with cocos creator, the implementation of react is more operable at the code level. The styles of interface elements are all implemented by handwritten code. The hot-reload that comes with create-react-app also responds to changes very quickly. There is a time to switch editors and wait for the editor to refresh, which is very lightweight.\u003C\u002Fp\u003E\n\u003Cp\u003ECode reference \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThe next article mainly introduces the comparison between cocos creator and react implementation in development.\u003C\u002Fp\u003E\n\u003Cp\u003E本节主要是用react实现UI视图。\n在本节之前，已经用cocos creator实现了一个UI视图版本，为了重用基础框架，我们将游戏逻辑进行抽象，并将与视图引擎api相关的逻辑解耦出来。\n下面是抽象出来的一个接口：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EIGameSceneView\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetNewViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EchildPath\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddClickListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E handler\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E target\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetCard\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetLabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003ElabelComp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E text\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EremoveAllChildren\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eparent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Echild\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EtoggleCardSelectedStatus\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EshowComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhideComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E相对于cocos creator，react的实现在代码层面可操作性较强，体现在界面元素的样式都通过手写代码来实现，create-react-app自带的hot-reload也非常快地反馈变更，不会有切换编辑器和等待编辑器刷新的时间，非常轻量的感觉。\u003C\u002Fp\u003E\n\u003Cp\u003E代码参考 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E下一篇主要介绍cocos creator 与 react 实现在开发上的对比。\u003C\u002Fp\u003E",readingTime:"2 min read"},{title:"Make a multiplayer card game - Episode 1",slug:"create-a-simple-server-and-client-from-scratch-e1",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-01T21:55:15.361Z",excerpt:"Create a simple server and client from scratch",tags:c,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C\u002Fh2\u003E\n\u003Cp\u003EIn the coming weeks, I’ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame “Doudizhu”, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C\u002Fp\u003E\n\u003Cp\u003EParts including:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Ecreate a simple server and client\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with bots\u003C\u002Fli\u003E\n\u003Cli\u003Ecommunicate with server by protobuf\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with other players\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with Cocos Creator\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with React\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 3D graphical interface with Three.js\u003C\u002Fli\u003E\n\u003Cli\u003Eadd physical lib ammo.js to add a tiny game\u003C\u002Fli\u003E\n\u003Cli\u003Econnect to Web3 world\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Cem\u003Eopen your terminal, input \u003Ccode\u003Enode -v\u003C\u002Fcode\u003E, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\"\u003Ehttps:\u002F\u002Fnodejs.org\u003C\u002Fa\u003E.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Edirectory structure :\n\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644775769474\u002F2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ecreate a server, server\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E server \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E net\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcreateServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Welcome, friend.\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nserver\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elisten\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"server listening on 127.0.0.1:8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Ecreate client, client\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E socket \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003Enet\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ESocket\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Econnect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  host\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"127.0.0.1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  port\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E onConnected\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"error\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EonConnected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emsg\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E data \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello, world!\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Erun :\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd server\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd client\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eresult:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644776034549\u002Ft-Jir1j9R.png\" alt=\"demo0-cmd-result.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis episode is end here, the complete demo can be found on\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAny problems, discussion is welcome.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EIn the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for your reading.\u003C\u002Fp\u003E",readingTime:"2 min read"},{title:"Make a multiplayer card game - Episode 5 | Create 2D graphical interface with Cocos Creator",slug:"make-a-multiplayer-card-game-episode-5",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-22T21:55:15.361Z",excerpt:"Create 2D graphical interface with Cocos Creator",tags:d,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-5--create-2d-graphical-interface-with-cocos-creator\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-5--create-2d-graphical-interface-with-cocos-creator\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 5 | Create 2D graphical interface with Cocos Creator\u003C\u002Fh2\u003E\n\u003Cp\u003EThis chapter is almost a month away from the previous chapter. During this\nperiod, it is mainly about the transformation and reconstruction of the client.\nThe content of the overall client is almost completely different from the\ncommand-line version of the previous chapter.\u003C\u002Fp\u003E\n\u003Cp\u003EAccording to the previous plan, I converted all the code written in JS to TS and\ntransplanted the command-line interactive interface to the conventional game\ninteractive interface (using cocos creator game engine).\u003C\u002Fp\u003E\n\u003Cp\u003EPreviously, in order to quickly realize the function, the server and client used\nonly one file to encode. Up to now, the client code of the project has been\nmodularized, and the classic PureMVC library has been introduced to completely\ndecouple the UI interaction and data, network messages and game operation logic,\nso as to create conditions for extracting the code of the framework independent\nof the game engine (it is planned to use one framework to access different view\nlayer engines).\u003C\u002Fp\u003E\n\u003Cp\u003EPureMVC has been introduced in previous articles. The core idea is to decouple\nview and data. The data is processed by proxy and the facade is controlled by\nproxy.\u003C\u002Fp\u003E\n\u003Cp\u003ECompared with the previous version, some changes are involved: -The difference\nbetween socket and web socket API. It mainly includes the names of several\nmonitored events and the interfaces for sending messages. -UI display layer\nindependent. Command line output and game engine rendering view interactive\noperation interface.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode5-UICocosCreator\" rel=\"nofollow\"\u003Edemo url\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E本章离前一章快一个月了，在这段时间，主要是对客户端的改造和重构，整体客户端的内容几乎完全不同于上一章命令行版本。\u003C\u002Fp\u003E\n\u003Cp\u003E按照之前的计划，我将之前用js写的代码全部转为了ts，将命令行交互界面移植到常规的游戏交互界面（利用CocosCreator游戏引擎）。\u003C\u002Fp\u003E\n\u003Cp\u003E之前为了快速实现功能，服务器和客户端分别只用一个文件进行编码。\n截至目前，项目客户端代码进行了模块化改造，引入了经典的PureMVC库，将UI交互和数据，网络消息和游戏操作逻辑完全解藕，为后面提取与游戏引擎无关的框架（计划用一个框架接入不同视图层引擎）代码创造条件。\u003C\u002Fp\u003E\n\u003Cp\u003E在之前的文章里面已经介绍过PureMVC，核心的思想就是视图与数据解藕。\n通过一个门面类（Facade）来统管框架，用视图代理（Mediator）控制显示组件逻辑，用数据模型代理（Proxy）存储和处理数据。\u003C\u002Fp\u003E\n\u003Cp\u003E相对于上一版，涉及到的一些改动：\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Esocket 和 web socket api 的区别。主要是几个监听的事件名字，和发送消息的接口。\u003C\u002Fli\u003E\n\u003Cli\u003Eui显示层独立。命令行输出和游戏引擎渲染视图交互操作界面。\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode5-UICocosCreator\" rel=\"nofollow\"\u003Edemo url\u003C\u002Fa\u003E\u003C\u002Fp\u003E",readingTime:"4 min read"}]},{title:"Prior Knowledge For Episode 2",slug:"prior-knowledge-for-episode-2",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-15T21:55:15.361Z",excerpt:"Prior Knowledge For Episode 2",tags:["Tutorial:Make a multiplayer card game"],html:"\u003Ch2 id=\"prior-knowledge-for-episode-2\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#prior-knowledge-for-episode-2\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPrior Knowledge For Episode 2\u003C\u002Fh2\u003E\n\u003Cp\u003EBefore episode 2, we’d better to know the rule of the game we are going to make.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EBackground story:\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cblockquote\u003E\u003Cp\u003EIn the old days in China, the rich and powerful landowners oppressed the\nfarmers who work hard on the land, threatened the villagers . In order to gave\nfull vent to their hate, the farmers invent the “Fighting the Landlords”.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cblockquote\u003E\u003Cp\u003EAt the beginning, the landlords were given three more cards to highlight the\ndomineering of the landlords, while the farmers Use two-on-one to express the\npsychology of winning by teamwork.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Col\u003E\u003Cli\u003E\u003Cp\u003EBasic Rules The landlord is on one side, and the other two players are on the\nfarmer side. The game ends when any player finishes playing cards. There are\n54 cards in total. After the game starts, each of the 3 players is dealt 17\ncards, and the remaining 3 cards are the landlord cards.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EThe brand\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003ESpring: After the landlord has played all the cards, and the peasants have\nnot played a single card, it is spring.\u003C\u002Fli\u003E\n\u003Cli\u003EAnti-Spring: After the landlord plays the first hand of cards, the farmer\ncontrols it, and until the farmer finishes playing the hand, the landlord\nhas not played a card, that is, the anti-spring.\u003C\u002Fli\u003E\n\u003Cli\u003EDouble: After confirming the landlord again, both the landlord and the\npeasant can freely choose to double or not to double, and if they choose to\ndouble, the multiple will be x 2 (if both of them choose double, the\nmultiple will be x 4).\u003C\u002Fli\u003E\n\u003Cli\u003EKing Fried: That is, the double king is in hand, and the card type is the\nlargest card type and can press any card type.\u003C\u002Fli\u003E\n\u003Cli\u003EBomb: Four cards of the same rank are bomb cards. For example: 4444.\u003C\u002Fli\u003E\n\u003Cli\u003ESingle: A single card.\u003C\u002Fli\u003E\n\u003Cli\u003EPair: Two cards of the same value.\u003C\u002Fli\u003E\n\u003Cli\u003EThree Cards: Three cards of the same rank.\u003C\u002Fli\u003E\n\u003Cli\u003EThree with one: Three cards of the same rank + any single card. For\nexample: 333+4.\u003C\u002Fli\u003E\n\u003Cli\u003EThree with two: Three cards of the same rank + a pair of cards. For\nexample: 333+44.\u003C\u002Fli\u003E\n\u003Cli\u003EFour with two: Four cards of the same rank + any two cards. For example:\n3333+4+5 or 3333+44.\u003C\u002Fli\u003E\n\u003Cli\u003EStraight: A single card with five or more consecutive points, 2 and the\nking cannot be linked. For example: 34567.\u003C\u002Fli\u003E\n\u003Cli\u003EConnected Pair: Three or more consecutive pairs of cards, 2 and king cannot\nbe connected. For example: 334455.\u003C\u002Fli\u003E\n\u003Cli\u003EAirplane: Two or more adjacent three cards, 2 and the king cannot be\nconnected. For example 333444.\u003C\u002Fli\u003E\n\u003Cli\u003EAirplane with wings: Plane + the same number of singles or pairs. For\nexample: 333444+5+6 or 333444+55+66.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMultiples\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003EBomb (King Bomb): x2\u003C\u002Fli\u003E\n\u003Cli\u003ESpring: x2\u003C\u002Fli\u003E\n\u003Cli\u003EAnti-spring: x2\u003C\u002Fli\u003E\n\u003Cli\u003EPair, Flush, King: x2\u003C\u002Fli\u003E\n\u003Cli\u003EDouble king and straight in the hole card: x3\u003C\u002Fli\u003E\n\u003Cli\u003EA straight flush, three cards in the hole card: x4\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EGame Rules\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003EThe system randomly selects a player to call the landlord first, and then\nthe other 2 will grab the landlord or not.\u003C\u002Fli\u003E\n\u003Cli\u003EWhen calling the landlord, you can choose not to call or call the landlord.\nAfter someone calls the landlord, you can rob the landlord. Call the\nlandlord multiples of 1, 2, and 3 times, and the first to grab 3 times is\nthe landlord.\u003C\u002Fli\u003E\n\u003Cli\u003EAfter confirming the landlord, the three hole cards are shown and the\nlandlord gets the last three hole cards.\u003C\u002Fli\u003E\n\u003Cli\u003EIn the card playing stage, when it is your turn to press the card, you can\nfreely choose not to play or play a higher card than the previous player.\u003C\u002Fli\u003E\n\u003Cli\u003EThe game ends when any farmer player finishes playing cards, and 2 peasants\nwin. If the landlord have finished playing cards, the game ends and the\nlandlord wins.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EFighting the Landlord itself is a strategic game. As a landlord, you must\nunderstand the advantages of your three cards. As a farmer, when your own\nadvantages are insufficient, you must choose to cooperate in a group.\nOpportunity to defeat the landlord to win.\u003C\u002Fp\u003E",readingTime:"4 min read",relatedPosts:[{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:a,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EProtocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https:\u002F\u002Fanuragthakur.hashnode.dev\u002Fprotobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\"\u003EWhy Google moved from JSON to Protocol Buffers?\u003C\u002Fa\u003E\nintroduce.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EI used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EYou can clone\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode3\" rel=\"nofollow\"\u003Edemo for episode3\u003C\u002Fa\u003E\nwhich including all the bellow content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EAccording to the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eofficial tutorial\u003C\u002Fa\u003E, two steps\nshould be done:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EInstall the runtime library \u003Ccode\u003Egoogle-protobuf\u003C\u002Fcode\u003E:\u003Ccode\u003Enpm install\ngoogle-protobuf\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EGet the Protocol Compiler \u003Ccode\u003Eprotoc\u003C\u002Fcode\u003E: download from\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EThen run a command like \u003Ccode\u003Eprotoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C\u002Fcode\u003E, you can get the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from\u003C\u002Fp\u003E\n\u003Ccode\u003E.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EWhen the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file generated, the protocol buffers environment is\nready.\u003C\u002Fp\u003E\n\u003Cp\u003EBack to our game, we should create a \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file, named\u003C\u002Fp\u003E\n\u003Ccode\u003Ecard-game.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EThe first line in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Esyntax = &quot;proto3&quot;;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhich means which version of Protobuf we are using.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine the enum of Cmd:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eenum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eenum Cmd is for routing, will be introduced later.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine MainMessage message:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine data message like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen, generate our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the episode3 demo show, run command bellow in directory proto.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EWindows\u003C\u002Fp\u003E\n\u003Ccode\u003E.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMacOS\u003C\u002Fp\u003E\n\u003Ccode\u003E.\u002Fprotoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENow, we have our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from the \u003Ccode\u003E.proto\u003C\u002Fcode\u003E in which\nwe define message.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s encoding and decoding message with protocol buffers.\u003C\u002Fp\u003E\n\u003Cp\u003EEncoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDecoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EAttributes defined as \u003Cstrong\u003Eseat_number\u003C\u002Fstrong\u003E in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be\ncall like getSeatNumber and setSeatNumebr.\u003C\u002Fli\u003E\n\u003Cli\u003EAttributes defined as \u003Cstrong\u003Erepeated\u003C\u002Fstrong\u003E type in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E",readingTime:"3 min read"},{title:"Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React",slug:"create-2d-graphical-interface-with-react-e6",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-29T21:55:15.361Z",excerpt:"This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.",tags:b,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 6 | Create 2D graphical interface with React\u003C\u002Fh2\u003E\n\u003Cp\u003EThis section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api. The following is an abstracted interface:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eexport interface IGameSceneView &#123;\n    getViewComponent(name: string),\n    getNewViewComponent(comp),\n    getChild(childPath, parent),\n    addClickListener(comp, handler, target),\n    setCard(card, name),\n    setLabel(labelComp, text),\n    removeAllChildren(parent),\n    addChild(child, parent),\n    isCardSelected(card),\n    toggleCardSelectedStatus(card),\n    showComponent(comp),\n    hideComponent(comp)\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECompared with cocos creator, the implementation of react is more operable at the code level. The styles of interface elements are all implemented by handwritten code. The hot-reload that comes with create-react-app also responds to changes very quickly. There is a time to switch editors and wait for the editor to refresh, which is very lightweight.\u003C\u002Fp\u003E\n\u003Cp\u003ECode reference \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThe next article mainly introduces the comparison between cocos creator and react implementation in development.\u003C\u002Fp\u003E\n\u003Cp\u003E本节主要是用react实现UI视图。\n在本节之前，已经用cocos creator实现了一个UI视图版本，为了重用基础框架，我们将游戏逻辑进行抽象，并将与视图引擎api相关的逻辑解耦出来。\n下面是抽象出来的一个接口：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EIGameSceneView\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetNewViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EchildPath\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddClickListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E handler\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E target\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetCard\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetLabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003ElabelComp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E text\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EremoveAllChildren\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eparent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Echild\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EtoggleCardSelectedStatus\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EshowComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhideComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E相对于cocos creator，react的实现在代码层面可操作性较强，体现在界面元素的样式都通过手写代码来实现，create-react-app自带的hot-reload也非常快地反馈变更，不会有切换编辑器和等待编辑器刷新的时间，非常轻量的感觉。\u003C\u002Fp\u003E\n\u003Cp\u003E代码参考 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E下一篇主要介绍cocos creator 与 react 实现在开发上的对比。\u003C\u002Fp\u003E",readingTime:"2 min read"},{title:"Make a multiplayer card game - Episode 1",slug:"create-a-simple-server-and-client-from-scratch-e1",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-01T21:55:15.361Z",excerpt:"Create a simple server and client from scratch",tags:c,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C\u002Fh2\u003E\n\u003Cp\u003EIn the coming weeks, I’ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame “Doudizhu”, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C\u002Fp\u003E\n\u003Cp\u003EParts including:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Ecreate a simple server and client\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with bots\u003C\u002Fli\u003E\n\u003Cli\u003Ecommunicate with server by protobuf\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with other players\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with Cocos Creator\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with React\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 3D graphical interface with Three.js\u003C\u002Fli\u003E\n\u003Cli\u003Eadd physical lib ammo.js to add a tiny game\u003C\u002Fli\u003E\n\u003Cli\u003Econnect to Web3 world\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Cem\u003Eopen your terminal, input \u003Ccode\u003Enode -v\u003C\u002Fcode\u003E, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\"\u003Ehttps:\u002F\u002Fnodejs.org\u003C\u002Fa\u003E.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Edirectory structure :\n\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644775769474\u002F2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ecreate a server, server\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E server \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E net\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcreateServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Welcome, friend.\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nserver\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elisten\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"server listening on 127.0.0.1:8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Ecreate client, client\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E socket \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003Enet\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ESocket\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Econnect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  host\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"127.0.0.1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  port\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E onConnected\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"error\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EonConnected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emsg\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E data \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello, world!\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Erun :\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd server\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd client\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eresult:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644776034549\u002Ft-Jir1j9R.png\" alt=\"demo0-cmd-result.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis episode is end here, the complete demo can be found on\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAny problems, discussion is welcome.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EIn the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for your reading.\u003C\u002Fp\u003E",readingTime:"2 min read"}]},{title:"Play cards in terminal with bots - Episode 2",slug:"play-cards-in-terminal-with-bots-e2",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-08T21:55:15.361Z",excerpt:"Play cards in terminal with bots",tags:["Tutorial:Make a multiplayer card game"],html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-2--play-cards-in-terminal-with-bots\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-2--play-cards-in-terminal-with-bots\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 2 | Play cards in terminal with bots\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EBefore the tech content, I can’t help but express my feeling after writing my\nfirst blog post.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cblockquote\u003E\u003Cp\u003EI have learned a lot from writing blog. I will never understand the benefits\ncontained in it before I wrote the first blog.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cblockquote\u003E\u003Cp\u003EThe output of the content will prompt you to review the known knowledge. In\nthe process of reviewing the known knowledge, you will comprehend new\ncognition from the old knowledge by sorting out and summarizing the knowledge.\nIn order to make it easier for readers to understand, you will understand the\npreviously vague knowledge points by learning new knowledge.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cblockquote\u003E\u003Cp\u003EAt the same time, I began to understand the author’s gratitude to his family\nin the preface of the book. Content output is a time-consuming and\nlabor-intensive thing that requires a high degree of concentration.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cblockquote\u003E\u003Cp\u003EIf you are a developer and have not started your own blog writing, it is\nrecommended to start now, no matter the content is good or bad, take the first\nstep and feel the magical power of the output of the content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EBased on the server and client we had create in the previous episode, we\nconcentrate on the logic of game process flow this time. For easy understanding,\nwe ignore some process such as calculating score which we will supplement in the\nmulti player version.\u003C\u002Fp\u003E\n\u003Cp\u003EFirst of all, have a look at the new directory structure:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1645975508993\u002FSvw37SWa5.png\" alt=\"Screen Shot 2022-02-27 at 23.24.54.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAs we can see above, we add a directory named share, which will be use by both\nclient and server.\u003C\u002Fp\u003E\n\u003Ccode\u003Ehelper.js for common logic.\u003C\u002Fcode\u003E\n\u003Ccode\u003Eproto.js for message definitions.\u003C\u002Fcode\u003E\n\u003Ccode\u003Erule-checker.js for rule of our card game &quot;Doudizhu&quot;.\u003C\u002Fcode\u003E\n\u003Col\u003E\u003Cli\u003EDefine messages between client and server.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003Eshare\u002Fproto.js:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction generateEnum(protoArr) &#123;\n    let _enum = &#123;&#125;;\n    for (let i = 0; i &lt; protoArr.length; i++) &#123;\n        const _protoName = protoArr[i];\n        const _cmdID = i;\n        _enum[_enum[_protoName] = _cmdID] = _protoName;\n    &#125;\n    return _enum;\n&#125;\n\nconst ENUM_CMD_FN = generateEnum(\n    [\n        &quot;ready_C2S&quot;,\n        &quot;dealCards_S2C&quot;,\n        &quot;competeForLandLordRole_C2S&quot;,\n        &quot;playTurn&quot;,\n        &quot;playCards_C2S&quot;,\n        &quot;playCards_S2C&quot;,\n        &quot;notAllowedByRule_S2C&quot;,\n        &quot;gameEnd_S2C&quot;\n    ]);\n\nmodule.exports = &#123; ENUM_CMD_FN: ENUM_CMD_FN &#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThe codes above create a enum like structure, which make the communication\nintuitive. We define the function in client and server with the same name\ncreated in it.\u003C\u002Fp\u003E\n\u003Cp\u003EWe encode message by the cmdID. server\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data)&#123;\n    let _header = Buffer.alloc(1);\n    _header.writeUInt8(cmd);\n    let _body = Buffer.from(JSON.stringify(data));\n    const _dataBuffer = Buffer.concat([_header, _body]);\n    return _dataBuffer;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EAnd decode message by cmdID to find the function to execute. server\u002Findex.js\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(data) &#123;\n    let _cmd = data.readUInt8();\n    let _body = JSON.parse(data.slice(1));\n    const _funcName = ENUM_CMD_FN[_cmd];\n    if (_funcName &amp;&amp; typeof _this[_funcName] == &quot;function&quot;) _this[_funcName](_body);\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution: the function called through _this[_funcName] must be define as:\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Ethis.dealCards_S2C = function (data) &#123;\n    let _cards = data.cards;\n    mCardsArr = sortByValue(_cards);\n    let _myHandCardsShowArr = convert2ReadableNames(mCardsArr);\n    console.log(&#39;Deal cards complete, your seat number is-&gt; &#39;, data.seatNumber, &#39;your cards-&gt;&#39;, _myHandCardsShowArr.join(&#39;,&#39;));\n    console.log(&#39;Select a score to confirm role (you can input 1|2|3, the one who select the biggest number will be the land lord, and the base score is the selected number.): &#39;);\n    const _score = getInputFromCmd();\n    this.competeForLandLordRole_C2S(_score);\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003Edefine like function dealCards_S2C(), can not be found.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EThe key point of this episode is all above, other codes are all about the game\nprocess flow and rules which has introduce in my\n\u003Ca href=\"https:\u002F\u002Flizhiyu.me\u002Fprior-knowledge-for-episode-2\" rel=\"nofollow\"\u003Eprevious post\u003C\u002Fa\u003E. If you has\ninterest in this game, please clone the demo and play with the bots.\u003C\u002Fp\u003E\n\u003Cp\u003EThe complete demo can be found on:\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode2\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode2\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAny problems, discussion is welcome.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EIn the next episode, we will add the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eprotobuf.js\u003C\u002Fa\u003E which is most popular\nin game development to define our messages between client and server.\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for your reading.\u003C\u002Fp\u003E",readingTime:"3 min read",relatedPosts:[{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:a,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EProtocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https:\u002F\u002Fanuragthakur.hashnode.dev\u002Fprotobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\"\u003EWhy Google moved from JSON to Protocol Buffers?\u003C\u002Fa\u003E\nintroduce.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EI used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EYou can clone\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode3\" rel=\"nofollow\"\u003Edemo for episode3\u003C\u002Fa\u003E\nwhich including all the bellow content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EAccording to the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eofficial tutorial\u003C\u002Fa\u003E, two steps\nshould be done:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EInstall the runtime library \u003Ccode\u003Egoogle-protobuf\u003C\u002Fcode\u003E:\u003Ccode\u003Enpm install\ngoogle-protobuf\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EGet the Protocol Compiler \u003Ccode\u003Eprotoc\u003C\u002Fcode\u003E: download from\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EThen run a command like \u003Ccode\u003Eprotoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C\u002Fcode\u003E, you can get the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from\u003C\u002Fp\u003E\n\u003Ccode\u003E.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EWhen the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file generated, the protocol buffers environment is\nready.\u003C\u002Fp\u003E\n\u003Cp\u003EBack to our game, we should create a \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file, named\u003C\u002Fp\u003E\n\u003Ccode\u003Ecard-game.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EThe first line in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Esyntax = &quot;proto3&quot;;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhich means which version of Protobuf we are using.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine the enum of Cmd:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eenum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eenum Cmd is for routing, will be introduced later.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine MainMessage message:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine data message like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen, generate our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the episode3 demo show, run command bellow in directory proto.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EWindows\u003C\u002Fp\u003E\n\u003Ccode\u003E.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMacOS\u003C\u002Fp\u003E\n\u003Ccode\u003E.\u002Fprotoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENow, we have our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from the \u003Ccode\u003E.proto\u003C\u002Fcode\u003E in which\nwe define message.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s encoding and decoding message with protocol buffers.\u003C\u002Fp\u003E\n\u003Cp\u003EEncoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDecoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EAttributes defined as \u003Cstrong\u003Eseat_number\u003C\u002Fstrong\u003E in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be\ncall like getSeatNumber and setSeatNumebr.\u003C\u002Fli\u003E\n\u003Cli\u003EAttributes defined as \u003Cstrong\u003Erepeated\u003C\u002Fstrong\u003E type in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E",readingTime:"3 min read"},{title:"Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React",slug:"create-2d-graphical-interface-with-react-e6",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-29T21:55:15.361Z",excerpt:"This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.",tags:b,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 6 | Create 2D graphical interface with React\u003C\u002Fh2\u003E\n\u003Cp\u003EThis section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api. The following is an abstracted interface:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eexport interface IGameSceneView &#123;\n    getViewComponent(name: string),\n    getNewViewComponent(comp),\n    getChild(childPath, parent),\n    addClickListener(comp, handler, target),\n    setCard(card, name),\n    setLabel(labelComp, text),\n    removeAllChildren(parent),\n    addChild(child, parent),\n    isCardSelected(card),\n    toggleCardSelectedStatus(card),\n    showComponent(comp),\n    hideComponent(comp)\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECompared with cocos creator, the implementation of react is more operable at the code level. The styles of interface elements are all implemented by handwritten code. The hot-reload that comes with create-react-app also responds to changes very quickly. There is a time to switch editors and wait for the editor to refresh, which is very lightweight.\u003C\u002Fp\u003E\n\u003Cp\u003ECode reference \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThe next article mainly introduces the comparison between cocos creator and react implementation in development.\u003C\u002Fp\u003E\n\u003Cp\u003E本节主要是用react实现UI视图。\n在本节之前，已经用cocos creator实现了一个UI视图版本，为了重用基础框架，我们将游戏逻辑进行抽象，并将与视图引擎api相关的逻辑解耦出来。\n下面是抽象出来的一个接口：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EIGameSceneView\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetNewViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EchildPath\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddClickListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E handler\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E target\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetCard\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetLabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003ElabelComp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E text\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EremoveAllChildren\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eparent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Echild\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EtoggleCardSelectedStatus\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EshowComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhideComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E相对于cocos creator，react的实现在代码层面可操作性较强，体现在界面元素的样式都通过手写代码来实现，create-react-app自带的hot-reload也非常快地反馈变更，不会有切换编辑器和等待编辑器刷新的时间，非常轻量的感觉。\u003C\u002Fp\u003E\n\u003Cp\u003E代码参考 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E下一篇主要介绍cocos creator 与 react 实现在开发上的对比。\u003C\u002Fp\u003E",readingTime:"2 min read"},{title:"Make a multiplayer card game - Episode 1",slug:"create-a-simple-server-and-client-from-scratch-e1",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-01T21:55:15.361Z",excerpt:"Create a simple server and client from scratch",tags:c,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C\u002Fh2\u003E\n\u003Cp\u003EIn the coming weeks, I’ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame “Doudizhu”, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C\u002Fp\u003E\n\u003Cp\u003EParts including:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Ecreate a simple server and client\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with bots\u003C\u002Fli\u003E\n\u003Cli\u003Ecommunicate with server by protobuf\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with other players\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with Cocos Creator\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with React\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 3D graphical interface with Three.js\u003C\u002Fli\u003E\n\u003Cli\u003Eadd physical lib ammo.js to add a tiny game\u003C\u002Fli\u003E\n\u003Cli\u003Econnect to Web3 world\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Cem\u003Eopen your terminal, input \u003Ccode\u003Enode -v\u003C\u002Fcode\u003E, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\"\u003Ehttps:\u002F\u002Fnodejs.org\u003C\u002Fa\u003E.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Edirectory structure :\n\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644775769474\u002F2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ecreate a server, server\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E server \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E net\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcreateServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Welcome, friend.\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nserver\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elisten\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"server listening on 127.0.0.1:8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Ecreate client, client\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E socket \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003Enet\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ESocket\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Econnect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  host\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"127.0.0.1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  port\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E onConnected\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"error\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EonConnected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emsg\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E data \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello, world!\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Erun :\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd server\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd client\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eresult:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644776034549\u002Ft-Jir1j9R.png\" alt=\"demo0-cmd-result.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis episode is end here, the complete demo can be found on\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAny problems, discussion is welcome.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EIn the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for your reading.\u003C\u002Fp\u003E",readingTime:"2 min read"}]},{title:"Make a multiplayer card game - Episode 1",slug:"create-a-simple-server-and-client-from-scratch-e1",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-01T21:55:15.361Z",excerpt:"Create a simple server and client from scratch",tags:c,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C\u002Fh2\u003E\n\u003Cp\u003EIn the coming weeks, I’ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame “Doudizhu”, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C\u002Fp\u003E\n\u003Cp\u003EParts including:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Ecreate a simple server and client\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with bots\u003C\u002Fli\u003E\n\u003Cli\u003Ecommunicate with server by protobuf\u003C\u002Fli\u003E\n\u003Cli\u003Eplay cards in terminal with other players\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with Cocos Creator\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 2D graphical interface with React\u003C\u002Fli\u003E\n\u003Cli\u003Ecreate 3D graphical interface with Three.js\u003C\u002Fli\u003E\n\u003Cli\u003Eadd physical lib ammo.js to add a tiny game\u003C\u002Fli\u003E\n\u003Cli\u003Econnect to Web3 world\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Cem\u003Eopen your terminal, input \u003Ccode\u003Enode -v\u003C\u002Fcode\u003E, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\"\u003Ehttps:\u002F\u002Fnodejs.org\u003C\u002Fa\u003E.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Edirectory structure :\n\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644775769474\u002F2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ecreate a server, server\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E server \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E net\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcreateServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EhandlerData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Welcome, friend.\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esocket\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nserver\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elisten\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"server listening on 127.0.0.1:8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Ecreate client, client\u002Findex.js:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\n\t\u003Cpre class=\"language-ts\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-ts\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E net \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"net\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E socket \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003Enet\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ESocket\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Econnect\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  host\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"127.0.0.1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  port\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E8080\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E onConnected\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"data\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\nsocket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"error\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuffer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EonConnected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Edecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token builtin\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eparse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Emsg\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E bufferData \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E Buffer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token string-property property\"\u003E\"msg\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E data \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  socket\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ewrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EbufferData\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EstartGame\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello, world!\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Cp\u003Erun :\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd server\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ecd client\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Enode index.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eresult:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.hashnode.com\u002Fres\u002Fhashnode\u002Fimage\u002Fupload\u002Fv1644776034549\u002Ft-Jir1j9R.png\" alt=\"demo0-cmd-result.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis episode is end here, the complete demo can be found on\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode1\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAny problems, discussion is welcome.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EIn the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks for your reading.\u003C\u002Fp\u003E",readingTime:"2 min read",relatedPosts:[{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:a,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EProtocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https:\u002F\u002Fanuragthakur.hashnode.dev\u002Fprotobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\"\u003EWhy Google moved from JSON to Protocol Buffers?\u003C\u002Fa\u003E\nintroduce.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EI used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EYou can clone\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode3\" rel=\"nofollow\"\u003Edemo for episode3\u003C\u002Fa\u003E\nwhich including all the bellow content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EAccording to the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eofficial tutorial\u003C\u002Fa\u003E, two steps\nshould be done:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EInstall the runtime library \u003Ccode\u003Egoogle-protobuf\u003C\u002Fcode\u003E:\u003Ccode\u003Enpm install\ngoogle-protobuf\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EGet the Protocol Compiler \u003Ccode\u003Eprotoc\u003C\u002Fcode\u003E: download from\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EThen run a command like \u003Ccode\u003Eprotoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C\u002Fcode\u003E, you can get the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from\u003C\u002Fp\u003E\n\u003Ccode\u003E.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EWhen the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file generated, the protocol buffers environment is\nready.\u003C\u002Fp\u003E\n\u003Cp\u003EBack to our game, we should create a \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file, named\u003C\u002Fp\u003E\n\u003Ccode\u003Ecard-game.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EThe first line in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Esyntax = &quot;proto3&quot;;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhich means which version of Protobuf we are using.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine the enum of Cmd:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eenum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eenum Cmd is for routing, will be introduced later.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine MainMessage message:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine data message like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen, generate our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the episode3 demo show, run command bellow in directory proto.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EWindows\u003C\u002Fp\u003E\n\u003Ccode\u003E.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMacOS\u003C\u002Fp\u003E\n\u003Ccode\u003E.\u002Fprotoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENow, we have our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from the \u003Ccode\u003E.proto\u003C\u002Fcode\u003E in which\nwe define message.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s encoding and decoding message with protocol buffers.\u003C\u002Fp\u003E\n\u003Cp\u003EEncoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDecoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EAttributes defined as \u003Cstrong\u003Eseat_number\u003C\u002Fstrong\u003E in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be\ncall like getSeatNumber and setSeatNumebr.\u003C\u002Fli\u003E\n\u003Cli\u003EAttributes defined as \u003Cstrong\u003Erepeated\u003C\u002Fstrong\u003E type in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E",readingTime:"3 min read"},{title:"Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React",slug:"create-2d-graphical-interface-with-react-e6",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-29T21:55:15.361Z",excerpt:"This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.",tags:b,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 6 | Create 2D graphical interface with React\u003C\u002Fh2\u003E\n\u003Cp\u003EThis section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api. The following is an abstracted interface:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eexport interface IGameSceneView &#123;\n    getViewComponent(name: string),\n    getNewViewComponent(comp),\n    getChild(childPath, parent),\n    addClickListener(comp, handler, target),\n    setCard(card, name),\n    setLabel(labelComp, text),\n    removeAllChildren(parent),\n    addChild(child, parent),\n    isCardSelected(card),\n    toggleCardSelectedStatus(card),\n    showComponent(comp),\n    hideComponent(comp)\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECompared with cocos creator, the implementation of react is more operable at the code level. The styles of interface elements are all implemented by handwritten code. The hot-reload that comes with create-react-app also responds to changes very quickly. There is a time to switch editors and wait for the editor to refresh, which is very lightweight.\u003C\u002Fp\u003E\n\u003Cp\u003ECode reference \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThe next article mainly introduces the comparison between cocos creator and react implementation in development.\u003C\u002Fp\u003E\n\u003Cp\u003E本节主要是用react实现UI视图。\n在本节之前，已经用cocos creator实现了一个UI视图版本，为了重用基础框架，我们将游戏逻辑进行抽象，并将与视图引擎api相关的逻辑解耦出来。\n下面是抽象出来的一个接口：\u003C\u002Fp\u003E\n\u003Cpre class=\"language-typescript\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-typescript\"\u003E\u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EIGameSceneView\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetNewViewComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EgetChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EchildPath\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddClickListener\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E handler\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E target\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetCard\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EsetLabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003ElabelComp\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E text\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EremoveAllChildren\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eparent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EaddChild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Echild\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E parent\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EisCardSelected\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EtoggleCardSelectedStatus\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecard\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EshowComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EhideComponent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecomp\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E相对于cocos creator，react的实现在代码层面可操作性较强，体现在界面元素的样式都通过手写代码来实现，create-react-app自带的hot-reload也非常快地反馈变更，不会有切换编辑器和等待编辑器刷新的时间，非常轻量的感觉。\u003C\u002Fp\u003E\n\u003Cp\u003E代码参考 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode6-react\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E下一篇主要介绍cocos creator 与 react 实现在开发上的对比。\u003C\u002Fp\u003E",readingTime:"2 min read"},{title:"Make a multiplayer card game - Episode 5 | Create 2D graphical interface with Cocos Creator",slug:"make-a-multiplayer-card-game-episode-5",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-03-22T21:55:15.361Z",excerpt:"Create 2D graphical interface with Cocos Creator",tags:d,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-5--create-2d-graphical-interface-with-cocos-creator\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-5--create-2d-graphical-interface-with-cocos-creator\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 5 | Create 2D graphical interface with Cocos Creator\u003C\u002Fh2\u003E\n\u003Cp\u003EThis chapter is almost a month away from the previous chapter. During this\nperiod, it is mainly about the transformation and reconstruction of the client.\nThe content of the overall client is almost completely different from the\ncommand-line version of the previous chapter.\u003C\u002Fp\u003E\n\u003Cp\u003EAccording to the previous plan, I converted all the code written in JS to TS and\ntransplanted the command-line interactive interface to the conventional game\ninteractive interface (using cocos creator game engine).\u003C\u002Fp\u003E\n\u003Cp\u003EPreviously, in order to quickly realize the function, the server and client used\nonly one file to encode. Up to now, the client code of the project has been\nmodularized, and the classic PureMVC library has been introduced to completely\ndecouple the UI interaction and data, network messages and game operation logic,\nso as to create conditions for extracting the code of the framework independent\nof the game engine (it is planned to use one framework to access different view\nlayer engines).\u003C\u002Fp\u003E\n\u003Cp\u003EPureMVC has been introduced in previous articles. The core idea is to decouple\nview and data. The data is processed by proxy and the facade is controlled by\nproxy.\u003C\u002Fp\u003E\n\u003Cp\u003ECompared with the previous version, some changes are involved: -The difference\nbetween socket and web socket API. It mainly includes the names of several\nmonitored events and the interfaces for sending messages. -UI display layer\nindependent. Command line output and game engine rendering view interactive\noperation interface.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode5-UICocosCreator\" rel=\"nofollow\"\u003Edemo url\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E本章离前一章快一个月了，在这段时间，主要是对客户端的改造和重构，整体客户端的内容几乎完全不同于上一章命令行版本。\u003C\u002Fp\u003E\n\u003Cp\u003E按照之前的计划，我将之前用js写的代码全部转为了ts，将命令行交互界面移植到常规的游戏交互界面（利用CocosCreator游戏引擎）。\u003C\u002Fp\u003E\n\u003Cp\u003E之前为了快速实现功能，服务器和客户端分别只用一个文件进行编码。\n截至目前，项目客户端代码进行了模块化改造，引入了经典的PureMVC库，将UI交互和数据，网络消息和游戏操作逻辑完全解藕，为后面提取与游戏引擎无关的框架（计划用一个框架接入不同视图层引擎）代码创造条件。\u003C\u002Fp\u003E\n\u003Cp\u003E在之前的文章里面已经介绍过PureMVC，核心的思想就是视图与数据解藕。\n通过一个门面类（Facade）来统管框架，用视图代理（Mediator）控制显示组件逻辑，用数据模型代理（Proxy）存储和处理数据。\u003C\u002Fp\u003E\n\u003Cp\u003E相对于上一版，涉及到的一些改动：\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003Esocket 和 web socket api 的区别。主要是几个监听的事件名字，和发送消息的接口。\u003C\u002Fli\u003E\n\u003Cli\u003Eui显示层独立。命令行输出和游戏引擎渲染视图交互操作界面。\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode5-UICocosCreator\" rel=\"nofollow\"\u003Edemo url\u003C\u002Fa\u003E\u003C\u002Fp\u003E",readingTime:"4 min read"}]},{slug:"customization",title:"How to Customize this Template",date:"1997-04-22T21:55:27.154Z",excerpt:"How to customize what you're seeing here and make it your own.",coverImage:"\u002Fimages\u002Fposts\u002Fcustomization.jpg",tags:e,html:"\u003Cp\u003EIn general, content can be modified by editing the \u003Cstrong\u003Eorganisms\u003C\u002Fstrong\u003E and the pages themselves. Below is a list of the most common changes that you may want to make.\u003C\u002Fp\u003E\n\u003Ch2 id=\"domainsite-url\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#domainsite-url\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EDomain\u002Fsite URL\u003C\u002Fh2\u003E\n\u003Cp\u003EThe first thing you might want to do is replace the domain of of the site with your own. There are two places where you need to do that:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003EIn the \u003Ccode\u003Epackage.json\u003C\u002Fcode\u003E file, check the \u003Ccode\u003Epostbuild\u003C\u002Fcode\u003E script. Change the domain there to your own, so it ends up like this: \u003Ccode\u003Esvelte-sitemap --domain https:\u002F\u002Fyour-domain.com\u003C\u002Fcode\u003E. This is used to generate the sitemap of your website, which is used by search engines to index your site.\u003C\u002Fli\u003E\n\u003Cli\u003EIn the \u003Ccode\u003Esrc\u002Flib\u002Fdata\u002Fmeta.ts\u003C\u002Fcode\u003E file, change the \u003Ccode\u003EsiteBaseUrl\u003C\u002Fcode\u003E property to your own domain. This is used in multiple parts of the app wherever the site needs to link to itself.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Ch2 id=\"headersite-logo\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#headersite-logo\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EHeader\u002Fsite logo\u003C\u002Fh2\u003E\n\u003Cp\u003ETo replace the logo that appears in the header, modify or replace the contents of the \u003Ccode\u003ELogo.svelte\u003C\u002Fcode\u003E atom.\u003C\u002Fp\u003E\n\u003Cp\u003EThe links that appear on the header can be modified directly in the \u003Ccode\u003EHeader.svelte\u003C\u002Fcode\u003E organism.\u003C\u002Fp\u003E\n\u003Ch2 id=\"hero-section\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#hero-section\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EHero section\u003C\u002Fh2\u003E\n\u003Cp\u003EThe hero section is the first section of the site’s home page. It is composed of a Heading, the \u003Cem\u003Eintro\u003C\u002Fem\u003E text, and a list of buttons\u002FCTAs. The contents of this section can be modified directly in the \u003Ccode\u003EHero.svelte\u003C\u002Fcode\u003E organism.\u003C\u002Fp\u003E\n\u003Ch2 id=\"about-section\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#about-section\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAbout section\u003C\u002Fh2\u003E\n\u003Cp\u003EThe about section contains another headline, a paragraph of text, some social media links, and optionally an image. The contents of this section can be modified directly in the \u003Ccode\u003EAbout.svelte\u003C\u002Fcode\u003E organism.\u003C\u002Fp\u003E\n\u003Ch2 id=\"social-links\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#social-links\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003ESocial Links\u003C\u002Fh2\u003E\n\u003Cp\u003EThe social links are contained in the \u003Ccode\u003ESocials.svelte\u003C\u002Fcode\u003E molecule and can be used in any page. This template shows them on the About section and in the Footer.\u003C\u002Fp\u003E\n\u003Ch2 id=\"footer\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#footer\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EFooter\u003C\u002Fh2\u003E\n\u003Cp\u003EThe footer contains some credits, a list of social links, and the RSS\u002FTheme toggle. The contents of this section can be modified directly in the \u003Ccode\u003EFooter.svelte\u003C\u002Fcode\u003E organism.\u003C\u002Fp\u003E\n\u003Ch2 id=\"colors\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#colors\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EColors\u003C\u002Fh2\u003E\n\u003Cp\u003EYou can change the color palette of the website just by tweaking the \u003Ccode\u003E_themes.scss\u003C\u002Fcode\u003E file. The file uses the \u003Ccode\u003Edefine-color\u003C\u002Fcode\u003E scss function to automatically set the color variables in Hex, RGB and HSL formats, so you can choose whichever format you need.\u003C\u002Fp\u003E\n\u003Cp\u003EThe main theme colors (primary and secondary) have two variants: shade and tint. The shade is a lighter version of the color (darker in dark mode), and the tint should almost match the page’s background, so that in light mode, it’s really bright, and in dark mode, it’s really dark.\u003C\u002Fp\u003E\n\u003Ch2 id=\"fonts\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#fonts\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EFonts\u003C\u002Fh2\u003E\n\u003Cp\u003EThis template uses the Inter, Merriweather and Ubuntu Mono font families. You can change the font family by editing the \u003Ccode\u003E_variables.scss\u003C\u002Fcode\u003E file, and the code is already set up to accept a default font, a heading font, and a monospace font.\u003C\u002Fp\u003E\n\u003Cp\u003EI recommend using \u003Ca href=\"https:\u002F\u002Ffontsource.org\u002F\" rel=\"nofollow\"\u003EFontsource\u003C\u002Fa\u003E to import the fonts you need, or self-hosting them. In case you’re using Fontsource, you can import the fonts in \u003Ccode\u003Eglobal.scss\u003C\u002Fcode\u003E file to make sure they’re available in the entire site.\u003C\u002Fp\u003E\n\u003Ch2 id=\"favicon\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#favicon\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EFavicon\u003C\u002Fh2\u003E\n\u003Cp\u003EFavicons are located in the \u003Ccode\u003Estatic\u002Ffavicons\u003C\u002Fcode\u003E folder. I like to use \u003Ca href=\"https:\u002F\u002Frealfavicongenerator.net\" rel=\"nofollow\"\u003EReal Favicon Generator\u003C\u002Fa\u003E to generate mine, but you can use any other tool you like. I wrote \u003Ca href=\"https:\u002F\u002Ffantinel.dev\u002Ffixing-favicons\" rel=\"nofollow\"\u003Ea blog post about Favicons\u003C\u002Fa\u003E in case you want to learn more about them.\u003C\u002Fp\u003E\n\u003Ch2 id=\"social-media-link-preview\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#social-media-link-preview\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003ESocial Media Link Preview\u003C\u002Fh2\u003E\n\u003Cp\u003EYou probably want to customize how links to your website look when posted on social media\u002Fmessaging apps. To do that, you can edit the info in \u003Ccode\u003Esrc\u002Flib\u002Fdata\u002Fmeta.ts\u003C\u002Fcode\u003E. There, you can edit the site’s title, description, tags (used by search engines) and the image that appears when sharing a link.\u003C\u002Fp\u003E",readingTime:"3 min read",relatedPosts:[{title:"How Blog Posts Work",slug:"blog-posts",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"1997-04-22T21:55:15.361Z",excerpt:"How to manage existing blog posts and create new ones",tags:f,html:"\u003Cp\u003EAll blog posts are located inside the \u003Ccode\u003Esrc\u002Froutes\u002F(blog-article)\u003C\u002Fcode\u003E folder. Each folder inside it represents a blog post, and each folder has a \u003Ccode\u003E+page.md\u003C\u002Fcode\u003E file, which is the file that contains the post’s content.\u003C\u002Fp\u003E\n\u003Cp\u003EThis way, the URL for each blog post is generated with the folder’s name. For example, the folder \u003Ccode\u003Esrc\u002Froutes\u002F(blog-article)\u002Fhow-blog-posts-work\u003C\u002Fcode\u003E will generate the URL \u003Ccode\u003Ehttps:\u002F\u002Fmysite.com\u002Fhow-blog-posts-work\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EAll posts are Markdown files, which means you can use the \u003Ca href=\"https:\u002F\u002Fwww.markdownguide.org\u002Fbasic-syntax\" rel=\"nofollow\"\u003EMarkdown syntax\u003C\u002Fa\u003E in them, and it will work out of the box. However, since this projects uses \u003Ca href=\"https:\u002F\u002Fmdsvex.pngwn.io\u002F\" rel=\"nofollow\"\u003EMDsveX\u003C\u002Fa\u003E to parse Markdown, you can also use Svelte components inside them! This means that the components used in other pages can also be used in blog posts.\u003C\u002Fp\u003E\n\u003Cdiv class=\"callout-block info svelte-sxx0n0\"\u003E\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\"\u003E\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\"\u003E\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\u003E\u003C\u002Fpath\u003E\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\u003E\u003C\u002Fpath\u003E\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\u003E\u003C\u002Fpath\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\tThis is a Svelte component inside a Markdown file!\n\n\u003C\u002Fdiv\u003E\n\u003Ch2 id=\"processing\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#processing\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EProcessing\u003C\u002Fh2\u003E\n\u003Cp\u003EBesides the blog post page itself, the blog posts can be displayed in other places, such as the \u003Ccode\u003E\u002Fblog\u003C\u002Fcode\u003E page, which lists all blog posts, and the \u003Ccode\u003E&lt;RecentPosts&gt;\u003C\u002Fcode\u003E component, used in the home page.\u003C\u002Fp\u003E\n\u003Cp\u003ETo be able to do that, posts are processed in the \u003Ccode\u003Esrc\u002Flib\u002Fdata\u002Fblog-posts\u002Findex.ts\u003C\u002Fcode\u003E file. That file imports the blog post files and processes them, so we’re able to use some of the post’s metadata to list them. For example, we get the post’s title, cover image, and calculate the reading time based on its content, so that information is displayed in the blog post cards in the \u003Ccode\u003E\u002Fblog\u003C\u002Fcode\u003E page.\u003C\u002Fp\u003E\n\u003Cp\u003EThere is also some basic logic to get related posts based on a post’s tags. The logic should be straightforward enough to modify it to your needs.\u003C\u002Fp\u003E\n\u003Ch2 id=\"creating-a-new-post\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#creating-a-new-post\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECreating a new post\u003C\u002Fh2\u003E\n\u003Cp\u003ETo create a new post, create a new folder inside the \u003Ccode\u003Esrc\u002Froutes\u002F(blog-article)\u003C\u002Fcode\u003E folder, and inside it, create a \u003Ccode\u003E+page.md\u003C\u002Fcode\u003E file. The folder name will be used as the post’s URL slug, so make sure it’s a valid URL slug.\u003C\u002Fp\u003E\n\u003Cp\u003EInside the \u003Ccode\u003E+page.md\u003C\u002Fcode\u003E file, you must start with the front matter, which is a YAML-like syntax that is used to define metadata for the post. The front matter must be the first thing in the file, and must be separated from the rest of the content by three dashes (\u003Ccode\u003E---\u003C\u002Fcode\u003E). An example of a front matter is:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\u003Cdiv class=\"lang svelte-1pkpsrg\"\u003Emarkdown\u003C\u002Fdiv\u003E\n\t\u003Cpre class=\"language-md\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-md\"\u003E\u003Cspan class=\"token front-matter-block\"\u003E\u003Cspan class=\"token punctuation\"\u003E---\u003C\u002Fspan\u003E\n\u003Cspan class=\"token front-matter yaml language-yaml\"\u003Eslug: my-new-blog-post\ntitle: My New Blog Post\ndate: 2023-04-22T20:45:25.350Z\nexcerpt: A short description of the post\ncoverImage: \u002Fimages\u002Fposts\u002Fcover-image.jpg\ntags:\n  - Example\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E---\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Ch2 id=\"managing-blog-posts\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#managing-blog-posts\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EManaging blog posts\u003C\u002Fh2\u003E\n\u003Cp\u003EI highly recommend the \u003Ca href=\"https:\u002F\u002Ffrontmatter.codes\u002F\" rel=\"nofollow\"\u003EFront Matter VS Code extension\u003C\u002Fa\u003E to manage blog posts. It gives you a nice CMS-like UI to manage the front matter of all blog posts, as well as a preview of their content. It is, of course, optional, and you can manage everything directly in the Markdown files if you prefer.\u003C\u002Fp\u003E\n\u003Cimg srcset=\"\u002Fimages\u002Fposts\u002Ffrontmatter-preview-dashboard.avif, \u002Fimages\u002Fposts\u002Ffrontmatter-preview-dashboard.webp, \u002Fimages\u002Fposts\u002Ffrontmatter-preview-dashboard.png\" src=\"\u002Fimages\u002Fposts\u002Ffrontmatter-preview-dashboard.png\" alt=\"Screenshot of the Front Matter VS Code extension, showing the dashboard with all posts\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj full-bleed\"\u003E\n\u003Cimg srcset=\"\u002Fimages\u002Fposts\u002Ffrontmatter-preview-edit.avif, \u002Fimages\u002Fposts\u002Ffrontmatter-preview-edit.webp, \u002Fimages\u002Fposts\u002Ffrontmatter-preview-edit.png\" src=\"\u002Fimages\u002Fposts\u002Ffrontmatter-preview-edit.png\" alt=\"Screenshot of the Front Matter VS Code extension, showing the post editing UI\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj full-bleed\"\u003E\n\u003Ch2 id=\"rss\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#rss\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003ERSS\u003C\u002Fh2\u003E\n\u003Cp\u003EThis template automatically generates a RSS feed of your blog posts. It is generated in the \u003Ccode\u003Esrc\u002Froutes\u002Frss.xml\u002F+server.ts\u003C\u002Fcode\u003E file, and it is available at the \u003Ccode\u003E\u002Frss.xml\u003C\u002Fcode\u003E URL.\u003C\u002Fp\u003E",readingTime:"3 min read"},{slug:"project-structure",title:"Project Structure",date:"1997-04-22T21:55:21.800Z",excerpt:"How code and structure are organized.",coverImage:"\u002Fimages\u002Fposts\u002Fproject-structure.jpg",tags:g,html:"\u003Cp\u003EThis project follows the basic \u003Ca href=\"https:\u002F\u002Fkit.svelte.dev\u002Fdocs\u002Fproject-structure\" rel=\"nofollow\"\u003ESvelteKit structure\u003C\u002Fa\u003E, with some added conventions to make customization a post-management easier.\u003C\u002Fp\u003E\n\u003Ch2 id=\"components\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#components\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EComponents\u003C\u002Fh2\u003E\n\u003Cp\u003EThe components are organized following the \u003Ca href=\"https:\u002F\u002Fmedium.com\u002F@WeAreMobile1st\u002Fatomic-design-getting-started-916bc81bad0e\" rel=\"nofollow\"\u003EAtomic Design\u003C\u002Fa\u003E principles, albeit somewhat simplified. Components are in the \u003Ccode\u003Esrc\u002Flib\u002Fcomponents\u003C\u002Fcode\u003E folder, and are organized in the following way:\u003C\u002Fp\u003E\n\u003Ch3 id=\"atoms\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#atoms\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAtoms\u003C\u002Fh3\u003E\n\u003Cp\u003EAtoms are the most basic components, which can be seen as building blocks for other components. They’re small and self-contained, and do only one thing. Examples of atoms are buttons, inputs, and tags.\u003C\u002Fp\u003E\n\u003Ch3 id=\"molecules\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#molecules\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMolecules\u003C\u002Fh3\u003E\n\u003Cp\u003EMolecules are groups of atoms that work together to form a more complex component. Examples of molecules are cards, groups of links, or an alert callout.\u003C\u002Fp\u003E\n\u003Ch3 id=\"organisms\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#organisms\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EOrganisms\u003C\u002Fh3\u003E\n\u003Cp\u003EOrganisms, in this project, are code blocks that represent a section of a page, such as the header, footer and hero section. They can be used directly in a page as a sort of building block, so the page’s code can be as simple as this:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\u003Cdiv class=\"filename svelte-1pkpsrg\"\u003E+page.svelte\u003C\u002Fdiv\u003E\n\t\u003Cdiv class=\"lang svelte-1pkpsrg\"\u003Ehtml\u003C\u002Fdiv\u003E\n\t\u003Cpre class=\"language-html\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-html\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EHeader\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EHero\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EAbout\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EFooter\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Ch2 id=\"component-gallery\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#component-gallery\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EComponent Gallery\u003C\u002Fh2\u003E\n\u003Cp\u003EThis project uses \u003Ca href=\"https:\u002F\u002Fhistoire.dev\" rel=\"nofollow\"\u003EHistoire\u003C\u002Fa\u003E to be able to see and develop components in isolation. To open it, run \u003Ccode\u003Enpm run story:dev\u003C\u002Fcode\u003E. This way you can customize and build new components with placeholder content and without worrying about where to put them in a page.\u003C\u002Fp\u003E\n\u003Ch2 id=\"pages\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#pages\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPages\u003C\u002Fh2\u003E\n\u003Cp\u003EPages obey the default SvelteKit structure, but can be summarized as follows:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003EThere are two different file types: the pages (\u003Ccode\u003E+page.svelte\u003C\u002Fcode\u003E) and the layouts (\u003Ccode\u003E+layout.svelte\u003C\u002Fcode\u003E). Layouts are a way to reuse the same structure between different pages without having to duplicate code;\u003C\u002Fli\u003E\n\u003Cli\u003EThere are two different page layouts in this site: the “Waves” layout, which all pages inside the \u003Ccode\u003E(waves)\u003C\u002Fcode\u003E folder use, and the “Blog Article” layout, which all pages inside the \u003Ccode\u003E(blog-article)\u003C\u002Fcode\u003E folder use;\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Ch2 id=\"blog-posts\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#blog-posts\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBlog Posts\u003C\u002Fh2\u003E\n\u003Cp\u003ETo know how blog posts work and how to create new ones, check out \u003Ca href=\"\u002Fblog-posts\"\u003EHow Blog Posts Work\u003C\u002Fa\u003E.\u003C\u002Fp\u003E",readingTime:"2 min read"},{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:a,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EProtocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https:\u002F\u002Fanuragthakur.hashnode.dev\u002Fprotobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\"\u003EWhy Google moved from JSON to Protocol Buffers?\u003C\u002Fa\u003E\nintroduce.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EI used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EYou can clone\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode3\" rel=\"nofollow\"\u003Edemo for episode3\u003C\u002Fa\u003E\nwhich including all the bellow content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EAccording to the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eofficial tutorial\u003C\u002Fa\u003E, two steps\nshould be done:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EInstall the runtime library \u003Ccode\u003Egoogle-protobuf\u003C\u002Fcode\u003E:\u003Ccode\u003Enpm install\ngoogle-protobuf\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EGet the Protocol Compiler \u003Ccode\u003Eprotoc\u003C\u002Fcode\u003E: download from\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EThen run a command like \u003Ccode\u003Eprotoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C\u002Fcode\u003E, you can get the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from\u003C\u002Fp\u003E\n\u003Ccode\u003E.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EWhen the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file generated, the protocol buffers environment is\nready.\u003C\u002Fp\u003E\n\u003Cp\u003EBack to our game, we should create a \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file, named\u003C\u002Fp\u003E\n\u003Ccode\u003Ecard-game.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EThe first line in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Esyntax = &quot;proto3&quot;;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhich means which version of Protobuf we are using.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine the enum of Cmd:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eenum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eenum Cmd is for routing, will be introduced later.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine MainMessage message:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine data message like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen, generate our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the episode3 demo show, run command bellow in directory proto.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EWindows\u003C\u002Fp\u003E\n\u003Ccode\u003E.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMacOS\u003C\u002Fp\u003E\n\u003Ccode\u003E.\u002Fprotoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENow, we have our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from the \u003Ccode\u003E.proto\u003C\u002Fcode\u003E in which\nwe define message.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s encoding and decoding message with protocol buffers.\u003C\u002Fp\u003E\n\u003Cp\u003EEncoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDecoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EAttributes defined as \u003Cstrong\u003Eseat_number\u003C\u002Fstrong\u003E in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be\ncall like getSeatNumber and setSeatNumebr.\u003C\u002Fli\u003E\n\u003Cli\u003EAttributes defined as \u003Cstrong\u003Erepeated\u003C\u002Fstrong\u003E type in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E",readingTime:"3 min read"}]},{slug:"project-structure",title:"Project Structure",date:"1997-04-22T21:55:21.800Z",excerpt:"How code and structure are organized.",coverImage:"\u002Fimages\u002Fposts\u002Fproject-structure.jpg",tags:g,html:"\u003Cp\u003EThis project follows the basic \u003Ca href=\"https:\u002F\u002Fkit.svelte.dev\u002Fdocs\u002Fproject-structure\" rel=\"nofollow\"\u003ESvelteKit structure\u003C\u002Fa\u003E, with some added conventions to make customization a post-management easier.\u003C\u002Fp\u003E\n\u003Ch2 id=\"components\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#components\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EComponents\u003C\u002Fh2\u003E\n\u003Cp\u003EThe components are organized following the \u003Ca href=\"https:\u002F\u002Fmedium.com\u002F@WeAreMobile1st\u002Fatomic-design-getting-started-916bc81bad0e\" rel=\"nofollow\"\u003EAtomic Design\u003C\u002Fa\u003E principles, albeit somewhat simplified. Components are in the \u003Ccode\u003Esrc\u002Flib\u002Fcomponents\u003C\u002Fcode\u003E folder, and are organized in the following way:\u003C\u002Fp\u003E\n\u003Ch3 id=\"atoms\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#atoms\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAtoms\u003C\u002Fh3\u003E\n\u003Cp\u003EAtoms are the most basic components, which can be seen as building blocks for other components. They’re small and self-contained, and do only one thing. Examples of atoms are buttons, inputs, and tags.\u003C\u002Fp\u003E\n\u003Ch3 id=\"molecules\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#molecules\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMolecules\u003C\u002Fh3\u003E\n\u003Cp\u003EMolecules are groups of atoms that work together to form a more complex component. Examples of molecules are cards, groups of links, or an alert callout.\u003C\u002Fp\u003E\n\u003Ch3 id=\"organisms\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#organisms\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EOrganisms\u003C\u002Fh3\u003E\n\u003Cp\u003EOrganisms, in this project, are code blocks that represent a section of a page, such as the header, footer and hero section. They can be used directly in a page as a sort of building block, so the page’s code can be as simple as this:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\u003Cdiv class=\"filename svelte-1pkpsrg\"\u003E+page.svelte\u003C\u002Fdiv\u003E\n\t\u003Cdiv class=\"lang svelte-1pkpsrg\"\u003Ehtml\u003C\u002Fdiv\u003E\n\t\u003Cpre class=\"language-html\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-html\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EHeader\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EHero\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EAbout\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EFooter\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Ch2 id=\"component-gallery\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#component-gallery\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EComponent Gallery\u003C\u002Fh2\u003E\n\u003Cp\u003EThis project uses \u003Ca href=\"https:\u002F\u002Fhistoire.dev\" rel=\"nofollow\"\u003EHistoire\u003C\u002Fa\u003E to be able to see and develop components in isolation. To open it, run \u003Ccode\u003Enpm run story:dev\u003C\u002Fcode\u003E. This way you can customize and build new components with placeholder content and without worrying about where to put them in a page.\u003C\u002Fp\u003E\n\u003Ch2 id=\"pages\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#pages\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPages\u003C\u002Fh2\u003E\n\u003Cp\u003EPages obey the default SvelteKit structure, but can be summarized as follows:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003EThere are two different file types: the pages (\u003Ccode\u003E+page.svelte\u003C\u002Fcode\u003E) and the layouts (\u003Ccode\u003E+layout.svelte\u003C\u002Fcode\u003E). Layouts are a way to reuse the same structure between different pages without having to duplicate code;\u003C\u002Fli\u003E\n\u003Cli\u003EThere are two different page layouts in this site: the “Waves” layout, which all pages inside the \u003Ccode\u003E(waves)\u003C\u002Fcode\u003E folder use, and the “Blog Article” layout, which all pages inside the \u003Ccode\u003E(blog-article)\u003C\u002Fcode\u003E folder use;\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Ch2 id=\"blog-posts\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#blog-posts\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBlog Posts\u003C\u002Fh2\u003E\n\u003Cp\u003ETo know how blog posts work and how to create new ones, check out \u003Ca href=\"\u002Fblog-posts\"\u003EHow Blog Posts Work\u003C\u002Fa\u003E.\u003C\u002Fp\u003E",readingTime:"2 min read",relatedPosts:[{title:"How Blog Posts Work",slug:"blog-posts",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"1997-04-22T21:55:15.361Z",excerpt:"How to manage existing blog posts and create new ones",tags:f,html:"\u003Cp\u003EAll blog posts are located inside the \u003Ccode\u003Esrc\u002Froutes\u002F(blog-article)\u003C\u002Fcode\u003E folder. Each folder inside it represents a blog post, and each folder has a \u003Ccode\u003E+page.md\u003C\u002Fcode\u003E file, which is the file that contains the post’s content.\u003C\u002Fp\u003E\n\u003Cp\u003EThis way, the URL for each blog post is generated with the folder’s name. For example, the folder \u003Ccode\u003Esrc\u002Froutes\u002F(blog-article)\u002Fhow-blog-posts-work\u003C\u002Fcode\u003E will generate the URL \u003Ccode\u003Ehttps:\u002F\u002Fmysite.com\u002Fhow-blog-posts-work\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EAll posts are Markdown files, which means you can use the \u003Ca href=\"https:\u002F\u002Fwww.markdownguide.org\u002Fbasic-syntax\" rel=\"nofollow\"\u003EMarkdown syntax\u003C\u002Fa\u003E in them, and it will work out of the box. However, since this projects uses \u003Ca href=\"https:\u002F\u002Fmdsvex.pngwn.io\u002F\" rel=\"nofollow\"\u003EMDsveX\u003C\u002Fa\u003E to parse Markdown, you can also use Svelte components inside them! This means that the components used in other pages can also be used in blog posts.\u003C\u002Fp\u003E\n\u003Cdiv class=\"callout-block info svelte-sxx0n0\"\u003E\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\"\u003E\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\"\u003E\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\u003E\u003C\u002Fpath\u003E\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\u003E\u003C\u002Fpath\u003E\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\u003E\u003C\u002Fpath\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\tThis is a Svelte component inside a Markdown file!\n\n\u003C\u002Fdiv\u003E\n\u003Ch2 id=\"processing\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#processing\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EProcessing\u003C\u002Fh2\u003E\n\u003Cp\u003EBesides the blog post page itself, the blog posts can be displayed in other places, such as the \u003Ccode\u003E\u002Fblog\u003C\u002Fcode\u003E page, which lists all blog posts, and the \u003Ccode\u003E&lt;RecentPosts&gt;\u003C\u002Fcode\u003E component, used in the home page.\u003C\u002Fp\u003E\n\u003Cp\u003ETo be able to do that, posts are processed in the \u003Ccode\u003Esrc\u002Flib\u002Fdata\u002Fblog-posts\u002Findex.ts\u003C\u002Fcode\u003E file. That file imports the blog post files and processes them, so we’re able to use some of the post’s metadata to list them. For example, we get the post’s title, cover image, and calculate the reading time based on its content, so that information is displayed in the blog post cards in the \u003Ccode\u003E\u002Fblog\u003C\u002Fcode\u003E page.\u003C\u002Fp\u003E\n\u003Cp\u003EThere is also some basic logic to get related posts based on a post’s tags. The logic should be straightforward enough to modify it to your needs.\u003C\u002Fp\u003E\n\u003Ch2 id=\"creating-a-new-post\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#creating-a-new-post\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECreating a new post\u003C\u002Fh2\u003E\n\u003Cp\u003ETo create a new post, create a new folder inside the \u003Ccode\u003Esrc\u002Froutes\u002F(blog-article)\u003C\u002Fcode\u003E folder, and inside it, create a \u003Ccode\u003E+page.md\u003C\u002Fcode\u003E file. The folder name will be used as the post’s URL slug, so make sure it’s a valid URL slug.\u003C\u002Fp\u003E\n\u003Cp\u003EInside the \u003Ccode\u003E+page.md\u003C\u002Fcode\u003E file, you must start with the front matter, which is a YAML-like syntax that is used to define metadata for the post. The front matter must be the first thing in the file, and must be separated from the rest of the content by three dashes (\u003Ccode\u003E---\u003C\u002Fcode\u003E). An example of a front matter is:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\u003Cdiv class=\"lang svelte-1pkpsrg\"\u003Emarkdown\u003C\u002Fdiv\u003E\n\t\u003Cpre class=\"language-md\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-md\"\u003E\u003Cspan class=\"token front-matter-block\"\u003E\u003Cspan class=\"token punctuation\"\u003E---\u003C\u002Fspan\u003E\n\u003Cspan class=\"token front-matter yaml language-yaml\"\u003Eslug: my-new-blog-post\ntitle: My New Blog Post\ndate: 2023-04-22T20:45:25.350Z\nexcerpt: A short description of the post\ncoverImage: \u002Fimages\u002Fposts\u002Fcover-image.jpg\ntags:\n  - Example\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E---\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Ch2 id=\"managing-blog-posts\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#managing-blog-posts\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EManaging blog posts\u003C\u002Fh2\u003E\n\u003Cp\u003EI highly recommend the \u003Ca href=\"https:\u002F\u002Ffrontmatter.codes\u002F\" rel=\"nofollow\"\u003EFront Matter VS Code extension\u003C\u002Fa\u003E to manage blog posts. It gives you a nice CMS-like UI to manage the front matter of all blog posts, as well as a preview of their content. It is, of course, optional, and you can manage everything directly in the Markdown files if you prefer.\u003C\u002Fp\u003E\n\u003Cimg srcset=\"\u002Fimages\u002Fposts\u002Ffrontmatter-preview-dashboard.avif, \u002Fimages\u002Fposts\u002Ffrontmatter-preview-dashboard.webp, \u002Fimages\u002Fposts\u002Ffrontmatter-preview-dashboard.png\" src=\"\u002Fimages\u002Fposts\u002Ffrontmatter-preview-dashboard.png\" alt=\"Screenshot of the Front Matter VS Code extension, showing the dashboard with all posts\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj full-bleed\"\u003E\n\u003Cimg srcset=\"\u002Fimages\u002Fposts\u002Ffrontmatter-preview-edit.avif, \u002Fimages\u002Fposts\u002Ffrontmatter-preview-edit.webp, \u002Fimages\u002Fposts\u002Ffrontmatter-preview-edit.png\" src=\"\u002Fimages\u002Fposts\u002Ffrontmatter-preview-edit.png\" alt=\"Screenshot of the Front Matter VS Code extension, showing the post editing UI\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj full-bleed\"\u003E\n\u003Ch2 id=\"rss\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#rss\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003ERSS\u003C\u002Fh2\u003E\n\u003Cp\u003EThis template automatically generates a RSS feed of your blog posts. It is generated in the \u003Ccode\u003Esrc\u002Froutes\u002Frss.xml\u002F+server.ts\u003C\u002Fcode\u003E file, and it is available at the \u003Ccode\u003E\u002Frss.xml\u003C\u002Fcode\u003E URL.\u003C\u002Fp\u003E",readingTime:"3 min read"},{slug:"customization",title:"How to Customize this Template",date:"1997-04-22T21:55:27.154Z",excerpt:"How to customize what you're seeing here and make it your own.",coverImage:"\u002Fimages\u002Fposts\u002Fcustomization.jpg",tags:e,html:"\u003Cp\u003EIn general, content can be modified by editing the \u003Cstrong\u003Eorganisms\u003C\u002Fstrong\u003E and the pages themselves. Below is a list of the most common changes that you may want to make.\u003C\u002Fp\u003E\n\u003Ch2 id=\"domainsite-url\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#domainsite-url\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EDomain\u002Fsite URL\u003C\u002Fh2\u003E\n\u003Cp\u003EThe first thing you might want to do is replace the domain of of the site with your own. There are two places where you need to do that:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003EIn the \u003Ccode\u003Epackage.json\u003C\u002Fcode\u003E file, check the \u003Ccode\u003Epostbuild\u003C\u002Fcode\u003E script. Change the domain there to your own, so it ends up like this: \u003Ccode\u003Esvelte-sitemap --domain https:\u002F\u002Fyour-domain.com\u003C\u002Fcode\u003E. This is used to generate the sitemap of your website, which is used by search engines to index your site.\u003C\u002Fli\u003E\n\u003Cli\u003EIn the \u003Ccode\u003Esrc\u002Flib\u002Fdata\u002Fmeta.ts\u003C\u002Fcode\u003E file, change the \u003Ccode\u003EsiteBaseUrl\u003C\u002Fcode\u003E property to your own domain. This is used in multiple parts of the app wherever the site needs to link to itself.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Ch2 id=\"headersite-logo\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#headersite-logo\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EHeader\u002Fsite logo\u003C\u002Fh2\u003E\n\u003Cp\u003ETo replace the logo that appears in the header, modify or replace the contents of the \u003Ccode\u003ELogo.svelte\u003C\u002Fcode\u003E atom.\u003C\u002Fp\u003E\n\u003Cp\u003EThe links that appear on the header can be modified directly in the \u003Ccode\u003EHeader.svelte\u003C\u002Fcode\u003E organism.\u003C\u002Fp\u003E\n\u003Ch2 id=\"hero-section\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#hero-section\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EHero section\u003C\u002Fh2\u003E\n\u003Cp\u003EThe hero section is the first section of the site’s home page. It is composed of a Heading, the \u003Cem\u003Eintro\u003C\u002Fem\u003E text, and a list of buttons\u002FCTAs. The contents of this section can be modified directly in the \u003Ccode\u003EHero.svelte\u003C\u002Fcode\u003E organism.\u003C\u002Fp\u003E\n\u003Ch2 id=\"about-section\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#about-section\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAbout section\u003C\u002Fh2\u003E\n\u003Cp\u003EThe about section contains another headline, a paragraph of text, some social media links, and optionally an image. The contents of this section can be modified directly in the \u003Ccode\u003EAbout.svelte\u003C\u002Fcode\u003E organism.\u003C\u002Fp\u003E\n\u003Ch2 id=\"social-links\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#social-links\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003ESocial Links\u003C\u002Fh2\u003E\n\u003Cp\u003EThe social links are contained in the \u003Ccode\u003ESocials.svelte\u003C\u002Fcode\u003E molecule and can be used in any page. This template shows them on the About section and in the Footer.\u003C\u002Fp\u003E\n\u003Ch2 id=\"footer\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#footer\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EFooter\u003C\u002Fh2\u003E\n\u003Cp\u003EThe footer contains some credits, a list of social links, and the RSS\u002FTheme toggle. The contents of this section can be modified directly in the \u003Ccode\u003EFooter.svelte\u003C\u002Fcode\u003E organism.\u003C\u002Fp\u003E\n\u003Ch2 id=\"colors\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#colors\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EColors\u003C\u002Fh2\u003E\n\u003Cp\u003EYou can change the color palette of the website just by tweaking the \u003Ccode\u003E_themes.scss\u003C\u002Fcode\u003E file. The file uses the \u003Ccode\u003Edefine-color\u003C\u002Fcode\u003E scss function to automatically set the color variables in Hex, RGB and HSL formats, so you can choose whichever format you need.\u003C\u002Fp\u003E\n\u003Cp\u003EThe main theme colors (primary and secondary) have two variants: shade and tint. The shade is a lighter version of the color (darker in dark mode), and the tint should almost match the page’s background, so that in light mode, it’s really bright, and in dark mode, it’s really dark.\u003C\u002Fp\u003E\n\u003Ch2 id=\"fonts\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#fonts\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EFonts\u003C\u002Fh2\u003E\n\u003Cp\u003EThis template uses the Inter, Merriweather and Ubuntu Mono font families. You can change the font family by editing the \u003Ccode\u003E_variables.scss\u003C\u002Fcode\u003E file, and the code is already set up to accept a default font, a heading font, and a monospace font.\u003C\u002Fp\u003E\n\u003Cp\u003EI recommend using \u003Ca href=\"https:\u002F\u002Ffontsource.org\u002F\" rel=\"nofollow\"\u003EFontsource\u003C\u002Fa\u003E to import the fonts you need, or self-hosting them. In case you’re using Fontsource, you can import the fonts in \u003Ccode\u003Eglobal.scss\u003C\u002Fcode\u003E file to make sure they’re available in the entire site.\u003C\u002Fp\u003E\n\u003Ch2 id=\"favicon\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#favicon\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EFavicon\u003C\u002Fh2\u003E\n\u003Cp\u003EFavicons are located in the \u003Ccode\u003Estatic\u002Ffavicons\u003C\u002Fcode\u003E folder. I like to use \u003Ca href=\"https:\u002F\u002Frealfavicongenerator.net\" rel=\"nofollow\"\u003EReal Favicon Generator\u003C\u002Fa\u003E to generate mine, but you can use any other tool you like. I wrote \u003Ca href=\"https:\u002F\u002Ffantinel.dev\u002Ffixing-favicons\" rel=\"nofollow\"\u003Ea blog post about Favicons\u003C\u002Fa\u003E in case you want to learn more about them.\u003C\u002Fp\u003E\n\u003Ch2 id=\"social-media-link-preview\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#social-media-link-preview\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003ESocial Media Link Preview\u003C\u002Fh2\u003E\n\u003Cp\u003EYou probably want to customize how links to your website look when posted on social media\u002Fmessaging apps. To do that, you can edit the info in \u003Ccode\u003Esrc\u002Flib\u002Fdata\u002Fmeta.ts\u003C\u002Fcode\u003E. There, you can edit the site’s title, description, tags (used by search engines) and the image that appears when sharing a link.\u003C\u002Fp\u003E",readingTime:"3 min read"},{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:a,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EProtocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https:\u002F\u002Fanuragthakur.hashnode.dev\u002Fprotobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\"\u003EWhy Google moved from JSON to Protocol Buffers?\u003C\u002Fa\u003E\nintroduce.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EI used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EYou can clone\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode3\" rel=\"nofollow\"\u003Edemo for episode3\u003C\u002Fa\u003E\nwhich including all the bellow content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EAccording to the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eofficial tutorial\u003C\u002Fa\u003E, two steps\nshould be done:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EInstall the runtime library \u003Ccode\u003Egoogle-protobuf\u003C\u002Fcode\u003E:\u003Ccode\u003Enpm install\ngoogle-protobuf\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EGet the Protocol Compiler \u003Ccode\u003Eprotoc\u003C\u002Fcode\u003E: download from\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EThen run a command like \u003Ccode\u003Eprotoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C\u002Fcode\u003E, you can get the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from\u003C\u002Fp\u003E\n\u003Ccode\u003E.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EWhen the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file generated, the protocol buffers environment is\nready.\u003C\u002Fp\u003E\n\u003Cp\u003EBack to our game, we should create a \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file, named\u003C\u002Fp\u003E\n\u003Ccode\u003Ecard-game.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EThe first line in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Esyntax = &quot;proto3&quot;;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhich means which version of Protobuf we are using.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine the enum of Cmd:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eenum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eenum Cmd is for routing, will be introduced later.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine MainMessage message:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine data message like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen, generate our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the episode3 demo show, run command bellow in directory proto.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EWindows\u003C\u002Fp\u003E\n\u003Ccode\u003E.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMacOS\u003C\u002Fp\u003E\n\u003Ccode\u003E.\u002Fprotoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENow, we have our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from the \u003Ccode\u003E.proto\u003C\u002Fcode\u003E in which\nwe define message.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s encoding and decoding message with protocol buffers.\u003C\u002Fp\u003E\n\u003Cp\u003EEncoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDecoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EAttributes defined as \u003Cstrong\u003Eseat_number\u003C\u002Fstrong\u003E in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be\ncall like getSeatNumber and setSeatNumebr.\u003C\u002Fli\u003E\n\u003Cli\u003EAttributes defined as \u003Cstrong\u003Erepeated\u003C\u002Fstrong\u003E type in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E",readingTime:"3 min read"}]},{title:"How Blog Posts Work",slug:"blog-posts",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"1997-04-22T21:55:15.361Z",excerpt:"How to manage existing blog posts and create new ones",tags:f,html:"\u003Cp\u003EAll blog posts are located inside the \u003Ccode\u003Esrc\u002Froutes\u002F(blog-article)\u003C\u002Fcode\u003E folder. Each folder inside it represents a blog post, and each folder has a \u003Ccode\u003E+page.md\u003C\u002Fcode\u003E file, which is the file that contains the post’s content.\u003C\u002Fp\u003E\n\u003Cp\u003EThis way, the URL for each blog post is generated with the folder’s name. For example, the folder \u003Ccode\u003Esrc\u002Froutes\u002F(blog-article)\u002Fhow-blog-posts-work\u003C\u002Fcode\u003E will generate the URL \u003Ccode\u003Ehttps:\u002F\u002Fmysite.com\u002Fhow-blog-posts-work\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EAll posts are Markdown files, which means you can use the \u003Ca href=\"https:\u002F\u002Fwww.markdownguide.org\u002Fbasic-syntax\" rel=\"nofollow\"\u003EMarkdown syntax\u003C\u002Fa\u003E in them, and it will work out of the box. However, since this projects uses \u003Ca href=\"https:\u002F\u002Fmdsvex.pngwn.io\u002F\" rel=\"nofollow\"\u003EMDsveX\u003C\u002Fa\u003E to parse Markdown, you can also use Svelte components inside them! This means that the components used in other pages can also be used in blog posts.\u003C\u002Fp\u003E\n\u003Cdiv class=\"callout-block info svelte-sxx0n0\"\u003E\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\"\u003E\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\"\u003E\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\u003E\u003C\u002Fpath\u003E\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\u003E\u003C\u002Fpath\u003E\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\u003E\u003C\u002Fpath\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\tThis is a Svelte component inside a Markdown file!\n\n\u003C\u002Fdiv\u003E\n\u003Ch2 id=\"processing\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#processing\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EProcessing\u003C\u002Fh2\u003E\n\u003Cp\u003EBesides the blog post page itself, the blog posts can be displayed in other places, such as the \u003Ccode\u003E\u002Fblog\u003C\u002Fcode\u003E page, which lists all blog posts, and the \u003Ccode\u003E&lt;RecentPosts&gt;\u003C\u002Fcode\u003E component, used in the home page.\u003C\u002Fp\u003E\n\u003Cp\u003ETo be able to do that, posts are processed in the \u003Ccode\u003Esrc\u002Flib\u002Fdata\u002Fblog-posts\u002Findex.ts\u003C\u002Fcode\u003E file. That file imports the blog post files and processes them, so we’re able to use some of the post’s metadata to list them. For example, we get the post’s title, cover image, and calculate the reading time based on its content, so that information is displayed in the blog post cards in the \u003Ccode\u003E\u002Fblog\u003C\u002Fcode\u003E page.\u003C\u002Fp\u003E\n\u003Cp\u003EThere is also some basic logic to get related posts based on a post’s tags. The logic should be straightforward enough to modify it to your needs.\u003C\u002Fp\u003E\n\u003Ch2 id=\"creating-a-new-post\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#creating-a-new-post\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECreating a new post\u003C\u002Fh2\u003E\n\u003Cp\u003ETo create a new post, create a new folder inside the \u003Ccode\u003Esrc\u002Froutes\u002F(blog-article)\u003C\u002Fcode\u003E folder, and inside it, create a \u003Ccode\u003E+page.md\u003C\u002Fcode\u003E file. The folder name will be used as the post’s URL slug, so make sure it’s a valid URL slug.\u003C\u002Fp\u003E\n\u003Cp\u003EInside the \u003Ccode\u003E+page.md\u003C\u002Fcode\u003E file, you must start with the front matter, which is a YAML-like syntax that is used to define metadata for the post. The front matter must be the first thing in the file, and must be separated from the rest of the content by three dashes (\u003Ccode\u003E---\u003C\u002Fcode\u003E). An example of a front matter is:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\n\t\u003Cdiv class=\"lang svelte-1pkpsrg\"\u003Emarkdown\u003C\u002Fdiv\u003E\n\t\u003Cpre class=\"language-md\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-md\"\u003E\u003Cspan class=\"token front-matter-block\"\u003E\u003Cspan class=\"token punctuation\"\u003E---\u003C\u002Fspan\u003E\n\u003Cspan class=\"token front-matter yaml language-yaml\"\u003Eslug: my-new-blog-post\ntitle: My New Blog Post\ndate: 2023-04-22T20:45:25.350Z\nexcerpt: A short description of the post\ncoverImage: \u002Fimages\u002Fposts\u002Fcover-image.jpg\ntags:\n  - Example\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E---\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Ch2 id=\"managing-blog-posts\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#managing-blog-posts\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EManaging blog posts\u003C\u002Fh2\u003E\n\u003Cp\u003EI highly recommend the \u003Ca href=\"https:\u002F\u002Ffrontmatter.codes\u002F\" rel=\"nofollow\"\u003EFront Matter VS Code extension\u003C\u002Fa\u003E to manage blog posts. It gives you a nice CMS-like UI to manage the front matter of all blog posts, as well as a preview of their content. It is, of course, optional, and you can manage everything directly in the Markdown files if you prefer.\u003C\u002Fp\u003E\n\u003Cimg srcset=\"\u002Fimages\u002Fposts\u002Ffrontmatter-preview-dashboard.avif, \u002Fimages\u002Fposts\u002Ffrontmatter-preview-dashboard.webp, \u002Fimages\u002Fposts\u002Ffrontmatter-preview-dashboard.png\" src=\"\u002Fimages\u002Fposts\u002Ffrontmatter-preview-dashboard.png\" alt=\"Screenshot of the Front Matter VS Code extension, showing the dashboard with all posts\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj full-bleed\"\u003E\n\u003Cimg srcset=\"\u002Fimages\u002Fposts\u002Ffrontmatter-preview-edit.avif, \u002Fimages\u002Fposts\u002Ffrontmatter-preview-edit.webp, \u002Fimages\u002Fposts\u002Ffrontmatter-preview-edit.png\" src=\"\u002Fimages\u002Fposts\u002Ffrontmatter-preview-edit.png\" alt=\"Screenshot of the Front Matter VS Code extension, showing the post editing UI\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj full-bleed\"\u003E\n\u003Ch2 id=\"rss\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#rss\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003ERSS\u003C\u002Fh2\u003E\n\u003Cp\u003EThis template automatically generates a RSS feed of your blog posts. It is generated in the \u003Ccode\u003Esrc\u002Froutes\u002Frss.xml\u002F+server.ts\u003C\u002Fcode\u003E file, and it is available at the \u003Ccode\u003E\u002Frss.xml\u003C\u002Fcode\u003E URL.\u003C\u002Fp\u003E",readingTime:"3 min read",relatedPosts:[{slug:"customization",title:"How to Customize this Template",date:"1997-04-22T21:55:27.154Z",excerpt:"How to customize what you're seeing here and make it your own.",coverImage:"\u002Fimages\u002Fposts\u002Fcustomization.jpg",tags:e,html:"\u003Cp\u003EIn general, content can be modified by editing the \u003Cstrong\u003Eorganisms\u003C\u002Fstrong\u003E and the pages themselves. Below is a list of the most common changes that you may want to make.\u003C\u002Fp\u003E\n\u003Ch2 id=\"domainsite-url\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#domainsite-url\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EDomain\u002Fsite URL\u003C\u002Fh2\u003E\n\u003Cp\u003EThe first thing you might want to do is replace the domain of of the site with your own. There are two places where you need to do that:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003EIn the \u003Ccode\u003Epackage.json\u003C\u002Fcode\u003E file, check the \u003Ccode\u003Epostbuild\u003C\u002Fcode\u003E script. Change the domain there to your own, so it ends up like this: \u003Ccode\u003Esvelte-sitemap --domain https:\u002F\u002Fyour-domain.com\u003C\u002Fcode\u003E. This is used to generate the sitemap of your website, which is used by search engines to index your site.\u003C\u002Fli\u003E\n\u003Cli\u003EIn the \u003Ccode\u003Esrc\u002Flib\u002Fdata\u002Fmeta.ts\u003C\u002Fcode\u003E file, change the \u003Ccode\u003EsiteBaseUrl\u003C\u002Fcode\u003E property to your own domain. This is used in multiple parts of the app wherever the site needs to link to itself.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Ch2 id=\"headersite-logo\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#headersite-logo\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EHeader\u002Fsite logo\u003C\u002Fh2\u003E\n\u003Cp\u003ETo replace the logo that appears in the header, modify or replace the contents of the \u003Ccode\u003ELogo.svelte\u003C\u002Fcode\u003E atom.\u003C\u002Fp\u003E\n\u003Cp\u003EThe links that appear on the header can be modified directly in the \u003Ccode\u003EHeader.svelte\u003C\u002Fcode\u003E organism.\u003C\u002Fp\u003E\n\u003Ch2 id=\"hero-section\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#hero-section\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EHero section\u003C\u002Fh2\u003E\n\u003Cp\u003EThe hero section is the first section of the site’s home page. It is composed of a Heading, the \u003Cem\u003Eintro\u003C\u002Fem\u003E text, and a list of buttons\u002FCTAs. The contents of this section can be modified directly in the \u003Ccode\u003EHero.svelte\u003C\u002Fcode\u003E organism.\u003C\u002Fp\u003E\n\u003Ch2 id=\"about-section\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#about-section\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAbout section\u003C\u002Fh2\u003E\n\u003Cp\u003EThe about section contains another headline, a paragraph of text, some social media links, and optionally an image. The contents of this section can be modified directly in the \u003Ccode\u003EAbout.svelte\u003C\u002Fcode\u003E organism.\u003C\u002Fp\u003E\n\u003Ch2 id=\"social-links\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#social-links\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003ESocial Links\u003C\u002Fh2\u003E\n\u003Cp\u003EThe social links are contained in the \u003Ccode\u003ESocials.svelte\u003C\u002Fcode\u003E molecule and can be used in any page. This template shows them on the About section and in the Footer.\u003C\u002Fp\u003E\n\u003Ch2 id=\"footer\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#footer\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EFooter\u003C\u002Fh2\u003E\n\u003Cp\u003EThe footer contains some credits, a list of social links, and the RSS\u002FTheme toggle. The contents of this section can be modified directly in the \u003Ccode\u003EFooter.svelte\u003C\u002Fcode\u003E organism.\u003C\u002Fp\u003E\n\u003Ch2 id=\"colors\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#colors\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EColors\u003C\u002Fh2\u003E\n\u003Cp\u003EYou can change the color palette of the website just by tweaking the \u003Ccode\u003E_themes.scss\u003C\u002Fcode\u003E file. The file uses the \u003Ccode\u003Edefine-color\u003C\u002Fcode\u003E scss function to automatically set the color variables in Hex, RGB and HSL formats, so you can choose whichever format you need.\u003C\u002Fp\u003E\n\u003Cp\u003EThe main theme colors (primary and secondary) have two variants: shade and tint. The shade is a lighter version of the color (darker in dark mode), and the tint should almost match the page’s background, so that in light mode, it’s really bright, and in dark mode, it’s really dark.\u003C\u002Fp\u003E\n\u003Ch2 id=\"fonts\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#fonts\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EFonts\u003C\u002Fh2\u003E\n\u003Cp\u003EThis template uses the Inter, Merriweather and Ubuntu Mono font families. You can change the font family by editing the \u003Ccode\u003E_variables.scss\u003C\u002Fcode\u003E file, and the code is already set up to accept a default font, a heading font, and a monospace font.\u003C\u002Fp\u003E\n\u003Cp\u003EI recommend using \u003Ca href=\"https:\u002F\u002Ffontsource.org\u002F\" rel=\"nofollow\"\u003EFontsource\u003C\u002Fa\u003E to import the fonts you need, or self-hosting them. In case you’re using Fontsource, you can import the fonts in \u003Ccode\u003Eglobal.scss\u003C\u002Fcode\u003E file to make sure they’re available in the entire site.\u003C\u002Fp\u003E\n\u003Ch2 id=\"favicon\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#favicon\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EFavicon\u003C\u002Fh2\u003E\n\u003Cp\u003EFavicons are located in the \u003Ccode\u003Estatic\u002Ffavicons\u003C\u002Fcode\u003E folder. I like to use \u003Ca href=\"https:\u002F\u002Frealfavicongenerator.net\" rel=\"nofollow\"\u003EReal Favicon Generator\u003C\u002Fa\u003E to generate mine, but you can use any other tool you like. I wrote \u003Ca href=\"https:\u002F\u002Ffantinel.dev\u002Ffixing-favicons\" rel=\"nofollow\"\u003Ea blog post about Favicons\u003C\u002Fa\u003E in case you want to learn more about them.\u003C\u002Fp\u003E\n\u003Ch2 id=\"social-media-link-preview\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#social-media-link-preview\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003ESocial Media Link Preview\u003C\u002Fh2\u003E\n\u003Cp\u003EYou probably want to customize how links to your website look when posted on social media\u002Fmessaging apps. To do that, you can edit the info in \u003Ccode\u003Esrc\u002Flib\u002Fdata\u002Fmeta.ts\u003C\u002Fcode\u003E. There, you can edit the site’s title, description, tags (used by search engines) and the image that appears when sharing a link.\u003C\u002Fp\u003E",readingTime:"3 min read"},{slug:"project-structure",title:"Project Structure",date:"1997-04-22T21:55:21.800Z",excerpt:"How code and structure are organized.",coverImage:"\u002Fimages\u002Fposts\u002Fproject-structure.jpg",tags:g,html:"\u003Cp\u003EThis project follows the basic \u003Ca href=\"https:\u002F\u002Fkit.svelte.dev\u002Fdocs\u002Fproject-structure\" rel=\"nofollow\"\u003ESvelteKit structure\u003C\u002Fa\u003E, with some added conventions to make customization a post-management easier.\u003C\u002Fp\u003E\n\u003Ch2 id=\"components\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#components\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EComponents\u003C\u002Fh2\u003E\n\u003Cp\u003EThe components are organized following the \u003Ca href=\"https:\u002F\u002Fmedium.com\u002F@WeAreMobile1st\u002Fatomic-design-getting-started-916bc81bad0e\" rel=\"nofollow\"\u003EAtomic Design\u003C\u002Fa\u003E principles, albeit somewhat simplified. Components are in the \u003Ccode\u003Esrc\u002Flib\u002Fcomponents\u003C\u002Fcode\u003E folder, and are organized in the following way:\u003C\u002Fp\u003E\n\u003Ch3 id=\"atoms\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#atoms\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAtoms\u003C\u002Fh3\u003E\n\u003Cp\u003EAtoms are the most basic components, which can be seen as building blocks for other components. They’re small and self-contained, and do only one thing. Examples of atoms are buttons, inputs, and tags.\u003C\u002Fp\u003E\n\u003Ch3 id=\"molecules\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#molecules\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMolecules\u003C\u002Fh3\u003E\n\u003Cp\u003EMolecules are groups of atoms that work together to form a more complex component. Examples of molecules are cards, groups of links, or an alert callout.\u003C\u002Fp\u003E\n\u003Ch3 id=\"organisms\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#organisms\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EOrganisms\u003C\u002Fh3\u003E\n\u003Cp\u003EOrganisms, in this project, are code blocks that represent a section of a page, such as the header, footer and hero section. They can be used directly in a page as a sort of building block, so the page’s code can be as simple as this:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block svelte-1pkpsrg\"\u003E\u003Cdiv class=\"filename svelte-1pkpsrg\"\u003E+page.svelte\u003C\u002Fdiv\u003E\n\t\u003Cdiv class=\"lang svelte-1pkpsrg\"\u003Ehtml\u003C\u002Fdiv\u003E\n\t\u003Cpre class=\"language-html\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-html\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EHeader\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EHero\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EAbout\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003EFooter\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003Ch2 id=\"component-gallery\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#component-gallery\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EComponent Gallery\u003C\u002Fh2\u003E\n\u003Cp\u003EThis project uses \u003Ca href=\"https:\u002F\u002Fhistoire.dev\" rel=\"nofollow\"\u003EHistoire\u003C\u002Fa\u003E to be able to see and develop components in isolation. To open it, run \u003Ccode\u003Enpm run story:dev\u003C\u002Fcode\u003E. This way you can customize and build new components with placeholder content and without worrying about where to put them in a page.\u003C\u002Fp\u003E\n\u003Ch2 id=\"pages\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#pages\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EPages\u003C\u002Fh2\u003E\n\u003Cp\u003EPages obey the default SvelteKit structure, but can be summarized as follows:\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003EThere are two different file types: the pages (\u003Ccode\u003E+page.svelte\u003C\u002Fcode\u003E) and the layouts (\u003Ccode\u003E+layout.svelte\u003C\u002Fcode\u003E). Layouts are a way to reuse the same structure between different pages without having to duplicate code;\u003C\u002Fli\u003E\n\u003Cli\u003EThere are two different page layouts in this site: the “Waves” layout, which all pages inside the \u003Ccode\u003E(waves)\u003C\u002Fcode\u003E folder use, and the “Blog Article” layout, which all pages inside the \u003Ccode\u003E(blog-article)\u003C\u002Fcode\u003E folder use;\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Ch2 id=\"blog-posts\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#blog-posts\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBlog Posts\u003C\u002Fh2\u003E\n\u003Cp\u003ETo know how blog posts work and how to create new ones, check out \u003Ca href=\"\u002Fblog-posts\"\u003EHow Blog Posts Work\u003C\u002Fa\u003E.\u003C\u002Fp\u003E",readingTime:"2 min read"},{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"\u002Fimages\u002Fposts\u002Fblog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:a,html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\"\u003E\u003Cspan\u003E#\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMake a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\u003Cp\u003EProtocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https:\u002F\u002Fanuragthakur.hashnode.dev\u002Fprotobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\"\u003EWhy Google moved from JSON to Protocol Buffers?\u003C\u002Fa\u003E\nintroduce.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EI used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EYou can clone\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flizhiyu-me\u002FMake-a-multiplayer-card-game\u002Ftree\u002Fepisode3\" rel=\"nofollow\"\u003Edemo for episode3\u003C\u002Fa\u003E\nwhich including all the bellow content.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003EAccording to the\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\" rel=\"nofollow\"\u003Eofficial tutorial\u003C\u002Fa\u003E, two steps\nshould be done:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EInstall the runtime library \u003Ccode\u003Egoogle-protobuf\u003C\u002Fcode\u003E:\u003Ccode\u003Enpm install\ngoogle-protobuf\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EGet the Protocol Compiler \u003Ccode\u003Eprotoc\u003C\u002Fcode\u003E: download from\n\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\" rel=\"nofollow\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fprotocolbuffers\u002Fprotobuf\u002Freleases\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cp\u003EThen run a command like \u003Ccode\u003Eprotoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C\u002Fcode\u003E, you can get the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from\u003C\u002Fp\u003E\n\u003Ccode\u003E.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EWhen the \u003Ccode\u003E.js\u003C\u002Fcode\u003E file generated, the protocol buffers environment is\nready.\u003C\u002Fp\u003E\n\u003Cp\u003EBack to our game, we should create a \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file, named\u003C\u002Fp\u003E\n\u003Ccode\u003Ecard-game.proto\u003C\u002Fcode\u003E.\n\u003Cp\u003EThe first line in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Esyntax = &quot;proto3&quot;;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhich means which version of Protobuf we are using.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine the enum of Cmd:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Eenum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eenum Cmd is for routing, will be introduced later.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine MainMessage message:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIn order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C\u002Fp\u003E\n\u003Cp\u003EDefine data message like:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Emessage DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThen, generate our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file.\u003C\u002Fp\u003E\n\u003Cp\u003EAs the episode3 demo show, run command bellow in directory proto.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EWindows\u003C\u002Fp\u003E\n\u003Ccode\u003E.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003EMacOS\u003C\u002Fp\u003E\n\u003Ccode\u003E.\u002Fprotoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003ENow, we have our own \u003Ccode\u003E.js\u003C\u002Fcode\u003E file from the \u003Ccode\u003E.proto\u003C\u002Fcode\u003E in which\nwe define message.\u003C\u002Fp\u003E\n\u003Cp\u003ELet’s encoding and decoding message with protocol buffers.\u003C\u002Fp\u003E\n\u003Cp\u003EEncoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EDecoding: &gt;enum Cmd is used to map message type here\u003C\u002Fp\u003E\n\u003Cpre class=\"language-undefined\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-undefined\"\u003Efunction decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\u003Cp\u003ECaution:\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003EAttributes defined as \u003Cstrong\u003Eseat_number\u003C\u002Fstrong\u003E in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E file should be\ncall like getSeatNumber and setSeatNumebr.\u003C\u002Fli\u003E\n\u003Cli\u003EAttributes defined as \u003Cstrong\u003Erepeated\u003C\u002Fstrong\u003E type in \u003Ccode\u003E.proto\u003C\u002Fcode\u003E should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E",readingTime:"3 min read"}]}]}}(Array(1),Array(1),Array(1),Array(1),Array(1),Array(1),Array(1))),"uses":{}}];

					Promise.all([
						import("./_app/immutable/entry/start.f5ebb3fd.js"),
						import("./_app/immutable/entry/app.64ca6474.js")
					]).then(([kit, app]) => {
						kit.start(app, __sveltekit_1hszat3.element, {
							node_ids: [0, 3, 19],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
