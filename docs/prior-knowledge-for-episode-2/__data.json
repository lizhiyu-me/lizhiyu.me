{"type":"data","nodes":[null,{"type":"data","data":[{"post":1},{"title":2,"slug":3,"coverImage":4,"date":5,"excerpt":2,"tags":6,"html":8,"readingTime":9,"relatedPosts":10},"Prior Knowledge For Episode 2","prior-knowledge-for-episode-2","/images/posts/blog-posts.jpg","2021-02-15T21:55:15.361Z",[7],"Tutorial:Make a multiplayer card game","\u003Ch2 id=\"prior-knowledge-for-episode-2\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#prior-knowledge-for-episode-2\">\u003Cspan>#\u003C/span>\u003C/a>Prior Knowledge For Episode 2\u003C/h2>\n\u003Cp>Before episode 2, we’d better to know the rule of the game we are going to make.\u003C/p>\n\u003Cblockquote>\u003Cp>Background story:\u003C/p>\u003C/blockquote>\n\u003Cblockquote>\u003Cp>In the old days in China, the rich and powerful landowners oppressed the\nfarmers who work hard on the land, threatened the villagers . In order to gave\nfull vent to their hate, the farmers invent the “Fighting the Landlords”.\u003C/p>\u003C/blockquote>\n\u003Cblockquote>\u003Cp>At the beginning, the landlords were given three more cards to highlight the\ndomineering of the landlords, while the farmers Use two-on-one to express the\npsychology of winning by teamwork.\u003C/p>\u003C/blockquote>\n\u003Col>\u003Cli>\u003Cp>Basic Rules The landlord is on one side, and the other two players are on the\nfarmer side. The game ends when any player finishes playing cards. There are\n54 cards in total. After the game starts, each of the 3 players is dealt 17\ncards, and the remaining 3 cards are the landlord cards.\u003C/p>\u003C/li>\n\u003Cli>\u003Cp>The brand\u003C/p>\n\u003Cul>\u003Cli>Spring: After the landlord has played all the cards, and the peasants have\nnot played a single card, it is spring.\u003C/li>\n\u003Cli>Anti-Spring: After the landlord plays the first hand of cards, the farmer\ncontrols it, and until the farmer finishes playing the hand, the landlord\nhas not played a card, that is, the anti-spring.\u003C/li>\n\u003Cli>Double: After confirming the landlord again, both the landlord and the\npeasant can freely choose to double or not to double, and if they choose to\ndouble, the multiple will be x 2 (if both of them choose double, the\nmultiple will be x 4).\u003C/li>\n\u003Cli>King Fried: That is, the double king is in hand, and the card type is the\nlargest card type and can press any card type.\u003C/li>\n\u003Cli>Bomb: Four cards of the same rank are bomb cards. For example: 4444.\u003C/li>\n\u003Cli>Single: A single card.\u003C/li>\n\u003Cli>Pair: Two cards of the same value.\u003C/li>\n\u003Cli>Three Cards: Three cards of the same rank.\u003C/li>\n\u003Cli>Three with one: Three cards of the same rank + any single card. For\nexample: 333+4.\u003C/li>\n\u003Cli>Three with two: Three cards of the same rank + a pair of cards. For\nexample: 333+44.\u003C/li>\n\u003Cli>Four with two: Four cards of the same rank + any two cards. For example:\n3333+4+5 or 3333+44.\u003C/li>\n\u003Cli>Straight: A single card with five or more consecutive points, 2 and the\nking cannot be linked. For example: 34567.\u003C/li>\n\u003Cli>Connected Pair: Three or more consecutive pairs of cards, 2 and king cannot\nbe connected. For example: 334455.\u003C/li>\n\u003Cli>Airplane: Two or more adjacent three cards, 2 and the king cannot be\nconnected. For example 333444.\u003C/li>\n\u003Cli>Airplane with wings: Plane + the same number of singles or pairs. For\nexample: 333444+5+6 or 333444+55+66.\u003C/li>\u003C/ul>\u003C/li>\n\u003Cli>\u003Cp>Multiples\u003C/p>\n\u003Cul>\u003Cli>Bomb (King Bomb): x2\u003C/li>\n\u003Cli>Spring: x2\u003C/li>\n\u003Cli>Anti-spring: x2\u003C/li>\n\u003Cli>Pair, Flush, King: x2\u003C/li>\n\u003Cli>Double king and straight in the hole card: x3\u003C/li>\n\u003Cli>A straight flush, three cards in the hole card: x4\u003C/li>\u003C/ul>\u003C/li>\n\u003Cli>\u003Cp>Game Rules\u003C/p>\n\u003Cul>\u003Cli>The system randomly selects a player to call the landlord first, and then\nthe other 2 will grab the landlord or not.\u003C/li>\n\u003Cli>When calling the landlord, you can choose not to call or call the landlord.\nAfter someone calls the landlord, you can rob the landlord. Call the\nlandlord multiples of 1, 2, and 3 times, and the first to grab 3 times is\nthe landlord.\u003C/li>\n\u003Cli>After confirming the landlord, the three hole cards are shown and the\nlandlord gets the last three hole cards.\u003C/li>\n\u003Cli>In the card playing stage, when it is your turn to press the card, you can\nfreely choose not to play or play a higher card than the previous player.\u003C/li>\n\u003Cli>The game ends when any farmer player finishes playing cards, and 2 peasants\nwin. If the landlord have finished playing cards, the game ends and the\nlandlord wins.\u003C/li>\u003C/ul>\u003C/li>\u003C/ol>\n\u003Cp>Fighting the Landlord itself is a strategic game. As a landlord, you must\nunderstand the advantages of your three cards. As a farmer, when your own\nadvantages are insufficient, you must choose to cooperate in a group.\nOpportunity to defeat the landlord to win.\u003C/p>","4 min read",[11,19,27],{"title":12,"slug":13,"coverImage":4,"date":14,"excerpt":15,"tags":16,"html":17,"readingTime":18},"Make a multiplayer card game - Episode 3","change-json-to-protocol-buffers-e3","2021-02-22T21:55:15.361Z","Change JSON to Protocol Buffers",[7],"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C/h2>\n\u003Cblockquote>\u003Cp>Protocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https://anuragthakur.hashnode.dev/protobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\">Why Google moved from JSON to Protocol Buffers?\u003C/a>\nintroduce.\u003C/p>\u003C/blockquote>\n\u003Cp>I used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C/p>\n\u003Cblockquote>\u003Cp>You can clone\n\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode3\" rel=\"nofollow\">demo for episode3\u003C/a>\nwhich including all the bellow content.\u003C/p>\u003C/blockquote>\n\u003Cp>According to the\n\u003Ca href=\"https://github.com/protocolbuffers/protobuf\" rel=\"nofollow\">official tutorial\u003C/a>, two steps\nshould be done:\u003C/p>\n\u003Col>\u003Cli>Install the runtime library \u003Ccode>google-protobuf\u003C/code>:\u003Ccode>npm install\ngoogle-protobuf\u003C/code>.\u003C/li>\n\u003Cli>Get the Protocol Compiler \u003Ccode>protoc\u003C/code>: download from\n\u003Ca href=\"https://github.com/protocolbuffers/protobuf/releases\" rel=\"nofollow\">https://github.com/protocolbuffers/protobuf/releases\u003C/a>\u003C/li>\u003C/ol>\n\u003Cp>Then run a command like \u003Ccode>protoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C/code>, you can get the \u003Ccode>.js\u003C/code> file from\u003C/p>\n\u003Ccode>.proto\u003C/code>.\n\u003Cp>When the \u003Ccode>.js\u003C/code> file generated, the protocol buffers environment is\nready.\u003C/p>\n\u003Cp>Back to our game, we should create a \u003Ccode>.proto\u003C/code> file, named\u003C/p>\n\u003Ccode>card-game.proto\u003C/code>.\n\u003Cp>The first line in \u003Ccode>.proto\u003C/code> file should be:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">syntax = &quot;proto3&quot;;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>which means which version of Protobuf we are using.\u003C/p>\n\u003Cp>Define the enum of Cmd:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">enum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>enum Cmd is for routing, will be introduced later.\u003C/p>\n\u003Cp>Define MainMessage message:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">message MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>In order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C/p>\n\u003Cp>Define data message like:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">message DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Then, generate our own \u003Ccode>.js\u003C/code> file.\u003C/p>\n\u003Cp>As the episode3 demo show, run command bellow in directory proto.\u003C/p>\n\u003Cul>\u003Cli>\u003Cp>Windows\u003C/p>\n\u003Ccode>.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C/code>\u003C/li>\n\u003Cli>\u003Cp>MacOS\u003C/p>\n\u003Ccode>./protoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C/code>\u003C/li>\u003C/ul>\n\u003Cp>Now, we have our own \u003Ccode>.js\u003C/code> file from the \u003Ccode>.proto\u003C/code> in which\nwe define message.\u003C/p>\n\u003Cp>Let’s encoding and decoding message with protocol buffers.\u003C/p>\n\u003Cp>Encoding: &gt;enum Cmd is used to map message type here\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">function encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Decoding: &gt;enum Cmd is used to map message type here\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">function decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cblockquote>\u003Cp>Caution:\u003C/p>\n\u003Col>\u003Cli>Attributes defined as \u003Cstrong>seat_number\u003C/strong> in \u003Ccode>.proto\u003C/code> file should be\ncall like getSeatNumber and setSeatNumebr.\u003C/li>\n\u003Cli>Attributes defined as \u003Cstrong>repeated\u003C/strong> type in \u003Ccode>.proto\u003C/code> should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C/li>\u003C/ol>\u003C/blockquote>","3 min read",{"title":20,"slug":21,"coverImage":4,"date":22,"excerpt":23,"tags":24,"html":25,"readingTime":26},"Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React","create-2d-graphical-interface-with-react-e6","2021-03-29T21:55:15.361Z","This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.",[7],"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React\u003C/h2>\n\u003Cp>This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api. The following is an abstracted interface:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">export interface IGameSceneView &#123;\n    getViewComponent(name: string),\n    getNewViewComponent(comp),\n    getChild(childPath, parent),\n    addClickListener(comp, handler, target),\n    setCard(card, name),\n    setLabel(labelComp, text),\n    removeAllChildren(parent),\n    addChild(child, parent),\n    isCardSelected(card),\n    toggleCardSelectedStatus(card),\n    showComponent(comp),\n    hideComponent(comp)\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Compared with cocos creator, the implementation of react is more operable at the code level. The styles of interface elements are all implemented by handwritten code. The hot-reload that comes with create-react-app also responds to changes very quickly. There is a time to switch editors and wait for the editor to refresh, which is very lightweight.\u003C/p>\n\u003Cp>Code reference \u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode6-react\" rel=\"nofollow\">https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode6-react\u003C/a>\u003C/p>\n\u003Cp>The next article mainly introduces the comparison between cocos creator and react implementation in development.\u003C/p>\n\u003Cp>本节主要是用react实现UI视图。\n在本节之前，已经用cocos creator实现了一个UI视图版本，为了重用基础框架，我们将游戏逻辑进行抽象，并将与视图引擎api相关的逻辑解耦出来。\n下面是抽象出来的一个接口：\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token keyword\">export\u003C/span> \u003Cspan class=\"token keyword\">interface\u003C/span> \u003Cspan class=\"token class-name\">IGameSceneView\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token function\">getViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">getNewViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>comp\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">getChild\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>childPath\u003Cspan class=\"token punctuation\">,\u003C/span> parent\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">addClickListener\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>comp\u003Cspan class=\"token punctuation\">,\u003C/span> handler\u003Cspan class=\"token punctuation\">,\u003C/span> target\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">setCard\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card\u003Cspan class=\"token punctuation\">,\u003C/span> name\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">setLabel\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>labelComp\u003Cspan class=\"token punctuation\">,\u003C/span> text\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">removeAllChildren\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>parent\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">addChild\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>child\u003Cspan class=\"token punctuation\">,\u003C/span> parent\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">isCardSelected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">toggleCardSelectedStatus\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">showComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>comp\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">hideComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>comp\u003Cspan class=\"token punctuation\">)\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>相对于cocos creator，react的实现在代码层面可操作性较强，体现在界面元素的样式都通过手写代码来实现，create-react-app自带的hot-reload也非常快地反馈变更，不会有切换编辑器和等待编辑器刷新的时间，非常轻量的感觉。\u003C/p>\n\u003Cp>代码参考 \u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode6-react\" rel=\"nofollow\">https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode6-react\u003C/a>\u003C/p>\n\u003Cp>下一篇主要介绍cocos creator 与 react 实现在开发上的对比。\u003C/p>","2 min read",{"title":28,"slug":29,"coverImage":4,"date":30,"excerpt":31,"tags":32,"html":33,"readingTime":26},"Make a multiplayer card game - Episode 1","create-a-simple-server-and-client-from-scratch-e1","2021-02-01T21:55:15.361Z","Create a simple server and client from scratch",[7],"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C/h2>\n\u003Cp>In the coming weeks, I’ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame “Doudizhu”, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C/p>\n\u003Cp>Parts including:\u003C/p>\n\u003Cul>\u003Cli>create a simple server and client\u003C/li>\n\u003Cli>play cards in terminal with bots\u003C/li>\n\u003Cli>communicate with server by protobuf\u003C/li>\n\u003Cli>play cards in terminal with other players\u003C/li>\n\u003Cli>create 2D graphical interface with Cocos Creator\u003C/li>\n\u003Cli>create 2D graphical interface with React\u003C/li>\n\u003Cli>create 3D graphical interface with Three.js\u003C/li>\n\u003Cli>add physical lib ammo.js to add a tiny game\u003C/li>\n\u003Cli>connect to Web3 world\u003C/li>\u003C/ul>\n\u003Cp>\u003Cem>open your terminal, input \u003Ccode>node -v\u003C/code>, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\">https://nodejs.org\u003C/a>.\u003C/em>\u003C/p>\n\u003Cp>directory structure :\n\u003Cimg src=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1644775769474/2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\">\u003C/p>\n\u003Cp>create a server, server/index.js:\u003C/p>\n\u003Cdiv class=\"code-block svelte-1pkpsrg\">\n\t\n\t\u003Cpre class=\"language-ts\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-ts\">\u003Cspan class=\"token keyword\">const\u003C/span> net \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">require\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"net\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> server \u003Cspan class=\"token operator\">=\u003C/span> net\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">createServer\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">on\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"data\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token function\">handlerData\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> data\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">handlerData\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">send\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token string-property property\">\"msg\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Welcome, friend.\"\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">send\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> bufferData \u003Cspan class=\"token operator\">=\u003C/span> Buffer\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">from\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token constant\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">stringify\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">write\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>bufferData\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\nserver\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">listen\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">8080\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"server listening on 127.0.0.1:8080\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003C/div>\n\u003Cp>create client, client/index.js:\u003C/p>\n\u003Cdiv class=\"code-block svelte-1pkpsrg\">\n\t\n\t\u003Cpre class=\"language-ts\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-ts\">\u003Cspan class=\"token keyword\">const\u003C/span> net \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">require\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"net\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">const\u003C/span> socket \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">net\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">Socket\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\nsocket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">connect\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  host\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"127.0.0.1\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n  port\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">8080\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> onConnected\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\nsocket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">on\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"data\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">decode\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\nsocket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">on\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"error\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">onConnected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">startGame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">decode\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token constant\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">parse\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>msg\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">request\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> bufferData \u003Cspan class=\"token operator\">=\u003C/span> Buffer\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">from\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token constant\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">stringify\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token string-property property\">\"msg\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> data \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">write\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>bufferData\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">startGame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">request\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"Hello, world!\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003C/div>\n\u003Cp>run :\u003C/p>\n\u003Cp>\u003Ccode>cd server\u003C/code>\u003C/p>\n\u003Cp>\u003Ccode>node index.js\u003C/code>\u003C/p>\n\u003Cp>\u003Ccode>cd client\u003C/code>\u003C/p>\n\u003Cp>\u003Ccode>node index.js\u003C/code>\u003C/p>\n\u003Cp>result:\u003C/p>\n\u003Cp>\u003Cimg src=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1644776034549/t-Jir1j9R.png\" alt=\"demo0-cmd-result.png\">\u003C/p>\n\u003Cp>This episode is end here, the complete demo can be found on\n\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode1\" rel=\"nofollow\">https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode1\u003C/a>\u003C/p>\n\u003Cp>Any problems, discussion is welcome.\u003C/p>\n\u003Cp>\u003Cstrong>In the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C/strong>\u003C/p>\n\u003Cp>Thanks for your reading.\u003C/p>"],"uses":{"url":1}},null]}
