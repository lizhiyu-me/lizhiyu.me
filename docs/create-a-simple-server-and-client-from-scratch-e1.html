<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Favicon -->
		<link
			rel="apple-touch-icon"
			sizes="180x180"
			href="./favicons/apple-touch-icon.png"
		/>
		<link
			rel="icon"
			type="image/png"
			sizes="32x32"
			href="./favicons/favicon-32x32.png"
		/>
		<link
			rel="icon"
			type="image/png"
			sizes="16x16"
			href="./favicons/favicon-16x16.png"
		/>
		<link rel="manifest" href="./favicons/site.webmanifest" />
		<link
			rel="mask-icon"
			href="./favicons/safari-pinned-tab.svg"
			color="#0ca4a5"
		/>
		<link rel="shortcut icon" href="./favicons/favicon.ico" />
		<link rel="icon" href="./favicons/favicon.png" />

		<!-- Tell browser this site is responsive -->
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!-- Tell browser this site supports light and dark mode -->
		<meta name="color-scheme" content="light dark" />
		<!-- Color for browser url bar in mobile/Safari -->
		<meta name="theme-color" media="(prefers-color-scheme: light)" content="#b28cf2" />
		<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#4612A1" />
		<!-- Disable Google FLOC -->
		<meta http-equiv="Permissions-Policy" content="interest-cohort=()" />

		<script>
			// Calling this here so that it loads as quickly as possible
			// Avoiding a flash of light mode in case dark mode is used
			const theme = localStorage.getItem('theme-preference') || 'auto';
			document.firstElementChild?.setAttribute('data-theme', theme);
		</script>

		
		<link href="./_app/immutable/assets/0.13484673.css" rel="stylesheet">
		<link href="./_app/immutable/assets/2.a0c51d5a.css" rel="stylesheet">
		<link href="./_app/immutable/assets/Footer.d783561c.css" rel="stylesheet">
		<link href="./_app/immutable/assets/Socials.1c0e54d1.css" rel="stylesheet">
		<link href="./_app/immutable/assets/ContentSection.3fd00a97.css" rel="stylesheet">
		<link href="./_app/immutable/assets/Image.0954db74.css" rel="stylesheet">
		<link href="./_app/immutable/assets/CodeBlock.c482c875.css" rel="stylesheet">
		<link rel="modulepreload" href="./_app/immutable/entry/start.79578219.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/index.039744db.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/index.ed607ba6.js">
		<link rel="modulepreload" href="./_app/immutable/entry/app.f1d69d02.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/0.e8720356.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/2.5ddf55e3.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Footer.49d47033.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Socials.6b66f427.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/ContentSection.262ea9c0.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/regex.7dfa9b23.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Image.c842a0b8.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/meta.82364fc2.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/11.cadc3f54.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/CodeBlock.26022daa.js"><title>Make a multiplayer card game - Episode 1 - SvelteKit Static Blog Template</title><!-- HEAD_svelte-1ylu8nc_START --><meta name="keywords" content="Tutorial:Make a multiplayer card game, Svelte, SvelteKit, Template, Blog, Starter, Static Site">

		<meta name="description" content="Create a simple server and client from scratch">
		<meta property="og:description" content="Create a simple server and client from scratch">
		<meta name="twitter:description" content="Create a simple server and client from scratch">
		<link rel="canonical" href="https://sveltekit-static-blog-template.vercel.app//create-a-simple-server-and-client-from-scratch-e1">

		
		<meta property="og:title" content="Make a multiplayer card game - Episode 1 - SvelteKit Static Blog Template">
		<meta name="twitter:title" content="Make a multiplayer card game - Episode 1 - SvelteKit Static Blog Template">

		<meta property="og:image" content="https://sveltekit-static-blog-template.vercel.app//images/posts/blog-posts.jpg">
			<meta name="twitter:image" content="https://sveltekit-static-blog-template.vercel.app//images/posts/blog-posts.jpg"><!-- HEAD_svelte-1ylu8nc_END -->
	</head>
	<body data-sveltekit-preload-data="hover">
		<div id="svelte-root">



<div class="article-layout svelte-1hgysft"><header class="svelte-1gvg2a4 has-background"><nav class="container svelte-1gvg2a4"><a class="logo svelte-1gvg2a4" href="/" aria-label="Site logo"><div class="logo svelte-qu2viy animated"><svg id="logo-text" width="723.84009" height="116.720268" viewBox="0 0 723.84009 116.720269" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-qu2viy"><text xml:space="preserve" id="text" transform="translate(-278.77228,-206.83728)" class="svelte-qu2viy"><tspan x="275.57227" y="292.17088" id="tspan1319"><tspan style="font-size:106.667px;font-family:YoungSerif;" id="tspan1317">lizhiyu.me</tspan></tspan></text></svg>
</div></a>
		<div class="links svelte-1gvg2a4"><a href="/blog" class="svelte-1gvg2a4">Blog</a>
			<a href="/rss.xml" target="_blank" rel="noopener noreferrer" title="Subscribe to my RSS Feed" class="svelte-1llmev"><svg width="100%" height="100%" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 19C12 14.8 9.2 12 5 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19 19C19 10.6 13.4 5 5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5 19.01L5.01 18.9989" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path></svg></a>
			<noscript>
	<style>.theme-toggle {
			display: none !important;
		}
	</style></noscript>
<button class="theme-toggle svelte-niuf71" title="Toggle between light and dark theme"><svg aria-hidden="true" width="24" height="24" viewBox="0 0 24 24"><mask id="moon" class="svelte-niuf71"><rect x="0" y="0" width="100%" height="100%" fill="white" class="svelte-niuf71"></rect><circle cx="40" cy="8" r="11" fill="black" class="svelte-niuf71"></circle></mask><circle id="sun" cx="12" cy="12" r="11" mask="url(#moon)" class="svelte-niuf71"></circle><g id="sun-beams" class="svelte-niuf71"><line x1="12" y1="1" x2="12" y2="3" class="svelte-niuf71"></line><line x1="12" y1="21" x2="12" y2="23" class="svelte-niuf71"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" class="svelte-niuf71"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" class="svelte-niuf71"></line><line x1="1" y1="12" x2="3" y2="12" class="svelte-niuf71"></line><line x1="21" y1="12" x2="23" y2="12" class="svelte-niuf71"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" class="svelte-niuf71"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" class="svelte-niuf71"></line></g></svg>
	<span class="label svelte-niuf71">Auto</span>
</button></div></nav>
</header>
	<main><article id="article-content" class="svelte-1hgysft"><div class="header svelte-1hgysft"><h1>Make a multiplayer card game - Episode 1</h1>
					<div class="note svelte-1hgysft">Published on 01 February 2021</div>
					
					<div class="note svelte-1hgysft">2 min read</div>
					<div class="tags svelte-1hgysft"><div class="tag primary svelte-1xh8qlg">Tutorial:Make a multiplayer card game</div></div></div>
			<div class="cover-image svelte-1hgysft"><img srcset="/images/posts/blog-posts.avif, /images/posts/blog-posts.webp, /images/posts/blog-posts.png" src="/images/posts/blog-posts.jpg" alt="Make a multiplayer card game - Episode 1" loading="lazy" decoding="async" class="svelte-1ykl0dj"></div>
			<div class="content svelte-1hgysft"><h2 id="make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch"><a class="heading-link" title="Permalink" aria-hidden="true" href="#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch"><span>#</span></a>Make a multiplayer card game - Episode 1 | Create a simple server and client from scratch</h2>
<p>In the coming weeks, I’ll be updating a series of tutorials on making a
multiplayer online card games base on the rule of the most popular Chinese card
game “Doudizhu”, which means battle with landlord. I divide this series in many
small part to make it easy for most friends. If you know a little javascript,
all the better.</p>
<p>Parts including:</p>
<ul><li>create a simple server and client</li>
<li>play cards in terminal with bots</li>
<li>communicate with server by protobuf</li>
<li>play cards in terminal with other players</li>
<li>create 2D graphical interface with Cocos Creator</li>
<li>create 2D graphical interface with React</li>
<li>create 3D graphical interface with Three.js</li>
<li>add physical lib ammo.js to add a tiny game</li>
<li>connect to Web3 world</li></ul>
<p><em>open your terminal, input <code>node -v</code>, if something go wrong, please install
node.js first <a href="Link">https://nodejs.org</a>.</em></p>
<p>directory structure :
<img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1644775769474/2OAtz4Ljw.jpeg" alt="demo0-document-tree.jpg"></p>
<p>create a server, server/index.js:</p>
<div class="code-block svelte-1pkpsrg">
	
	<pre class="language-ts"><!-- HTML_TAG_START --><code class="language-ts"><span class="token keyword">const</span> net <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">"net"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> net<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span>socket<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token function">handlerData</span><span class="token punctuation">(</span>socket<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">handlerData</span><span class="token punctuation">(</span>socket<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token function">send</span><span class="token punctuation">(</span>socket<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token string-property property">"msg"</span><span class="token operator">:</span> <span class="token string">"Welcome, friend."</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function">send</span><span class="token punctuation">(</span>socket<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">let</span> bufferData <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  socket<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bufferData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"server listening on 127.0.0.1:8080"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre>
</div>
<p>create client, client/index.js:</p>
<div class="code-block svelte-1pkpsrg">
	
	<pre class="language-ts"><!-- HTML_TAG_START --><code class="language-ts"><span class="token keyword">const</span> net <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">"net"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">net</span><span class="token punctuation">.</span><span class="token function">Socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

socket<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  host<span class="token operator">:</span> <span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span>
  port<span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> onConnected<span class="token punctuation">)</span><span class="token punctuation">;</span>

socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>buffer<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token function">decode</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>buffer<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">onConnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token function">startGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function">decode</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> bufferData <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token string-property property">"msg"</span><span class="token operator">:</span> data <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  socket<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bufferData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function">startGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">"Hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre>
</div>
<p>run :</p>
<p><code>cd server</code></p>
<p><code>node index.js</code></p>
<p><code>cd client</code></p>
<p><code>node index.js</code></p>
<p>result:</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1644776034549/t-Jir1j9R.png" alt="demo0-cmd-result.png"></p>
<p>This episode is end here, the complete demo can be found on
<a href="https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode1" rel="nofollow">https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode1</a></p>
<p>Any problems, discussion is welcome.</p>
<p><strong>In the next section, we will add the logic of Doudizhu game, and you will have
completed a playable game in your terminal. </strong></p>
<p>Thanks for your reading.</p></div></article>
		<div class="container"><section id="related-posts" class="content-section top svelte-emrvls"><div class="title-area svelte-emrvls"><div class="text svelte-emrvls"><h2>Related Posts</h2>
				</div>
		</div>
	<div class="content-area svelte-emrvls"><div class="simple-grid svelte-ypk0wh"><a class="card blog-post-card no-image svelte-1kz16cj" href="/babylon-trans-1" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">从零开始，与BabylonJS一起，开启你的Web3D之旅吧</p>
		<div class="note svelte-1i7t6gt">8 min read</div>
		</div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"></div></div></div>
</a><a class="card blog-post-card no-image svelte-1kz16cj" href="/babylon-trans-2" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">熟悉熟悉官方文档，逐步深入Babylon.js</p>
		<div class="note svelte-1i7t6gt">6 min read</div>
		</div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"></div></div></div>
</a><a class="card blog-post-card no-image svelte-1kz16cj" href="/change-json-to-protocol-buffers-e3" target="_self" data-sveltekit-preload-data><div class="image svelte-1kz16cj"><div class="image" slot="image"></div></div>
	<div class="body svelte-1kz16cj"><div class="content svelte-1kz16cj"><div class="content svelte-1i7t6gt" slot="content"><p class="title svelte-1i7t6gt">Make a multiplayer card game - Episode 3</p>
		<div class="note svelte-1i7t6gt">3 min read</div>
		<p class="text svelte-1i7t6gt">Change JSON to Protocol Buffers</p></div></div>
		<div class="footer"><div class="footer svelte-1i7t6gt" slot="footer"><div class="tags svelte-1i7t6gt"><div class="tag primary svelte-1xh8qlg">Tutorial:Make a multiplayer card game</div></div></div></div></div>
</a></div></div>
</section></div></main>
	<footer class="svelte-1m94jhe"><div class="wave"><svg width="100%" height="120" viewBox="0 0 1440 120" fill="none" style="transform: scale(-1,-1)" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" class="footer__wave"><path d="M0 0L48 8.875C96 17.9167 192 35.4167 288 53.3333C384 71.25 480 88.75 576 82.2083C672 75.4167 768 44.5833 864 26.6667C960 8.75 1056 4.58333 1152 11.125C1248 17.9167 1344 35.4167 1392 44.4583L1440 53.3333V120H1392C1344 120 1248 120 1152 120C1056 120 960 120 864 120C768 120 672 120 576 120C480 120 384 120 288 120C192 120 96 120 48 120H0V0Z" fill="var(--body-background-color)"></path></svg></div>
	<div class="content svelte-1m94jhe"><div class="copyright">This template was built by <a href="https://fantinel.dev?utm_source=site-template" target="_blank" rel="noopener noreferrer" class="svelte-1m94jhe">Matheus Fantinel</a>.
		</div>
		<div class="credits svelte-1m94jhe">Powered by <a href="https://kit.svelte.dev/" target="_blank" rel="noopener noreferrer" class="svelte-1m94jhe">SvelteKit</a>. Icons by
			<a href="https://iconoir.com/" target="_blank" rel="noopener noreferrer" class="svelte-1m94jhe">Iconoir</a>.
		</div>
		<div class="socials svelte-1m94jhe"><div class="socials svelte-t4kqcq">
	
	
	
	<a href="https://twitter.com/lychee_fish" target="_blank" rel="noopener noreferrer" title="Send an email" class="svelte-t4kqcq"><svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22.5 5.63a9.04 9.04 0 0 1-2.56 0.7 4.48 4.48 0 0 0 2-2.49 9 9 0 0 1-2.82 1.08 4.5 4.5 0 0 0-7.68 4.08 12.77 12.77 0 0 1-9.25-4.68 4.49 4.49 0 0 0 1.39 6 4.42 4.42 0 0 1-2.03-0.56v0.06a4.5 4.5 0 0 0 3.6 4.41 4.5 4.5 0 0 1-2.03 0.08 4.5 4.5 0 0 0 4.19 3.12 9 9 0 0 1-5.6 1.93A9.15 9.15 0 0 1 2 19.74a12.7 12.7 0 0 0 6.88 2.02c8.26 0 12.79-6.84 12.79-12.79v-0.61a9.13 9.13 0 0 0 2.24-2.33" fill="currentColor"></path></svg></a>
	<a href="mailto:lizhiyu.me@gmail.com" target="_blank" rel="noopener noreferrer" title="Send an email" class="svelte-t4kqcq"><svg width="100%" height="100%" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 9L12 12.5L17 9" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2 17V7C2 5.89543 2.89543 5 4 5H20C21.1046 5 22 5.89543 22 7V17C22 18.1046 21.1046 19 20 19H4C2.89543 19 2 18.1046 2 17Z" stroke="currentColor" stroke-width="1.5"></path></svg></a>
</div>
			<a href="/rss.xml" target="_blank" rel="noopener noreferrer" title="Subscribe to my RSS Feed" class="svelte-1llmev"><svg width="100%" height="100%" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 19C12 14.8 9.2 12 5 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19 19C19 10.6 13.4 5 5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5 19.01L5.01 18.9989" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path></svg></a>
			<noscript>
	<style>.theme-toggle {
			display: none !important;
		}
	</style></noscript>
<button class="theme-toggle svelte-niuf71" title="Toggle between light and dark theme"><svg aria-hidden="true" width="24" height="24" viewBox="0 0 24 24"><mask id="moon" class="svelte-niuf71"><rect x="0" y="0" width="100%" height="100%" fill="white" class="svelte-niuf71"></rect><circle cx="40" cy="8" r="11" fill="black" class="svelte-niuf71"></circle></mask><circle id="sun" cx="12" cy="12" r="11" mask="url(#moon)" class="svelte-niuf71"></circle><g id="sun-beams" class="svelte-niuf71"><line x1="12" y1="1" x2="12" y2="3" class="svelte-niuf71"></line><line x1="12" y1="21" x2="12" y2="23" class="svelte-niuf71"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" class="svelte-niuf71"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" class="svelte-niuf71"></line><line x1="1" y1="12" x2="3" y2="12" class="svelte-niuf71"></line><line x1="21" y1="12" x2="23" y2="12" class="svelte-niuf71"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" class="svelte-niuf71"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" class="svelte-niuf71"></line></g></svg>
	<span class="label svelte-niuf71">Auto</span>
</button></div></div>
</footer>
</div>

			
			<script>
				{
					__sveltekit_ax7rav = {
						base: new URL(".", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [null,{"type":"data","data":{post:{title:"Make a multiplayer card game - Episode 1",slug:"create-a-simple-server-and-client-from-scratch-e1",coverImage:"/images/posts/blog-posts.jpg",date:"2021-02-01T21:55:15.361Z",excerpt:"Create a simple server and client from scratch",tags:["Tutorial:Make a multiplayer card game"],html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C/h2>\n\u003Cp>In the coming weeks, I’ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame “Doudizhu”, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C/p>\n\u003Cp>Parts including:\u003C/p>\n\u003Cul>\u003Cli>create a simple server and client\u003C/li>\n\u003Cli>play cards in terminal with bots\u003C/li>\n\u003Cli>communicate with server by protobuf\u003C/li>\n\u003Cli>play cards in terminal with other players\u003C/li>\n\u003Cli>create 2D graphical interface with Cocos Creator\u003C/li>\n\u003Cli>create 2D graphical interface with React\u003C/li>\n\u003Cli>create 3D graphical interface with Three.js\u003C/li>\n\u003Cli>add physical lib ammo.js to add a tiny game\u003C/li>\n\u003Cli>connect to Web3 world\u003C/li>\u003C/ul>\n\u003Cp>\u003Cem>open your terminal, input \u003Ccode>node -v\u003C/code>, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\">https://nodejs.org\u003C/a>.\u003C/em>\u003C/p>\n\u003Cp>directory structure :\n\u003Cimg src=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1644775769474/2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\">\u003C/p>\n\u003Cp>create a server, server/index.js:\u003C/p>\n\u003Cdiv class=\"code-block svelte-1pkpsrg\">\n\t\n\t\u003Cpre class=\"language-ts\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-ts\">\u003Cspan class=\"token keyword\">const\u003C/span> net \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">require\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"net\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> server \u003Cspan class=\"token operator\">=\u003C/span> net\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">createServer\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">on\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"data\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token function\">handlerData\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> data\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">handlerData\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">send\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token string-property property\">\"msg\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Welcome, friend.\"\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">send\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> bufferData \u003Cspan class=\"token operator\">=\u003C/span> Buffer\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">from\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token constant\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">stringify\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">write\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>bufferData\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\nserver\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">listen\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">8080\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"server listening on 127.0.0.1:8080\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003C/div>\n\u003Cp>create client, client/index.js:\u003C/p>\n\u003Cdiv class=\"code-block svelte-1pkpsrg\">\n\t\n\t\u003Cpre class=\"language-ts\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-ts\">\u003Cspan class=\"token keyword\">const\u003C/span> net \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">require\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"net\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">const\u003C/span> socket \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">net\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">Socket\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\nsocket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">connect\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  host\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"127.0.0.1\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n  port\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">8080\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> onConnected\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\nsocket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">on\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"data\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">decode\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\nsocket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">on\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"error\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">onConnected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">startGame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">decode\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token constant\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">parse\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>msg\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">request\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> bufferData \u003Cspan class=\"token operator\">=\u003C/span> Buffer\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">from\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token constant\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">stringify\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token string-property property\">\"msg\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> data \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">write\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>bufferData\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">startGame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">request\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"Hello, world!\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003C/div>\n\u003Cp>run :\u003C/p>\n\u003Cp>\u003Ccode>cd server\u003C/code>\u003C/p>\n\u003Cp>\u003Ccode>node index.js\u003C/code>\u003C/p>\n\u003Cp>\u003Ccode>cd client\u003C/code>\u003C/p>\n\u003Cp>\u003Ccode>node index.js\u003C/code>\u003C/p>\n\u003Cp>result:\u003C/p>\n\u003Cp>\u003Cimg src=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1644776034549/t-Jir1j9R.png\" alt=\"demo0-cmd-result.png\">\u003C/p>\n\u003Cp>This episode is end here, the complete demo can be found on\n\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode1\" rel=\"nofollow\">https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode1\u003C/a>\u003C/p>\n\u003Cp>Any problems, discussion is welcome.\u003C/p>\n\u003Cp>\u003Cstrong>In the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C/strong>\u003C/p>\n\u003Cp>Thanks for your reading.\u003C/p>",readingTime:"2 min read",relatedPosts:[{title:"从零开始，与BabylonJS一起，开启你的Web3D之旅吧",slug:"babylon-trans-1",coverImage:"/images/posts/blog-posts.jpg",date:"2021-08-31T21:55:15.361Z",excerpt:null,tags:null,html:"\u003Ch2 id=\"从零开始与babylonjs一起开启你的web3d之旅吧\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#从零开始与babylonjs一起开启你的web3d之旅吧\">\u003Cspan>#\u003C/span>\u003C/a>从零开始，与BabylonJS一起，开启你的Web3D之旅吧\u003C/h2>\n\u003Cp>![Screen Shot 2022-07-22 at 00.33.32.png](\u003Ca href=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1658421252897/Jwqbfh4sf.png\" rel=\"nofollow\">https://cdn.hashnode.com/res/hashnode/image/upload/v1658421252897/Jwqbfh4sf.png\u003C/a> align=“left”)\u003C/p>\n\u003Cblockquote>\u003Cp>欢迎来到 BabylonJS 零基础教程，本教程为萌新导向。无论你是Web开发的专家，富有想象力的设计师，还是充满好奇心的学生，只要你对3D相关的内容感兴趣。本教程都是你学习BabylonJS的绝佳开始，我们强烈建议每一个BabylonJS的初学者都从本教程开始学习。\u003C/p>\u003C/blockquote>\n\u003Cp>本教程将与你一起，在浏览器上打造一个BabylonJS的小项目。你将了解到BabylonJS的演习场（playground），从最基础的引擎核心开始，完成一个可供发布的.html网页文件。\u003C/p>\n\u003Ch3 id=\"演习场playground\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#演习场playground\">\u003Cspan>#\u003C/span>\u003C/a>演习场（playground）\u003C/h3>\n\u003Cp>演习场是你开发BabylonJS程序最重要的工具，注意，没有之一。\u003C/p>\n\u003Cp>![playground.jpeg](\u003Ca href=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1658421347293/kOkoHCp2b.jpeg\" rel=\"nofollow\">https://cdn.hashnode.com/res/hashnode/image/upload/v1658421347293/kOkoHCp2b.jpeg\u003C/a> align=“left”)\u003C/p>\n\u003Cp>在演习场中，你可以随时随地实践你的想法，打造你的实验项目。将代码写入左侧的类似VS Code的编辑界面中，在右侧就能立马运行显示结果。\u003C/p>\n\u003Cp>演习场将是你学习旅途中的贴心小伙伴，因为它提供了全宇宙最科学的循环学习体系，输入代码-&gt;察看结果，让你在反复实践中找到感觉。除此之外，还有一点十分重要，你可以随时保存或分享演习场的内容。这在你学习的过程中遇到问题时变得十分有用，你可以通过\u003Ca href=\"https://forum.babylonjs.com/\" rel=\"nofollow\">Babylon.js 论坛\u003C/a>寻求帮助，官方的开发者和社区工作人员随时为你效劳。\u003C/p>\n\u003Cp>当我们在帮助你解决问题的时候，最好的方法就是你能将问题通过演练场分享出来，这样一来，我们就能快速地定位到问题的关键所在。所以，只要你遇到任何问题，保存你的演练场，分享到论坛。你一定会被我们迅雷不及掩耳的回复速度所震撼。\u003C/p>\n\u003Cp>说了这么多，既然演练场这重要，我们就来实操一下吧。\u003C/p>\n\u003Cp>新建一个页面打开下方链接：\u003C/p>\n\u003Cp>\u003Ca href=\"https://playground.babylonjs.com/\" rel=\"nofollow\">Babylon.js Playground\u003C/a>\u003C/p>\n\u003Ch3 id=\"创建你的第一个场景\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#创建你的第一个场景\">\u003Cspan>#\u003C/span>\u003C/a>创建你的第一个场景\u003C/h3>\n\u003Cp>欢迎来到演习场，你只需要在左边修改/创建代码，就能在右边窗口看见实时运行结果。下面是我们为你提供的一个默认模版场景。快速地瞄一眼代码编辑窗口的绿色注释文字，这些文字会告诉你每一行代码的作用，贴心吧？\u003C/p>\n\u003Cp>最好的学习方法就是在敲代码，边敲边学，边学边敲。\u003C/p>\n\u003Cp>来让我们来尝试给这个默认场景做些调整。\u003C/p>\n\u003Cp>20-24行代码：\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token comment\">// Our built-in 'sphere' shape. //引擎内建的球体。\u003C/span>\n\u003Cspan class=\"token keyword\">var\u003C/span> sphere \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token constant\">BABYLON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>MeshBuilder\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">CreateSphere\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"sphere\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>diameter\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> segments\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">32\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> scene\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token comment\">// Move the sphere upward 1/2 its height //将球体移动到它一半高度的位置,上面创建直径设置的是2，所以这里设置位置的y属性指为1\u003C/span>\nsphere\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>y \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>选中这几行代码，删掉它！\u003C/p>\n\u003Cp>你已经做出了第一个改动！\u003C/p>\n\u003Cp>感觉还不错吧？\u003C/p>\n\u003Cp>但…等一下，场景当中怎么没有发生任何事情？\u003C/p>\n\u003Cp>因为我们需要在修改了代码之后，需要重新启动演练场才能看到变更结果。\u003C/p>\n\u003Cp>你可以点击启动按钮\u003C/p>\n\u003Cp>![run.jpeg](\u003Ca href=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1658421373423/9YF1Zc_hY.jpeg\" rel=\"nofollow\">https://cdn.hashnode.com/res/hashnode/image/upload/v1658421373423/9YF1Zc_hY.jpeg\u003C/a> align=“left”)\u003C/p>\n\u003Cp>，也可以按组合键\u003Ccode>ALT+ENTER\u003C/code>\u003C/p>\n\u003Cp>场景中的这个球不见了，神奇吧！\u003C/p>\n\u003Cp>\u003Ca href=\"https://playground.babylonjs.com/#2KRNG9\" rel=\"nofollow\">点击查看Playground结果\u003C/a>\u003C/p>\n\u003Cblockquote>\u003Cp>如果你遇到任何问题，可以通过打开链接，对比自己的代码来查找错误\u003C/p>\u003C/blockquote>\n\u003Cp>让我们来做一点别的改动。\u003C/p>\n\u003Cp>找到创建地面的代码所在的行，在下面加上如下代码：\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token keyword\">let\u003C/span> groundMaterial \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">\u003Cspan class=\"token constant\">BABYLON\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">StandardMaterial\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"Ground Material\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> scene\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\nground\u003Cspan class=\"token punctuation\">.\u003C/span>material \u003Cspan class=\"token operator\">=\u003C/span> groundMaterial\u003Cspan class=\"token punctuation\">;\u003C/span>\nground\u003Cspan class=\"token punctuation\">.\u003C/span>material\u003Cspan class=\"token punctuation\">.\u003C/span>diffuseColor \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token constant\">BABYLON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>Color3\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">Red\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>再此运行（按组合键ALT+ENTER 或 点击播放按钮）\u003C/p>\n\u003Cp>\u003Ca href=\"https://playground.babylonjs.com/#2KRNG9#1\" rel=\"nofollow\">点击查看Playground结果\u003C/a>\u003C/p>\n\u003Cp>恭喜！你成功创建了一个新的材质，并将材质赋值给了地面，还将材质的漫反射通道设置为红色！\u003C/p>\n\u003Cp>很简单吧？如果你还有点懵也没关系，在这里我们需要知道的就是在左边输入代码，在右边察看结果😀\u003C/p>\n\u003Cp>接下来，让我们来再做第一小改动。\u003C/p>\n\u003Cp>找到这一行代码：\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">ground\u003Cspan class=\"token punctuation\">.\u003C/span>material\u003Cspan class=\"token punctuation\">.\u003C/span>diffuseColor \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token constant\">BABYLON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>Color3\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">Red\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>用下面两行代码替换掉它：\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token keyword\">let\u003C/span> groundTexture \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">\u003Cspan class=\"token constant\">BABYLON\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">Texture\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>Assets\u003Cspan class=\"token punctuation\">.\u003C/span>textures\u003Cspan class=\"token punctuation\">.\u003C/span>checkerboard_basecolor_png\u003Cspan class=\"token punctuation\">.\u003C/span>rootUrl\u003Cspan class=\"token punctuation\">,\u003C/span> scene\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\nground\u003Cspan class=\"token punctuation\">.\u003C/span>material\u003Cspan class=\"token punctuation\">.\u003C/span>diffuseTexture \u003Cspan class=\"token operator\">=\u003C/span> groundTexture\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>\u003Ca href=\"https://playground.babylonjs.com/#2KRNG9#2\" rel=\"nofollow\">点击查看Playground结果\u003C/a>\u003C/p>\n\u003Cp>恭喜+1！你创建了你的第一个Texture并赋值给了地面材质。\u003C/p>\n\u003Cp>让我们继续，在你所有创建和设置地面相关的代码后面，敲几个回车，留出点空隙来展示演习场提供给我们的大杀器—提示模板。\u003C/p>\n\u003Cp>输入\u003Ccode>import\u003C/code> 你将看到界面上生成了一个列表，列表里边是代码片段，每一个片段都是一个小的功能实现。\u003C/p>\n\u003Cp>让我们选择 \u003Ccode>Import a Mesh w/Callback\u003C/code> ，再按下回车。\u003C/p>\n\u003Cp>如下代码将立即出现在你的输入框里：\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token constant\">BABYLON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>SceneLoader\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">ImportMesh\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"meshName\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token string\">\"url to the mesh parent directory\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token string\">\"Mesh filename.fileextension\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> scene\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token keyword\">function\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>newMeshes\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>我们需要在模版代码的基础上做一些小小的润色：\u003C/p>\n\u003Cul>\u003Cli>\u003Cp>1.删掉\u003Ccode>meshName\u003C/code>,注意需要保留引号。\u003C/p>\u003C/li>\n\u003Cli>\u003Cp>2.将\u003Ccode>&quot;url to the mesh parent directory&quot;\u003C/code>（包括双引号） 替换为\u003Ccode>Assets.meshes.Yeti.rootUrl\u003C/code>\u003C/p>\u003C/li>\n\u003Cli>\u003Cp>3.将”Mesh filename.fileextension” （包括双引号）替换为\u003Ccode>Assets.meshes.Yeti.filename\u003C/code>\u003C/p>\u003C/li>\n\u003Cli>\u003Cp>4.在\u003Ccode>BABYLON.SceneLoader.ImportMesh\u003C/code> 这一行下面，在\u003Ccode>&quot;});&quot;\u003C/code>之前，输入：\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">newMeshes\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>scaling \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">\u003Cspan class=\"token constant\">BABYLON\u003C/span>\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">Vector3\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">0.1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0.1\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0.1\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\u003C/li>\n\u003Cli>\u003Cp>5.运行\u003C/p>\n\u003Cp>\u003Ca href=\"https://playground.babylonjs.com/#2KRNG9#3\" rel=\"nofollow\">点击查看Playground结果\u003C/a>\u003C/p>\u003C/li>\u003C/ul>\n\u003Cp>恭喜+1！你成功创建了一个.gltf格式的动画模型，并调整了它的缩放比例来适配地面。\u003C/p>\n\u003Cp>最后，让我们把创建好的场景动起来，让他跟随我们的鼠标滑动而调整镜头显示内容。\u003C/p>\n\u003Cp>删除5-9行的代码，输入createarc，在提示代码模版列表中选择 \u003Ccode>Create An Arc Rotate Camera w/Degree\u003C/code>。\u003C/p>\n\u003Cp>再次运行，按住鼠标拖动或者触摸拖动场景，相机的视角就会跟随你的拖动和滑动变化啦。\u003C/p>\n\u003Cblockquote>\u003Cp>本篇为翻译BabylonJS官方教程的开始,后续将陆续更新相关系列文章\u003C/p>\u003C/blockquote>\n\u003Cp>\u003Ca href=\"https://doc.babylonjs.com/journey/theFirstStep\" rel=\"nofollow\">原文链接\u003C/a>\u003C/p>",readingTime:"8 min read"},{title:"熟悉熟悉官方文档，逐步深入Babylon.js",slug:"babylon-trans-2",coverImage:"/images/posts/blog-posts.jpg",date:"2021-09-08T21:55:15.361Z",excerpt:null,tags:null,html:"\u003Ch3 id=\"文档的组织结构\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#文档的组织结构\">\u003Cspan>#\u003C/span>\u003C/a>文档的组织结构\u003C/h3>\n\u003Chr>\n\u003Cp>通过前一篇文章的了解，我们会对Babylon.js有了一个大致的了解，整个文档主要是想带你逐步深入掌握这个Babylon.js所提供的所有内容。\n内容主要分为一个概览和9个主要部分，这些部分包含章节，还有API详解和强大的文档和playground搜索功能。\u003C/p>\n\u003Cp>- 1.Babylon.js特性 -\nBabylon.js是一个功能完备的游戏和渲染引擎，具有广泛的特性。这个部分将带你了解这些特性，并帮助你编码和使用它们。\\\n- 2.将Babylon.js添加到你的Web项目中 -\n有多种方式可以在你的web应用中使用Babylon.js并设置Babylon.js项目。通过这个部分内容，你能了解到如何轻松地将Babylon.js融入自己的项目，并打造出别具一格的产品，并且还为你提供一些项目模板和支持。\\\n- 3.Playground -\n对Babylon.js的核心资源进行详细的查看，了解如何使用它以及它所提供的许多功能设施，包括搜索所有playground以查找其他人所做的示例（这一点真心觉得很棒）。\\\n- 4.工具和资源 -\nBabylon.js有许多令人难以置信的工具，使开发过程简单而愉快。它还有几个内容库供你完全免费使用。这个部分将帮助你理解并利用他们。\\\n- 5.为Babylon.js准备素材 -\n从模型和动画，到纹理，LUTS和HDR图像，在这个部分学习准备Babylon.js内容的工作流和方法。\\\n- 6.Babylon.js跨平台 -\n在这个部分，你将学习如何扩展Babylon.js，并使用它开发几乎任何你能想象的平台的原生应用。\\\n- 7.贡献 -\n对于那些想要扩展Babylon.js边界的人，这个部分描述了需要什么以及如何为Babylon.js的代码库和文档做出贡献。\\\n- 8.引导式学习 -\n有时候边做边学是最好的。这个部分帮助你做到这一点。这些逐步的文章和教程将帮助你从社区的一些最好和最聪明的老师那里学习（babylon.js\n社区的维护者似乎是真的闲，有时候很简单甚至看起来有些幼稚的问题都会得到很详细的回答，这一点是真的佩服）。\\\n-9.社区扩展 -\n在这个部分，你将找到由极其有才华和热情的社区构建的对Babylon.js的令人难以置信的资源和扩展。\u003C/p>\n\u003Ch3 id=\"如何去使用文档\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#如何去使用文档\">\u003Cspan>#\u003C/span>\u003C/a>如何去使用文档\u003C/h3>\n\u003Chr>\n\u003Cp>Babylon.js是一个丰富的API，希望尽可能简单地利用GPU的强大功能来提升浏览器的上网体验。你可以通过用javascript或typescript编写Babylon.js场景代码来利用这个强大的API。为了保持一致性并最大化文档的可访问性，这些页面中找到的所有示例代码都将用javascript提供。\u003C/p>\n\u003Cp>文档页面布局有几个特性，你需要了解这些特性，以便在学习旅程中获得最大的收益。\n首先，最左边的面板是导航窗格。这个窗格是你导航到想去的地方的方式。\u003C/p>\n\u003Cp>![Navigation Pane](\u003Ca href=\"https://doc.babylonjs.com/img/home/home1.jpg\" rel=\"nofollow\">https://doc.babylonjs.com/img/home/home1.jpg\u003C/a> align=“left”)\u003C/p>\n\u003Cp>接下来是内容窗格。它位于中间，包含主要的内容和信息。\u003C/p>\n\u003Cp>![Content Pane](\u003Ca href=\"https://doc.babylonjs.com/img/home/home2.jpg\" rel=\"nofollow\">https://doc.babylonjs.com/img/home/home2.jpg\u003C/a> align=“left”)\u003C/p>\n\u003Cp>一些页面有很多信息，这些信息被组织成子部分。目录窗格使得在较长的页面中导航变得容易。\u003C/p>\n\u003Cp>![Table of Contents](\u003Ca href=\"https://doc.babylonjs.com/img/home/home4.jpg\" rel=\"nofollow\">https://doc.babylonjs.com/img/home/home4.jpg\u003C/a> align=“left”)\u003C/p>\n\u003Cp>右边的面板是示例窗格。它提供了对当前页面上每个playground（实时示例）的快速访问。\u003C/p>\n\u003Cp>![Examples Pane](\u003Ca href=\"https://doc.babylonjs.com/img/home/home3.jpg\" rel=\"nofollow\">https://doc.babylonjs.com/img/home/home3.jpg\u003C/a> align=“left”)\u003C/p>\n\u003Cp>最后，如果你在示例窗格中选择任何一个示例，它将在页面内容顶部的playground窗格内加载该示例。\u003C/p>\n\u003Cp>![Examples Pane](\u003Ca href=\"https://doc.babylonjs.com/img/home/home5.jpg\" rel=\"nofollow\">https://doc.babylonjs.com/img/home/home5.jpg\u003C/a> align=“left”)\u003C/p>\n\u003Ch3 id=\"关于版本控制的说明\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#关于版本控制的说明\">\u003Cspan>#\u003C/span>\u003C/a>关于版本控制的说明\u003C/h3>\n\u003Chr>\n\u003Cp>Babylon.js文档是以Babylon.js的最新主版本为参考编写的。\u003Ca href=\"https://doc.babylonjs.com/typedoc\" rel=\"nofollow\">API 文档\u003C/a>是针对最新的每日构建生成的。\u003C/p>\n\u003Cp>如果你想使用最新版本在本地安装Babylon.js，请从\u003Ca href=\"https://www.npmjs.com/package/@babylonjs/core\" rel=\"nofollow\">npm页面\u003C/a>选择最新的发布版本，然后运行：\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">npm i @babylonjs/core@preview\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>不要对使用最新版本感到害怕。Babylon的npm发布版本被认为是稳定的，并且已经过团队的全面测试。\u003C/p>",readingTime:"6 min read"},{title:"Make a multiplayer card game - Episode 3",slug:"change-json-to-protocol-buffers-e3",coverImage:"/images/posts/blog-posts.jpg",date:"2021-02-22T21:55:15.361Z",excerpt:"Change JSON to Protocol Buffers",tags:["Tutorial:Make a multiplayer card game"],html:"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C/h2>\n\u003Cblockquote>\u003Cp>Protocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as “Lesser in\nSize and Better in Performance”, like this article\n\u003Ca href=\"https://anuragthakur.hashnode.dev/protobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\">Why Google moved from JSON to Protocol Buffers?\u003C/a>\nintroduce.\u003C/p>\u003C/blockquote>\n\u003Cp>I used it on all the projects I’ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C/p>\n\u003Cblockquote>\u003Cp>You can clone\n\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode3\" rel=\"nofollow\">demo for episode3\u003C/a>\nwhich including all the bellow content.\u003C/p>\u003C/blockquote>\n\u003Cp>According to the\n\u003Ca href=\"https://github.com/protocolbuffers/protobuf\" rel=\"nofollow\">official tutorial\u003C/a>, two steps\nshould be done:\u003C/p>\n\u003Col>\u003Cli>Install the runtime library \u003Ccode>google-protobuf\u003C/code>:\u003Ccode>npm install\ngoogle-protobuf\u003C/code>.\u003C/li>\n\u003Cli>Get the Protocol Compiler \u003Ccode>protoc\u003C/code>: download from\n\u003Ca href=\"https://github.com/protocolbuffers/protobuf/releases\" rel=\"nofollow\">https://github.com/protocolbuffers/protobuf/releases\u003C/a>\u003C/li>\u003C/ol>\n\u003Cp>Then run a command like \u003Ccode>protoc —js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C/code>, you can get the \u003Ccode>.js\u003C/code> file from\u003C/p>\n\u003Ccode>.proto\u003C/code>.\n\u003Cp>When the \u003Ccode>.js\u003C/code> file generated, the protocol buffers environment is\nready.\u003C/p>\n\u003Cp>Back to our game, we should create a \u003Ccode>.proto\u003C/code> file, named\u003C/p>\n\u003Ccode>card-game.proto\u003C/code>.\n\u003Cp>The first line in \u003Ccode>.proto\u003C/code> file should be:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">syntax = &quot;proto3&quot;;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>which means which version of Protobuf we are using.\u003C/p>\n\u003Cp>Define the enum of Cmd:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">enum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>enum Cmd is for routing, will be introduced later.\u003C/p>\n\u003Cp>Define MainMessage message:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">message MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>In order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C/p>\n\u003Cp>Define data message like:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">message DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Then, generate our own \u003Ccode>.js\u003C/code> file.\u003C/p>\n\u003Cp>As the episode3 demo show, run command bellow in directory proto.\u003C/p>\n\u003Cul>\u003Cli>\u003Cp>Windows\u003C/p>\n\u003Ccode>.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C/code>\u003C/li>\n\u003Cli>\u003Cp>MacOS\u003C/p>\n\u003Ccode>./protoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C/code>\u003C/li>\u003C/ul>\n\u003Cp>Now, we have our own \u003Ccode>.js\u003C/code> file from the \u003Ccode>.proto\u003C/code> in which\nwe define message.\u003C/p>\n\u003Cp>Let’s encoding and decoding message with protocol buffers.\u003C/p>\n\u003Cp>Encoding: &gt;enum Cmd is used to map message type here\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">function encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Decoding: &gt;enum Cmd is used to map message type here\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">function decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cblockquote>\u003Cp>Caution:\u003C/p>\n\u003Col>\u003Cli>Attributes defined as \u003Cstrong>seat_number\u003C/strong> in \u003Ccode>.proto\u003C/code> file should be\ncall like getSeatNumber and setSeatNumebr.\u003C/li>\n\u003Cli>Attributes defined as \u003Cstrong>repeated\u003C/strong> type in \u003Ccode>.proto\u003C/code> should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C/li>\u003C/ol>\u003C/blockquote>",readingTime:"3 min read"}]}},"uses":{"url":1}},null];

					Promise.all([
						import("./_app/immutable/entry/start.79578219.js"),
						import("./_app/immutable/entry/app.f1d69d02.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 11],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
