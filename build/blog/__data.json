{"type":"data","nodes":[null,null,{"type":"data","data":[{"posts":1},[2,36,48,53,64,76,87,92,102,113,118,144,149],{"title":3,"slug":4,"coverImage":5,"date":6,"excerpt":7,"tags":8,"html":10,"readingTime":11,"relatedPosts":12},"Make a multiplayer card game - Episode 7 | Create 3D graphical interface with Three.js","make-a-multiplayer-card-game-episode-7","/images/posts/blog-posts.jpg","2021-04-02T21:55:15.361Z","Create 3D graphical interface with Three.js",[9],"Tutorial:Make a multiplayer card game","\u003Ch2 id=\"make-a-multiplayer-card-game---episode-7--create-3d-graphical-interface-with-threejs\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-7--create-3d-graphical-interface-with-threejs\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 7 | Create 3D graphical interface with Three.js\u003C/h2>\n\u003Cp>This section mainly introduces the use\nof\u003Ca href=\"https://docs.pmnd.rs/react-three-fiber/getting-started/introduction\" rel=\"nofollow\">react-three-fiber\u003C/a>(referred\nto as R3F bellow) to realize the construction of interactive scenes.\u003C/p>\n\u003Ch3 id=\"why-choose-r3f\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#why-choose-r3f\">\u003Cspan>#\u003C/span>\u003C/a>Why Choose R3F\u003C/h3>\n\u003Cul>\u003Cli>R3F just expresses Three.js in JSX, no extra overhead\u003C/li>\n\u003Cli>Build scenes in a declarative way with react, including but not limited to\ncomponents that can easily react to state, are easy to interact with, and can\nleverage Reactâ€™s ecosystem\u003C/li>\u003C/ul>\n\u003Ch3 id=\"scenario-construction-implementation\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#scenario-construction-implementation\">\u003Cspan>#\u003C/span>\u003C/a>Scenario construction implementation\u003C/h3>\n\u003Cul>\u003Cli>\u003Cstrong>Card\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cp>Note that the texture required for rendering is obtained by passing the image\naddress to \u003Ccode>useTexture\u003C/code>\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token comment\">//Card.tsx\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> useTexture \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"@react-three/drei\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> Mesh \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"three\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">Card\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\n  props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    faceTextureUrl\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    idx\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    beginX\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _selectedOffsetY \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">.2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _beginX \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>beginX\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> _texture \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useTexture\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    map\u003Cspan class=\"token operator\">:\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>faceTextureUrl\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>mesh\n      position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>_beginX \u003Cspan class=\"token operator\">+\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>idx \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">.5\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>idx \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">0.001\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      onClick\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>e\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">any\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        e\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">stopPropagation\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _targetMesh \u003Cspan class=\"token operator\">=\u003C/span> e\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"eventObject\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token keyword\">as\u003C/span> Mesh\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _pos \u003Cspan class=\"token operator\">=\u003C/span> _targetMesh\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _upY\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_pos\u003Cspan class=\"token punctuation\">.\u003C/span>y \u003Cspan class=\"token operator\">==\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> _upY \u003Cspan class=\"token operator\">=\u003C/span> _selectedOffsetY\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">else\u003C/span> _upY \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        _targetMesh\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">set\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_pos\u003Cspan class=\"token punctuation\">.\u003C/span>x\u003Cspan class=\"token punctuation\">,\u003C/span> _upY\u003Cspan class=\"token punctuation\">,\u003C/span> _pos\u003Cspan class=\"token punctuation\">.\u003C/span>z\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      userData\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token string-property property\">\"_d_cardSerial\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>serial \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>boxGeometry args\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">.001\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>meshStandardMaterial \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token operator\">...\u003C/span>_texture\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>mesh\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">export\u003C/span> \u003Cspan class=\"token keyword\">default\u003C/span> Card\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cul>\u003Cli>\u003Cstrong>Game Scene\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cp>First you must declare a Canvas node, because all three.js must be under the\nCanvas node\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token operator\">&lt;\u003C/span>Canvas\n  orthographic\n  camera\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> zoom\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">50\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> position\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">100\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> rotation\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token operator\">&lt;\u003C/span>R3fScene\n    mainHandCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    outCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>outCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    gameModel\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>R3fScene\u003Cspan class=\"token operator\">>\u003C/span>\n\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>Canvas\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>In order to facilitate the use of hooks provided by\u003C/p>\n\u003Ccode>@react-three/fiber\u003C/code> (three.js related hooks can only be used under\nthe Canvas node), the game scene node is proposed separately\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">R3fScene\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n  props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> mainHandCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> gameModel\u003Cspan class=\"token punctuation\">;\u003C/span> outCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    scene\u003Cspan class=\"token punctuation\">,\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token function\">useEffect\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>scene\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getObjectByName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> mainHandCards \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameModel \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>gameModel\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>context \u003Cspan class=\"token operator\">=\u003C/span> scene\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _prefix \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token string\">\"/faces/\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _readableName \u003Cspan class=\"token operator\">=\u003C/span> _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getCardReadableName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"rJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_B.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"bJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_R.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitDic \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"D\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"C\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"H\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"S\"\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitNumber\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> serial \u003Cspan class=\"token operator\">>>\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _suitDic\u003Cspan class=\"token punctuation\">[\u003C/span>_suitNumber\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _readableName \u003Cspan class=\"token operator\">+\u003C/span>\n        \u003Cspan class=\"token string\">\".png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token keyword\">let\u003C/span> _cardCount \u003Cspan class=\"token operator\">=\u003C/span> mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>length\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _beginX \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_cardCount \u003Cspan class=\"token operator\">-\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">.5\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token number\">1.5\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>CameraControls \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>ambientLight intensity\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.1\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>directionalLight color\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"white\"\u003C/span> position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">5\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-1\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-2\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-0\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>In order to reflect the 3D interface, add an orbiting camera (swipe the scene to\nadjust the camera corner)\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token function\">extend\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> OrbitControls \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">CameraControls\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n    gl\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> domElement \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  camera\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">set\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">10\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> controls \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useRef\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token function\">useFrame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>state\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token punctuation\">(\u003C/span>controls\u003Cspan class=\"token punctuation\">.\u003C/span>current \u003Cspan class=\"token keyword\">as\u003C/span> \u003Cspan class=\"token builtin\">unknown\u003C/span> \u003Cspan class=\"token keyword\">as\u003C/span> OrbitControls\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">update\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token comment\">// @ts-ignore\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>orbitControls\n      ref\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>controls\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      args\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>camera\u003Cspan class=\"token punctuation\">,\u003C/span> domElement\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      enableZoom\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      rotationSpeed\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.01\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Scene complete codeï¼š\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token comment\">//App.tsx\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> useEffect\u003Cspan class=\"token punctuation\">,\u003C/span> useRef\u003Cspan class=\"token punctuation\">,\u003C/span> useState \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"react\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> Canvas\u003Cspan class=\"token punctuation\">,\u003C/span> extend\u003Cspan class=\"token punctuation\">,\u003C/span> useFrame\u003Cspan class=\"token punctuation\">,\u003C/span> useThree \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"@react-three/fiber\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> OrbitControls \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"three/examples/jsm/controls/OrbitControls\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token string\">\"./App.css\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> Card \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./component/Card\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> GameModel \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./base/src/game/model/GameModel\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> GameSceneMediator \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./base/src/game/view/GameSceneMediator\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> GameSceneView \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./component/GameSceneView\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token function\">extend\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> OrbitControls \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">CameraControls\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n    gl\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> domElement \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  camera\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">set\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">10\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> controls \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useRef\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token function\">useFrame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>state\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token punctuation\">(\u003C/span>controls\u003Cspan class=\"token punctuation\">.\u003C/span>current \u003Cspan class=\"token keyword\">as\u003C/span> \u003Cspan class=\"token builtin\">unknown\u003C/span> \u003Cspan class=\"token keyword\">as\u003C/span> OrbitControls\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">update\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token comment\">// @ts-ignore\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>orbitControls\n      ref\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>controls\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      args\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>camera\u003Cspan class=\"token punctuation\">,\u003C/span> domElement\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      enableZoom\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      rotationSpeed\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.01\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">R3fScene\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n  props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> mainHandCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> gameModel\u003Cspan class=\"token punctuation\">;\u003C/span> outCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    scene\u003Cspan class=\"token punctuation\">,\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> mainHandCards \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameModel \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>gameModel\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>context \u003Cspan class=\"token operator\">=\u003C/span> scene\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _prefix \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token string\">\"/faces/\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _readableName \u003Cspan class=\"token operator\">=\u003C/span> _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getCardReadableName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"rJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_B.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"bJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_R.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitDic \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"D\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"C\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"H\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"S\"\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitNumber\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> serial \u003Cspan class=\"token operator\">>>\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _suitDic\u003Cspan class=\"token punctuation\">[\u003C/span>_suitNumber\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _readableName \u003Cspan class=\"token operator\">+\u003C/span>\n        \u003Cspan class=\"token string\">\".png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token keyword\">let\u003C/span> _cardCount \u003Cspan class=\"token operator\">=\u003C/span> mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>length\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _beginX \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_cardCount \u003Cspan class=\"token operator\">-\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">.5\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token number\">1.5\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>CameraControls \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>ambientLight intensity\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.1\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>directionalLight color\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"white\"\u003C/span> position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">5\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-1\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-2\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-0\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">App\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">any\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameFacade \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>gameFacade\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameModel\u003Cspan class=\"token operator\">:\u003C/span> GameModel \u003Cspan class=\"token operator\">=\u003C/span> _gameFacade\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">retrieveProxy\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"GameModel\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">,\u003C/span> setMainHandCards\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useState\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>cardsArr\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>outCards\u003Cspan class=\"token punctuation\">,\u003C/span> setOutCards\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useState\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">setMainHandCardsHook\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>setMainHandCards\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">setOutCardsHook\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>setOutCards\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token function\">useEffect\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_gameFacade\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">retrieveMediator\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"GameSceneMediator\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">==\u003C/span> \u003Cspan class=\"token keyword\">null\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n      _gameFacade\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">registerMediator\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\n        \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">GameSceneMediator\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token keyword\">null\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">GameSceneView\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n      \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"canvas-container\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>Canvas\n          orthographic\n          camera\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> zoom\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">50\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> position\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">100\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> rotation\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n        \u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token operator\">&lt;\u003C/span>R3fScene\n            mainHandCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            outCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>outCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            gameModel\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n          \u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>R3fScene\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>Canvas\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div\n        id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"status\"\u003C/span>\n        style\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          display\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"fix\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n          textAlign\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"center\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n          fontSize\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"2em\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n          userSelect\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"none\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">>\u003C/span>\n        hello\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores-1\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores-2\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores-3\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-operation\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-operation-pass\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          pass\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-operation-play\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          play\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">export\u003C/span> \u003Cspan class=\"token keyword\">default\u003C/span> App\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Ch3 id=\"framework-adaptation-changes\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#framework-adaptation-changes\">\u003Cspan>#\u003C/span>\u003C/a>Framework adaptation changes\u003C/h3>\n\u003Cul>\u003Cli>\u003Cstrong>Getting scene node\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token function\">getViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>isDOM\u003Cspan class=\"token operator\">:\u003C/span>\u003Cspan class=\"token builtin\">boolean\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token boolean\">true\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>canvasScene\u003Cspan class=\"token operator\">:\u003C/span>\u003Cspan class=\"token builtin\">any\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">null\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        \u003Cspan class=\"token keyword\">if\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>isDOM\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> document\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getElementById\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n            \u003Cspan class=\"token keyword\">if\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>canvasScene\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> canvasScene\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getObjectByName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>By passing in the scene object of three.js, call the getObjectByName interface\nto obtain the node with the pre-set name attribute\u003C/p>\n\u003Cul>\u003Cli>\u003Cstrong>Card value acquisition, card.userData (\u003Ccode>userData\u003C/code> is the loading\nobject of custom attributes in R3F, similar to \u003Ccode>data-yourAttribute\u003C/code>\nin react, here you can encapsulate a method to decouple GameSceneMediator from\ncard value, making the mediator more reusable )\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token keyword\">private\u003C/span> \u003Cspan class=\"token function\">onOutCards_C2S\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        \u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">hideControlPanel\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _outCardsSerial \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _cardsContainer \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>mViewClass\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getGameModel\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>context\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _cards \u003Cspan class=\"token operator\">=\u003C/span> _cardsContainer\u003Cspan class=\"token punctuation\">.\u003C/span>children\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">for\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token keyword\">let\u003C/span> i \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> i \u003Cspan class=\"token operator\">&lt;\u003C/span> _cards\u003Cspan class=\"token punctuation\">.\u003C/span>length\u003Cspan class=\"token punctuation\">;\u003C/span> i\u003Cspan class=\"token operator\">++\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n            \u003Cspan class=\"token keyword\">let\u003C/span> _card \u003Cspan class=\"token operator\">=\u003C/span> _cards\u003Cspan class=\"token punctuation\">[\u003C/span>i\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n            \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>mViewClass\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">isCardSelected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_card\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n                _outCardsSerial\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">push\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_card\u003Cspan class=\"token punctuation\">.\u003C/span>userData\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"_d_cardSerial\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token operator\">||\u003C/span>_card\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"_d_cardSerial\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">||\u003C/span> _card\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getAttribute\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"data-card-serial\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n            \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n        \u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getNetFacade\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token operator\">?.\u003C/span>\u003Cspan class=\"token function\">sendNotification\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card_game_pb\u003Cspan class=\"token punctuation\">.\u003C/span>Cmd\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PLAYCARDS_C2S\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> _outCardsSerial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cul>\u003Cli>\u003Cstrong>Node coordinate adjustment\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cp>By judging the adjustment of the corresponding css attribute of the node style\nto the corresponding attribute of the node position object\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token function\">isCardSelected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        \u003Cspan class=\"token keyword\">return\u003C/span> card\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>y \u003Cspan class=\"token operator\">==\u003C/span> \u003Cspan class=\"token number\">.2\u003C/span> \u003Cspan class=\"token operator\">?\u003C/span> \u003Cspan class=\"token boolean\">true\u003C/span> \u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode7-r3f\" rel=\"nofollow\">Checkout the repo https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode7-r3f\u003C/a>\u003C/p>\n\u003Chr>\n\u003Cp>æœ¬èŠ‚ä¸»è¦ä»‹ç»åˆ©ç”¨\u003Ca href=\"https://docs.pmnd.rs/react-three-fiber/getting-started/introduction\" rel=\"nofollow\">react-three-fiber\u003C/a>(ä»¥ä¸‹ç®€ç§°R3F)å®ç°äº¤äº’åœºæ™¯çš„æ­å»ºã€‚\u003C/p>\n\u003Ch3 id=\"ä¸ºä»€ä¹ˆé€‰æ‹©r3f\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#ä¸ºä»€ä¹ˆé€‰æ‹©r3f\">\u003Cspan>#\u003C/span>\u003C/a>ä¸ºä»€ä¹ˆé€‰æ‹©R3F\u003C/h3>\n\u003Cul>\u003Cli>R3Fä»…ä»…æ˜¯å°†Three.jsç”¨JSXè¿›è¡Œè¡¨ç¤ºï¼Œæ²¡æœ‰é¢å¤–å¼€é”€\u003C/li>\n\u003Cli>å¯ä»¥ç”¨reactçš„å£°æ˜æ–¹å¼æ„å»ºåœºæ™¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç»„ä»¶å¯è½»æ¾å¯¹çŠ¶æ€åšå‡ºååº”ï¼Œæ˜“äºäº¤äº’ï¼Œå¹¶ä¸”å¯ä»¥åˆ©ç”¨\nReact çš„ç”Ÿæ€\u003C/li>\u003C/ul>\n\u003Ch3 id=\"åœºæ™¯æ„å»ºå®ç°\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#åœºæ™¯æ„å»ºå®ç°\">\u003Cspan>#\u003C/span>\u003C/a>åœºæ™¯æ„å»ºå®ç°\u003C/h3>\n\u003Cul>\u003Cli>\u003Cstrong>æ‰‘å…‹ç‰Œ\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cp>æ³¨æ„æ­¤å¤„é€šè¿‡å°†å›¾ç‰‡åœ°å€ä¼ ç»™\u003Ccode>useTexture\u003C/code>ï¼Œå¾—åˆ°æ¸²æŸ“éœ€è¦çš„çº¹ç†\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token comment\">//Card.tsx\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> useTexture \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"@react-three/drei\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> Mesh \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"three\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">Card\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\n  props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    faceTextureUrl\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    idx\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    beginX\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _selectedOffsetY \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">.2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _beginX \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>beginX\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> _texture \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useTexture\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    map\u003Cspan class=\"token operator\">:\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>faceTextureUrl\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>mesh\n      position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>_beginX \u003Cspan class=\"token operator\">+\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>idx \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">.5\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>idx \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">0.001\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      onClick\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>e\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">any\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        e\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">stopPropagation\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _targetMesh \u003Cspan class=\"token operator\">=\u003C/span> e\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"eventObject\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token keyword\">as\u003C/span> Mesh\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _pos \u003Cspan class=\"token operator\">=\u003C/span> _targetMesh\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _upY\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_pos\u003Cspan class=\"token punctuation\">.\u003C/span>y \u003Cspan class=\"token operator\">==\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> _upY \u003Cspan class=\"token operator\">=\u003C/span> _selectedOffsetY\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">else\u003C/span> _upY \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        _targetMesh\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">set\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_pos\u003Cspan class=\"token punctuation\">.\u003C/span>x\u003Cspan class=\"token punctuation\">,\u003C/span> _upY\u003Cspan class=\"token punctuation\">,\u003C/span> _pos\u003Cspan class=\"token punctuation\">.\u003C/span>z\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      userData\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token string-property property\">\"_d_cardSerial\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>serial \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>boxGeometry args\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">.001\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>meshStandardMaterial \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token operator\">...\u003C/span>_texture\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>mesh\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">export\u003C/span> \u003Cspan class=\"token keyword\">default\u003C/span> Card\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cul>\u003Cli>\u003Cstrong>æ¸¸æˆåœºæ™¯\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cp>é¦–å…ˆå¿…é¡»å£°æ˜ä¸€ä¸ªCanvasèŠ‚ç‚¹ï¼Œå› ä¸ºthree.jsçš„æ‰€æœ‰éƒ½å¿…é¡»åœ¨CanvasèŠ‚ç‚¹ä¸‹\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token operator\">&lt;\u003C/span>Canvas\n  orthographic\n  camera\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> zoom\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">50\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> position\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">100\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> rotation\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token operator\">&lt;\u003C/span>R3fScene\n    mainHandCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    outCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>outCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    gameModel\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>R3fScene\u003Cspan class=\"token operator\">>\u003C/span>\n\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>Canvas\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨\u003Ccode>@react-three/fiber\u003C/code>æä¾›çš„hookï¼ˆthree.jsç›¸å…³çš„hookåªèƒ½åœ¨CanvasèŠ‚ç‚¹ä¸‹ä½¿ç”¨ï¼‰,å°†æ¸¸æˆåœºæ™¯èŠ‚ç‚¹å•ç‹¬æå‡ºæ¥\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">R3fScene\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n  props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> mainHandCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> gameModel\u003Cspan class=\"token punctuation\">;\u003C/span> outCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    scene\u003Cspan class=\"token punctuation\">,\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token function\">useEffect\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>scene\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getObjectByName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> mainHandCards \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameModel \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>gameModel\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>context \u003Cspan class=\"token operator\">=\u003C/span> scene\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _prefix \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token string\">\"/faces/\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _readableName \u003Cspan class=\"token operator\">=\u003C/span> _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getCardReadableName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"rJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_B.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"bJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_R.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitDic \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"D\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"C\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"H\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"S\"\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitNumber\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> serial \u003Cspan class=\"token operator\">>>\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _suitDic\u003Cspan class=\"token punctuation\">[\u003C/span>_suitNumber\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _readableName \u003Cspan class=\"token operator\">+\u003C/span>\n        \u003Cspan class=\"token string\">\".png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token keyword\">let\u003C/span> _cardCount \u003Cspan class=\"token operator\">=\u003C/span> mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>length\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _beginX \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_cardCount \u003Cspan class=\"token operator\">-\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">.5\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token number\">1.5\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>CameraControls \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>ambientLight intensity\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.1\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>directionalLight color\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"white\"\u003C/span> position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">5\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-1\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-2\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-0\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>ä¸ºäº†ä½“ç°3Dç•Œé¢ï¼Œæ·»åŠ ä¸€ä¸ªè½¨é“ç›¸æœºï¼ˆæ»‘åŠ¨åœºæ™¯å³å¯è°ƒæ•´ç›¸æœºè½¬è§’ï¼‰\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token function\">extend\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> OrbitControls \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">CameraControls\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n    gl\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> domElement \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  camera\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">set\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">10\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> controls \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useRef\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token function\">useFrame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>state\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token punctuation\">(\u003C/span>controls\u003Cspan class=\"token punctuation\">.\u003C/span>current \u003Cspan class=\"token keyword\">as\u003C/span> \u003Cspan class=\"token builtin\">unknown\u003C/span> \u003Cspan class=\"token keyword\">as\u003C/span> OrbitControls\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">update\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token comment\">// @ts-ignore\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>orbitControls\n      ref\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>controls\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      args\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>camera\u003Cspan class=\"token punctuation\">,\u003C/span> domElement\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      enableZoom\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      rotationSpeed\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.01\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>åœºæ™¯å®Œæ•´ä»£ç ï¼š\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token comment\">//App.tsx\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> useEffect\u003Cspan class=\"token punctuation\">,\u003C/span> useRef\u003Cspan class=\"token punctuation\">,\u003C/span> useState \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"react\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> Canvas\u003Cspan class=\"token punctuation\">,\u003C/span> extend\u003Cspan class=\"token punctuation\">,\u003C/span> useFrame\u003Cspan class=\"token punctuation\">,\u003C/span> useThree \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"@react-three/fiber\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> OrbitControls \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"three/examples/jsm/controls/OrbitControls\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> \u003Cspan class=\"token string\">\"./App.css\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> Card \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./component/Card\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> GameModel \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./base/src/game/model/GameModel\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> GameSceneMediator \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./base/src/game/view/GameSceneMediator\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">import\u003C/span> GameSceneView \u003Cspan class=\"token keyword\">from\u003C/span> \u003Cspan class=\"token string\">\"./component/GameSceneView\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token function\">extend\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> OrbitControls \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">CameraControls\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n    gl\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> domElement \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  camera\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">set\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">10\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> controls \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useRef\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token function\">useFrame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>state\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token punctuation\">(\u003C/span>controls\u003Cspan class=\"token punctuation\">.\u003C/span>current \u003Cspan class=\"token keyword\">as\u003C/span> \u003Cspan class=\"token builtin\">unknown\u003C/span> \u003Cspan class=\"token keyword\">as\u003C/span> OrbitControls\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">update\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token comment\">// @ts-ignore\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>orbitControls\n      ref\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>controls\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      args\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>camera\u003Cspan class=\"token punctuation\">,\u003C/span> domElement\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      enableZoom\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      maxPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minAzimuthAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>Math\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PI\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      minPolarAngle\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      rotationSpeed\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.01\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token function-variable function\">R3fScene\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n  props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> mainHandCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> gameModel\u003Cspan class=\"token punctuation\">;\u003C/span> outCards\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    scene\u003Cspan class=\"token punctuation\">,\u003C/span>\n    camera\u003Cspan class=\"token punctuation\">,\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useThree\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> mainHandCards \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameModel \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>gameModel\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>context \u003Cspan class=\"token operator\">=\u003C/span> scene\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _prefix \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token string\">\"/faces/\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">let\u003C/span> _readableName \u003Cspan class=\"token operator\">=\u003C/span> _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getCardReadableName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"rJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_B.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_readableName \u003Cspan class=\"token operator\">===\u003C/span> \u003Cspan class=\"token string\">\"bJkr\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_Joker_R.png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitDic \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"D\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"C\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"H\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"S\"\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">let\u003C/span> _suitNumber\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> serial \u003Cspan class=\"token operator\">>>\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n      \u003Cspan class=\"token keyword\">return\u003C/span> _prefix \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token string\">\"Poker_\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _suitDic\u003Cspan class=\"token punctuation\">[\u003C/span>_suitNumber\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> _readableName \u003Cspan class=\"token operator\">+\u003C/span>\n        \u003Cspan class=\"token string\">\".png\"\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n  \u003Cspan class=\"token keyword\">let\u003C/span> _cardCount \u003Cspan class=\"token operator\">=\u003C/span> mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>length\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _beginX \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_cardCount \u003Cspan class=\"token operator\">-\u003C/span> \u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">*\u003C/span> \u003Cspan class=\"token number\">.5\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> \u003Cspan class=\"token number\">1.5\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>CameraControls \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>ambientLight intensity\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">0.1\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>directionalLight color\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"white\"\u003C/span> position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">5\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-1\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token operator\">-\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">4\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-2\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>group position\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> scale\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token number\">.6\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span> name\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"out-list-0\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#123;\u003C/span>props\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">map\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">number\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> idx\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n            \u003Cspan class=\"token operator\">&lt;\u003C/span>Card\n              key\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token string\">\"k\"\u003C/span> \u003Cspan class=\"token operator\">+\u003C/span> serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              faceTextureUrl\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token function\">getFaceTextureUrl\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>serial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              idx\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>idx\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              beginX\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_beginX\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n              serial\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>serial\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            \u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>group\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">App\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>props\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">any\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameFacade \u003Cspan class=\"token operator\">=\u003C/span> props\u003Cspan class=\"token punctuation\">.\u003C/span>gameFacade\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _gameModel\u003Cspan class=\"token operator\">:\u003C/span> GameModel \u003Cspan class=\"token operator\">=\u003C/span> _gameFacade\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">retrieveProxy\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"GameModel\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">,\u003C/span> setMainHandCards\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useState\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>cardsArr\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>outCards\u003Cspan class=\"token punctuation\">,\u003C/span> setOutCards\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">useState\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>outCards\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">setMainHandCardsHook\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>setMainHandCards\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  _gameModel\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">setOutCardsHook\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>setOutCards\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token function\">useEffect\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>_gameFacade\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">retrieveMediator\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"GameSceneMediator\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">==\u003C/span> \u003Cspan class=\"token keyword\">null\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n      _gameFacade\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">registerMediator\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\n        \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">GameSceneMediator\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token keyword\">null\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">GameSceneView\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n      \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token keyword\">return\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"canvas-container\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>Canvas\n          orthographic\n          camera\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> zoom\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">50\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> position\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">100\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> rotation\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n        \u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token operator\">&lt;\u003C/span>R3fScene\n            mainHandCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>mainHandCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            outCards\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>outCards\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n            gameModel\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>_gameModel\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n          \u003Cspan class=\"token operator\">>\u003C/span>\n          \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>R3fScene\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>Canvas\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div\n        id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"status\"\u003C/span>\n        style\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n          display\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"fix\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n          textAlign\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"center\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n          fontSize\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"2em\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n          userSelect\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"none\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n      \u003Cspan class=\"token operator\">>\u003C/span>\n        hello\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores-1\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token number\">1\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores-2\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token number\">2\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-scores-3\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\u003Cspan class=\"token number\">3\u003C/span>\u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>div id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-operation\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-operation-pass\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          pass\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>button id\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlPanel-operation-play\"\u003C/span> className\u003Cspan class=\"token operator\">=\u003C/span>\u003Cspan class=\"token string\">\"controlButton\"\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n          play\n        \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>button\u003Cspan class=\"token operator\">>\u003C/span>\n      \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>div\u003Cspan class=\"token operator\">>\u003C/span>\n    \u003Cspan class=\"token operator\">&lt;\u003C/span>\u003Cspan class=\"token operator\">/\u003C/span>\u003Cspan class=\"token operator\">>\u003C/span>\n  \u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">export\u003C/span> \u003Cspan class=\"token keyword\">default\u003C/span> App\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Ch3 id=\"æ¡†æ¶é€‚é…æ”¹åŠ¨\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#æ¡†æ¶é€‚é…æ”¹åŠ¨\">\u003Cspan>#\u003C/span>\u003C/a>æ¡†æ¶é€‚é…æ”¹åŠ¨\u003C/h3>\n\u003Cul>\u003Cli>\u003Cstrong>è·å–åœºæ™¯èŠ‚ç‚¹\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token function\">getViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>isDOM\u003Cspan class=\"token operator\">:\u003C/span>\u003Cspan class=\"token builtin\">boolean\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token boolean\">true\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>canvasScene\u003Cspan class=\"token operator\">:\u003C/span>\u003Cspan class=\"token builtin\">any\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">null\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        \u003Cspan class=\"token keyword\">if\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>isDOM\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> document\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getElementById\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">else\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n            \u003Cspan class=\"token keyword\">if\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>canvasScene\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token keyword\">return\u003C/span> canvasScene\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getObjectByName\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>é€šè¿‡ä¼ å…¥three.jsçš„åœºæ™¯å¯¹è±¡ï¼Œè°ƒç”¨getObjectByNameæ¥å£è·å–é¢„å…ˆè®¾ç½®å¥½nameå±æ€§çš„èŠ‚ç‚¹\u003C/p>\n\u003Cul>\u003Cli>\u003Cstrong>ç‰Œå€¼è·å–card.userDataï¼ˆuserDataæ˜¯R3Fä¸­è‡ªå®šä¹‰å±æ€§çš„è£…è½½å¯¹è±¡ï¼Œç±»ä¼¼reactä¸­çš„data-yourAttribute,\nåœ¨è¿™é‡Œå¯ä»¥å°è£…ä¸€ä¸ªæ–¹æ³•ï¼Œè®©GameSceneMediatorä¸ç‰Œå–å€¼è§£è€¦ï¼Œä½¿mediatorçš„å¤ç”¨æ€§æ›´å¼ºï¼‰\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token keyword\">private\u003C/span> \u003Cspan class=\"token function\">onOutCards_C2S\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        \u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">hideControlPanel\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _outCardsSerial \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _cardsContainer \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>mViewClass\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"handList\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getGameModel\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>context\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">let\u003C/span> _cards \u003Cspan class=\"token operator\">=\u003C/span> _cardsContainer\u003Cspan class=\"token punctuation\">.\u003C/span>children\u003Cspan class=\"token punctuation\">;\u003C/span>\n        \u003Cspan class=\"token keyword\">for\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token keyword\">let\u003C/span> i \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token number\">0\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span> i \u003Cspan class=\"token operator\">&lt;\u003C/span> _cards\u003Cspan class=\"token punctuation\">.\u003C/span>length\u003Cspan class=\"token punctuation\">;\u003C/span> i\u003Cspan class=\"token operator\">++\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n            \u003Cspan class=\"token keyword\">let\u003C/span> _card \u003Cspan class=\"token operator\">=\u003C/span> _cards\u003Cspan class=\"token punctuation\">[\u003C/span>i\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n            \u003Cspan class=\"token keyword\">if\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>mViewClass\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">isCardSelected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_card\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n                _outCardsSerial\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">push\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>_card\u003Cspan class=\"token punctuation\">.\u003C/span>userData\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"_d_cardSerial\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span>\u003Cspan class=\"token operator\">||\u003C/span>_card\u003Cspan class=\"token punctuation\">[\u003C/span>\u003Cspan class=\"token string\">\"_d_cardSerial\"\u003C/span>\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">||\u003C/span> _card\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getAttribute\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"data-card-serial\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n            \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n        \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n        \u003Cspan class=\"token keyword\">this\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">getNetFacade\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token operator\">?.\u003C/span>\u003Cspan class=\"token function\">sendNotification\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card_game_pb\u003Cspan class=\"token punctuation\">.\u003C/span>Cmd\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token constant\">PLAYCARDS_C2S\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> _outCardsSerial\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cul>\u003Cli>\u003Cstrong>èŠ‚ç‚¹åæ ‡è°ƒæ•´\u003C/strong>\u003C/li>\u003C/ul>\n\u003Cp>ç”±åˆ¤æ–­èŠ‚ç‚¹style ç›¸åº”csså±æ€§çš„è°ƒæ•´ä¸ºèŠ‚ç‚¹positionå¯¹è±¡ç›¸åº”å±æ€§\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token function\">isCardSelected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n        \u003Cspan class=\"token keyword\">return\u003C/span> card\u003Cspan class=\"token punctuation\">.\u003C/span>position\u003Cspan class=\"token punctuation\">.\u003C/span>y \u003Cspan class=\"token operator\">==\u003C/span> \u003Cspan class=\"token number\">.2\u003C/span> \u003Cspan class=\"token operator\">?\u003C/span> \u003Cspan class=\"token boolean\">true\u003C/span> \u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token boolean\">false\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n    \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode7-r3f\" rel=\"nofollow\">æŸ¥çœ‹æœ¬èŠ‚ç›¸å…³ä»£ç  https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode7-r3f\u003C/a>\u003C/p>","13 min read",[13,21,29],{"title":14,"slug":15,"coverImage":5,"date":16,"excerpt":17,"tags":18,"html":19,"readingTime":20},"Make a multiplayer card game - Episode 3","change-json-to-protocol-buffers-e3","2021-02-22T21:55:15.361Z","Change JSON to Protocol Buffers",[9],"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-3--change-json-to-protocol-buffers\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 3 | Change JSON to Protocol Buffers\u003C/h2>\n\u003Cblockquote>\u003Cp>Protocol buffers are a language-neutral, platform-neutral extensible mechanism\nfor serializing structured data. It has many advantages such as â€œLesser in\nSize and Better in Performanceâ€, like this article\n\u003Ca href=\"https://anuragthakur.hashnode.dev/protobuf-why-google-moved-from-json-to-protocol-buffers-ckdxb8sgi03kdjas17ril3fbi\" rel=\"nofollow\">Why Google moved from JSON to Protocol Buffers?\u003C/a>\nintroduce.\u003C/p>\u003C/blockquote>\n\u003Cp>I used it on all the projects Iâ€™ve worked on over the years. Besides the better\nperformance, what make me impressed is that the clean communication between\nclient and server with protocol buffers.\u003C/p>\n\u003Cblockquote>\u003Cp>You can clone\n\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode3\" rel=\"nofollow\">demo for episode3\u003C/a>\nwhich including all the bellow content.\u003C/p>\u003C/blockquote>\n\u003Cp>According to the\n\u003Ca href=\"https://github.com/protocolbuffers/protobuf\" rel=\"nofollow\">official tutorial\u003C/a>, two steps\nshould be done:\u003C/p>\n\u003Col>\u003Cli>Install the runtime library \u003Ccode>google-protobuf\u003C/code>:\u003Ccode>npm install\ngoogle-protobuf\u003C/code>.\u003C/li>\n\u003Cli>Get the Protocol Compiler \u003Ccode>protoc\u003C/code>: download from\n\u003Ca href=\"https://github.com/protocolbuffers/protobuf/releases\" rel=\"nofollow\">https://github.com/protocolbuffers/protobuf/releases\u003C/a>\u003C/li>\u003C/ol>\n\u003Cp>Then run a command like \u003Ccode>protoc â€”js_out=import_style=commonjs,binary:.\nmessages.proto base.proto\u003C/code>, you can get the \u003Ccode>.js\u003C/code> file from\u003C/p>\n\u003Ccode>.proto\u003C/code>.\n\u003Cp>When the \u003Ccode>.js\u003C/code> file generated, the protocol buffers environment is\nready.\u003C/p>\n\u003Cp>Back to our game, we should create a \u003Ccode>.proto\u003C/code> file, named\u003C/p>\n\u003Ccode>card-game.proto\u003C/code>.\n\u003Cp>The first line in \u003Ccode>.proto\u003C/code> file should be:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">syntax = &quot;proto3&quot;;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>which means which version of Protobuf we are using.\u003C/p>\n\u003Cp>Define the enum of Cmd:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">enum Cmd&#123;\n    NONE = 0;\n    READY_C2S = 1;\n    DEALCARDS_S2C = 2;\n    COMPETEFORLANDLORDROLE_C2S = 3;\n    PLAYTURN_S2C = 4;\n    PLAYCARDS_C2S = 5;\n    PLAYCARDS_S2C = 6;\n    ILLEGALCARDS_S2C = 7;\n    GAMEEND_S2C = 8;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>enum Cmd is for routing, will be introduced later.\u003C/p>\n\u003Cp>Define MainMessage message:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">message MainMessage&#123;\n    uint32 cmd_id = 1;\n    bytes data =2;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>In order to encapsulate the header and data body, we should assign serialized\nmessage to the data attribute.\u003C/p>\n\u003Cp>Define data message like:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">message DealCards_S2C&#123;\n    repeated uint32 cards = 1;\n    uint32 seat_number = 2;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Then, generate our own \u003Ccode>.js\u003C/code> file.\u003C/p>\n\u003Cp>As the episode3 demo show, run command bellow in directory proto.\u003C/p>\n\u003Cul>\u003Cli>\u003Cp>Windows\u003C/p>\n\u003Ccode>.\\protoc.exe --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C/code>\u003C/li>\n\u003Cli>\u003Cp>MacOS\u003C/p>\n\u003Ccode>./protoc --js_out=import_style=commonjs,binary:out\ncard-game.proto\u003C/code>\u003C/li>\u003C/ul>\n\u003Cp>Now, we have our own \u003Ccode>.js\u003C/code> file from the \u003Ccode>.proto\u003C/code> in which\nwe define message.\u003C/p>\n\u003Cp>Letâ€™s encoding and decoding message with protocol buffers.\u003C/p>\n\u003Cp>Encoding: &gt;enum Cmd is used to map message type here\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">function encodeData(cmd, data) &#123;\n    let _proto_struct_obj;\n    switch (cmd) &#123;\n        case card_game_pb.Cmd.DEALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.DealCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.PlayCards_S2C();\n            _proto_struct_obj.setCardsList(data.cards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.ILLEGALCARDS_S2C:\n            _proto_struct_obj = new card_game_pb.IllegalCards_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.GAMEEND_S2C:\n            _proto_struct_obj = new card_game_pb.GameEnd_S2C();\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        case card_game_pb.Cmd.PLAYTURN_S2C:\n            _proto_struct_obj = new card_game_pb.PlayTurn_S2C();\n            _proto_struct_obj.setHandCardsList(data.handCards);\n            _proto_struct_obj.setSeatNumber(data.seatNumber);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n    if (_proto_struct_obj) &#123;\n        let _mainMsg = new card_game_pb.MainMessage();\n        _mainMsg.setCmdId(cmd);\n        let _data = _proto_struct_obj.serializeBinary();\n        _mainMsg.setData(_data);\n        let _completeData = _mainMsg.serializeBinary();\n        return _completeData;\n    &#125;\n    return null;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Decoding: &gt;enum Cmd is used to map message type here\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">function decodeData(buffer) &#123;\n    let _mainMsg = card_game_pb.MainMessage.deserializeBinary(buffer);\n    let _cmd = _mainMsg.getCmdId();\n    let _bytesData = _mainMsg.getData();\n    let _data;\n    switch (_cmd) &#123;\n        case card_game_pb.Cmd.READY_C2S:\n            _data = card_game_pb.Ready_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.ready_C2S) _this.ready_C2S(_data);\n            break;\n        case card_game_pb.Cmd.PLAYCARDS_C2S:\n            _data = card_game_pb.PlayCards_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                cards: _data.getCardsList(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.playCards_C2S) _this.playCards_C2S(_data);\n            break;\n        case card_game_pb.Cmd.COMPETEFORLANDLORDROLE_C2S:\n            _data = card_game_pb.CompeteForLandLordRole_C2S.deserializeBinary(_bytesData);\n            _data = &#123;\n                score: _data.getScore(),\n                seatNumber: _data.getSeatNumber()\n            &#125;\n            if (_this.competeForLandLordRole_C2S) _this.competeForLandLordRole_C2S(_data);\n            break;\n        default:\n            console.log(&quot;no message matched.&quot;)\n    &#125;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cblockquote>\u003Cp>Caution:\u003C/p>\n\u003Col>\u003Cli>Attributes defined as \u003Cstrong>seat_number\u003C/strong> in \u003Ccode>.proto\u003C/code> file should be\ncall like getSeatNumber and setSeatNumebr.\u003C/li>\n\u003Cli>Attributes defined as \u003Cstrong>repeated\u003C/strong> type in \u003Ccode>.proto\u003C/code> should call\ngetAttributeNameList and setAttributeList instead of the attribute self\nname.\u003C/li>\u003C/ol>\u003C/blockquote>","3 min read",{"title":22,"slug":23,"coverImage":5,"date":24,"excerpt":25,"tags":26,"html":27,"readingTime":28},"Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React","create-2d-graphical-interface-with-react-e6","2021-03-29T21:55:15.361Z","This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api.",[9],"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-6--create-2d-graphical-interface-with-react\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 6 | Create 2D graphical interface with React\u003C/h2>\n\u003Cp>This section mainly uses react to implement UI views. Before this section, a UI view version has been implemented with cocos creator. In order to reuse the basic framework, we abstract the game logic and decouple the logic related to the view engine api. The following is an abstracted interface:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">export interface IGameSceneView &#123;\n    getViewComponent(name: string),\n    getNewViewComponent(comp),\n    getChild(childPath, parent),\n    addClickListener(comp, handler, target),\n    setCard(card, name),\n    setLabel(labelComp, text),\n    removeAllChildren(parent),\n    addChild(child, parent),\n    isCardSelected(card),\n    toggleCardSelectedStatus(card),\n    showComponent(comp),\n    hideComponent(comp)\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Compared with cocos creator, the implementation of react is more operable at the code level. The styles of interface elements are all implemented by handwritten code. The hot-reload that comes with create-react-app also responds to changes very quickly. There is a time to switch editors and wait for the editor to refresh, which is very lightweight.\u003C/p>\n\u003Cp>Code reference \u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode6-react\" rel=\"nofollow\">https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode6-react\u003C/a>\u003C/p>\n\u003Cp>The next article mainly introduces the comparison between cocos creator and react implementation in development.\u003C/p>\n\u003Cp>æœ¬èŠ‚ä¸»è¦æ˜¯ç”¨reactå®ç°UIè§†å›¾ã€‚\nåœ¨æœ¬èŠ‚ä¹‹å‰ï¼Œå·²ç»ç”¨cocos creatorå®ç°äº†ä¸€ä¸ªUIè§†å›¾ç‰ˆæœ¬ï¼Œä¸ºäº†é‡ç”¨åŸºç¡€æ¡†æ¶ï¼Œæˆ‘ä»¬å°†æ¸¸æˆé€»è¾‘è¿›è¡ŒæŠ½è±¡ï¼Œå¹¶å°†ä¸è§†å›¾å¼•æ“apiç›¸å…³çš„é€»è¾‘è§£è€¦å‡ºæ¥ã€‚\nä¸‹é¢æ˜¯æŠ½è±¡å‡ºæ¥çš„ä¸€ä¸ªæ¥å£ï¼š\u003C/p>\n\u003Cpre class=\"language-typescript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-typescript\">\u003Cspan class=\"token keyword\">export\u003C/span> \u003Cspan class=\"token keyword\">interface\u003C/span> \u003Cspan class=\"token class-name\">IGameSceneView\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token function\">getViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>name\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token builtin\">string\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">getNewViewComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>comp\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">getChild\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>childPath\u003Cspan class=\"token punctuation\">,\u003C/span> parent\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">addClickListener\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>comp\u003Cspan class=\"token punctuation\">,\u003C/span> handler\u003Cspan class=\"token punctuation\">,\u003C/span> target\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">setCard\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card\u003Cspan class=\"token punctuation\">,\u003C/span> name\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">setLabel\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>labelComp\u003Cspan class=\"token punctuation\">,\u003C/span> text\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">removeAllChildren\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>parent\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">addChild\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>child\u003Cspan class=\"token punctuation\">,\u003C/span> parent\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">isCardSelected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">toggleCardSelectedStatus\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>card\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">showComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>comp\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n    \u003Cspan class=\"token function\">hideComponent\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>comp\u003Cspan class=\"token punctuation\">)\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>ç›¸å¯¹äºcocos creatorï¼Œreactçš„å®ç°åœ¨ä»£ç å±‚é¢å¯æ“ä½œæ€§è¾ƒå¼ºï¼Œä½“ç°åœ¨ç•Œé¢å…ƒç´ çš„æ ·å¼éƒ½é€šè¿‡æ‰‹å†™ä»£ç æ¥å®ç°ï¼Œcreate-react-appè‡ªå¸¦çš„hot-reloadä¹Ÿéå¸¸å¿«åœ°åé¦ˆå˜æ›´ï¼Œä¸ä¼šæœ‰åˆ‡æ¢ç¼–è¾‘å™¨å’Œç­‰å¾…ç¼–è¾‘å™¨åˆ·æ–°çš„æ—¶é—´ï¼Œéå¸¸è½»é‡çš„æ„Ÿè§‰ã€‚\u003C/p>\n\u003Cp>ä»£ç å‚è€ƒ \u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode6-react\" rel=\"nofollow\">https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode6-react\u003C/a>\u003C/p>\n\u003Cp>ä¸‹ä¸€ç¯‡ä¸»è¦ä»‹ç»cocos creator ä¸ react å®ç°åœ¨å¼€å‘ä¸Šçš„å¯¹æ¯”ã€‚\u003C/p>","2 min read",{"title":30,"slug":31,"coverImage":5,"date":32,"excerpt":33,"tags":34,"html":35,"readingTime":28},"Make a multiplayer card game - Episode 1","create-a-simple-server-and-client-from-scratch-e1","2021-02-01T21:55:15.361Z","Create a simple server and client from scratch",[9],"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-1--create-a-simple-server-and-client-from-scratch\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 1 | Create a simple server and client from scratch\u003C/h2>\n\u003Cp>In the coming weeks, Iâ€™ll be updating a series of tutorials on making a\nmultiplayer online card games base on the rule of the most popular Chinese card\ngame â€œDoudizhuâ€, which means battle with landlord. I divide this series in many\nsmall part to make it easy for most friends. If you know a little javascript,\nall the better.\u003C/p>\n\u003Cp>Parts including:\u003C/p>\n\u003Cul>\u003Cli>create a simple server and client\u003C/li>\n\u003Cli>play cards in terminal with bots\u003C/li>\n\u003Cli>communicate with server by protobuf\u003C/li>\n\u003Cli>play cards in terminal with other players\u003C/li>\n\u003Cli>create 2D graphical interface with Cocos Creator\u003C/li>\n\u003Cli>create 2D graphical interface with React\u003C/li>\n\u003Cli>create 3D graphical interface with Three.js\u003C/li>\n\u003Cli>add physical lib ammo.js to add a tiny game\u003C/li>\n\u003Cli>connect to Web3 world\u003C/li>\u003C/ul>\n\u003Cp>\u003Cem>open your terminal, input \u003Ccode>node -v\u003C/code>, if something go wrong, please install\nnode.js first \u003Ca href=\"Link\">https://nodejs.org\u003C/a>.\u003C/em>\u003C/p>\n\u003Cp>directory structure :\n\u003Cimg src=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1644775769474/2OAtz4Ljw.jpeg\" alt=\"demo0-document-tree.jpg\">\u003C/p>\n\u003Cp>create a server, server/index.js:\u003C/p>\n\u003Cdiv class=\"code-block svelte-1pkpsrg\">\n\t\n\t\u003Cpre class=\"language-ts\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-ts\">\u003Cspan class=\"token keyword\">const\u003C/span> net \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">require\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"net\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">const\u003C/span> server \u003Cspan class=\"token operator\">=\u003C/span> net\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">createServer\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">on\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"data\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n    \u003Cspan class=\"token function\">handlerData\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> data\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">handlerData\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">send\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token string-property property\">\"msg\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"Welcome, friend.\"\u003C/span> \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">send\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">,\u003C/span> data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> bufferData \u003Cspan class=\"token operator\">=\u003C/span> Buffer\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">from\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token constant\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">stringify\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">write\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>bufferData\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\nserver\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">listen\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token number\">8080\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"server listening on 127.0.0.1:8080\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003C/div>\n\u003Cp>create client, client/index.js:\u003C/p>\n\u003Cdiv class=\"code-block svelte-1pkpsrg\">\n\t\n\t\u003Cpre class=\"language-ts\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-ts\">\u003Cspan class=\"token keyword\">const\u003C/span> net \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">require\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"net\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token keyword\">const\u003C/span> socket \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token keyword\">new\u003C/span> \u003Cspan class=\"token class-name\">net\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">Socket\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\nsocket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">connect\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  host\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token string\">\"127.0.0.1\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n  port\u003Cspan class=\"token operator\">:\u003C/span> \u003Cspan class=\"token number\">8080\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> onConnected\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\nsocket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">on\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"data\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">decode\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\nsocket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">on\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"error\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>buffer\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">onConnected\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">startGame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">decode\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token builtin\">console\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">log\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token constant\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">parse\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>msg\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">request\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>data\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">const\u003C/span> bufferData \u003Cspan class=\"token operator\">=\u003C/span> Buffer\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">from\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token constant\">JSON\u003C/span>\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">stringify\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">&#123;\u003C/span> \u003Cspan class=\"token string-property property\">\"msg\"\u003C/span>\u003Cspan class=\"token operator\">:\u003C/span> data \u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">write\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>bufferData\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\n\n\u003Cspan class=\"token keyword\">function\u003C/span> \u003Cspan class=\"token function\">startGame\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token function\">request\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"Hello, world!\"\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003C/div>\n\u003Cp>run :\u003C/p>\n\u003Cp>\u003Ccode>cd server\u003C/code>\u003C/p>\n\u003Cp>\u003Ccode>node index.js\u003C/code>\u003C/p>\n\u003Cp>\u003Ccode>cd client\u003C/code>\u003C/p>\n\u003Cp>\u003Ccode>node index.js\u003C/code>\u003C/p>\n\u003Cp>result:\u003C/p>\n\u003Cp>\u003Cimg src=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1644776034549/t-Jir1j9R.png\" alt=\"demo0-cmd-result.png\">\u003C/p>\n\u003Cp>This episode is end here, the complete demo can be found on\n\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode1\" rel=\"nofollow\">https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode1\u003C/a>\u003C/p>\n\u003Cp>Any problems, discussion is welcome.\u003C/p>\n\u003Cp>\u003Cstrong>In the next section, we will add the logic of Doudizhu game, and you will have\ncompleted a playable game in your terminal. \u003C/strong>\u003C/p>\n\u003Cp>Thanks for your reading.\u003C/p>",{"title":22,"slug":23,"coverImage":5,"date":24,"excerpt":25,"tags":26,"html":27,"readingTime":28,"relatedPosts":37},[38,39,40],{"title":14,"slug":15,"coverImage":5,"date":16,"excerpt":17,"tags":18,"html":19,"readingTime":20},{"title":30,"slug":31,"coverImage":5,"date":32,"excerpt":33,"tags":34,"html":35,"readingTime":28},{"title":41,"slug":42,"coverImage":5,"date":43,"excerpt":44,"tags":45,"html":46,"readingTime":47},"Make a multiplayer card game - Episode 5 | Create 2D graphical interface with Cocos Creator","make-a-multiplayer-card-game-episode-5","2021-03-22T21:55:15.361Z","Create 2D graphical interface with Cocos Creator",[9],"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-5--create-2d-graphical-interface-with-cocos-creator\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-5--create-2d-graphical-interface-with-cocos-creator\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 5 | Create 2D graphical interface with Cocos Creator\u003C/h2>\n\u003Cp>This chapter is almost a month away from the previous chapter. During this\nperiod, it is mainly about the transformation and reconstruction of the client.\nThe content of the overall client is almost completely different from the\ncommand-line version of the previous chapter.\u003C/p>\n\u003Cp>According to the previous plan, I converted all the code written in JS to TS and\ntransplanted the command-line interactive interface to the conventional game\ninteractive interface (using cocos creator game engine).\u003C/p>\n\u003Cp>Previously, in order to quickly realize the function, the server and client used\nonly one file to encode. Up to now, the client code of the project has been\nmodularized, and the classic PureMVC library has been introduced to completely\ndecouple the UI interaction and data, network messages and game operation logic,\nso as to create conditions for extracting the code of the framework independent\nof the game engine (it is planned to use one framework to access different view\nlayer engines).\u003C/p>\n\u003Cp>PureMVC has been introduced in previous articles. The core idea is to decouple\nview and data. The data is processed by proxy and the facade is controlled by\nproxy.\u003C/p>\n\u003Cp>Compared with the previous version, some changes are involved: -The difference\nbetween socket and web socket API. It mainly includes the names of several\nmonitored events and the interfaces for sending messages. -UI display layer\nindependent. Command line output and game engine rendering view interactive\noperation interface.\u003C/p>\n\u003Cp>\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode5-UICocosCreator\" rel=\"nofollow\">demo url\u003C/a>\u003C/p>\n\u003Cp>æœ¬ç« ç¦»å‰ä¸€ç« å¿«ä¸€ä¸ªæœˆäº†ï¼Œåœ¨è¿™æ®µæ—¶é—´ï¼Œä¸»è¦æ˜¯å¯¹å®¢æˆ·ç«¯çš„æ”¹é€ å’Œé‡æ„ï¼Œæ•´ä½“å®¢æˆ·ç«¯çš„å†…å®¹å‡ ä¹å®Œå…¨ä¸åŒäºä¸Šä¸€ç« å‘½ä»¤è¡Œç‰ˆæœ¬ã€‚\u003C/p>\n\u003Cp>æŒ‰ç…§ä¹‹å‰çš„è®¡åˆ’ï¼Œæˆ‘å°†ä¹‹å‰ç”¨jså†™çš„ä»£ç å…¨éƒ¨è½¬ä¸ºäº†tsï¼Œå°†å‘½ä»¤è¡Œäº¤äº’ç•Œé¢ç§»æ¤åˆ°å¸¸è§„çš„æ¸¸æˆäº¤äº’ç•Œé¢ï¼ˆåˆ©ç”¨CocosCreatoræ¸¸æˆå¼•æ“ï¼‰ã€‚\u003C/p>\n\u003Cp>ä¹‹å‰ä¸ºäº†å¿«é€Ÿå®ç°åŠŸèƒ½ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯åˆ†åˆ«åªç”¨ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œç¼–ç ã€‚\næˆªè‡³ç›®å‰ï¼Œé¡¹ç›®å®¢æˆ·ç«¯ä»£ç è¿›è¡Œäº†æ¨¡å—åŒ–æ”¹é€ ï¼Œå¼•å…¥äº†ç»å…¸çš„PureMVCåº“ï¼Œå°†UIäº¤äº’å’Œæ•°æ®ï¼Œç½‘ç»œæ¶ˆæ¯å’Œæ¸¸æˆæ“ä½œé€»è¾‘å®Œå…¨è§£è—•ï¼Œä¸ºåé¢æå–ä¸æ¸¸æˆå¼•æ“æ— å…³çš„æ¡†æ¶ï¼ˆè®¡åˆ’ç”¨ä¸€ä¸ªæ¡†æ¶æ¥å…¥ä¸åŒè§†å›¾å±‚å¼•æ“ï¼‰ä»£ç åˆ›é€ æ¡ä»¶ã€‚\u003C/p>\n\u003Cp>åœ¨ä¹‹å‰çš„æ–‡ç« é‡Œé¢å·²ç»ä»‹ç»è¿‡PureMVCï¼Œæ ¸å¿ƒçš„æ€æƒ³å°±æ˜¯è§†å›¾ä¸æ•°æ®è§£è—•ã€‚\né€šè¿‡ä¸€ä¸ªé—¨é¢ç±»ï¼ˆFacadeï¼‰æ¥ç»Ÿç®¡æ¡†æ¶ï¼Œç”¨è§†å›¾ä»£ç†ï¼ˆMediatorï¼‰æ§åˆ¶æ˜¾ç¤ºç»„ä»¶é€»è¾‘ï¼Œç”¨æ•°æ®æ¨¡å‹ä»£ç†ï¼ˆProxyï¼‰å­˜å‚¨å’Œå¤„ç†æ•°æ®ã€‚\u003C/p>\n\u003Cp>ç›¸å¯¹äºä¸Šä¸€ç‰ˆï¼Œæ¶‰åŠåˆ°çš„ä¸€äº›æ”¹åŠ¨ï¼š\u003C/p>\n\u003Cul>\u003Cli>socket å’Œ web socket api çš„åŒºåˆ«ã€‚ä¸»è¦æ˜¯å‡ ä¸ªç›‘å¬çš„äº‹ä»¶åå­—ï¼Œå’Œå‘é€æ¶ˆæ¯çš„æ¥å£ã€‚\u003C/li>\n\u003Cli>uiæ˜¾ç¤ºå±‚ç‹¬ç«‹ã€‚å‘½ä»¤è¡Œè¾“å‡ºå’Œæ¸¸æˆå¼•æ“æ¸²æŸ“è§†å›¾äº¤äº’æ“ä½œç•Œé¢ã€‚\u003C/li>\u003C/ul>\n\u003Cp>\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode5-UICocosCreator\" rel=\"nofollow\">demo url\u003C/a>\u003C/p>","4 min read",{"title":41,"slug":42,"coverImage":5,"date":43,"excerpt":44,"tags":45,"html":46,"readingTime":47,"relatedPosts":49},[50,51,52],{"title":14,"slug":15,"coverImage":5,"date":16,"excerpt":17,"tags":18,"html":19,"readingTime":20},{"title":22,"slug":23,"coverImage":5,"date":24,"excerpt":25,"tags":26,"html":27,"readingTime":28},{"title":30,"slug":31,"coverImage":5,"date":32,"excerpt":33,"tags":34,"html":35,"readingTime":28},{"title":54,"slug":55,"coverImage":5,"date":56,"excerpt":57,"tags":58,"html":59,"readingTime":28,"relatedPosts":60},"PureMVC | Prior for Episode 5","prior-for-e5-puremvc","2021-03-15T21:55:15.361Z","PureMVC will be included in next episode.",[9],"\u003Ch2 id=\"puremvc--prior-for-episode-5\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#puremvc--prior-for-episode-5\">\u003Cspan>#\u003C/span>\u003C/a>PureMVC | Prior for Episode 5\u003C/h2>\n\u003Cblockquote>\u003Cp>PureMVC will be included in next episode.\u003C/p>\u003C/blockquote>\n\u003Cblockquote>\u003Cp>PureMVC is a framework for creating applications based upon the\nwell-established modelâ€“viewâ€“controller (MVC) design pattern. The free, open\nsource framework was originally implemented in the ActionScript 3 language for\nuse with Adobe Flex, Flash and AIR, and it has since been ported to nearly all\nthe major web development platforms.\u003C/p>\u003C/blockquote>\n\u003Cp>\u003Cimg src=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1648287487663/TkUwfryAy.jpg\" alt=\"puremvc.jpg\">\u003C/p>\n\u003Cp>Advantages and disadvantages of PureMVC:\u003C/p>\n\u003Cul>\u003Cli>\u003Cstrong>Advantages \u003C/strong>\u003C/li>\u003C/ul>\n\u003Col>\u003Cli>\u003Cp>Use intermediaries, agents and commands to realize decoupling, which reduces\nthe coupling among model, view and controller and improves the reuse of some\ncodes\u003C/p>\u003C/li>\n\u003Cli>\u003Cp>The view interface can be reused\u003C/p>\u003C/li>\n\u003Cli>\u003Cp>Model data can be reused\u003C/p>\u003C/li>\u003C/ol>\n\u003Cul>\u003Cli>\u003Cstrong>Disadvantages \u003C/strong>\u003C/li>\u003C/ul>\n\u003Col>\u003Cli>Code redundancy is large. For simple functions, you have to create view,\nmediator, command, facade, proxy and model scripts\u003C/li>\n\u003Cli>The operation process is a cumbersome process, and the code in mediator will\nappear complex and difficult to understand, unless you are familiar with the\nimplementation principle of PureMVC\u003C/li>\u003C/ol>\n\u003Cul>\u003Cli>\u003Cstrong>PureMVC features\u003C/strong>\u003C/li>\u003C/ul>\n\u003Col>\u003Cli>The notice shall be delivered through the operation of packing and unpacking\u003C/li>\n\u003Cli>The command / notification is implemented in the observer mode. The command /\nnotification uses the reflection acquisition method in the observer and is\nexecuted\u003C/li>\n\u003Cli>No service (this module for network communication can be added according to\nthe structure of MVC)\u003C/li>\n\u003Cli>Data is transmitted through notification. Sendnotification has only one\nobject type parameter. It will feel that the data transmission is limited.\nYou can combine the data into a type / structure for transmission, or expand\nanother parameter for notification.\u003C/li>\u003C/ol>",[61,62,63],{"title":14,"slug":15,"coverImage":5,"date":16,"excerpt":17,"tags":18,"html":19,"readingTime":20},{"title":22,"slug":23,"coverImage":5,"date":24,"excerpt":25,"tags":26,"html":27,"readingTime":28},{"title":30,"slug":31,"coverImage":5,"date":32,"excerpt":33,"tags":34,"html":35,"readingTime":28},{"title":65,"slug":66,"coverImage":5,"date":67,"excerpt":68,"tags":69,"html":70,"readingTime":71,"relatedPosts":72},"Prior for Episode 5 - Cocos Creator","prior-for-e5-ccc","2021-03-08T21:55:15.361Z","I am writing a demo by Cocos Creator for episode 5",[9],"\u003Ch2 id=\"cocos-creator--prior-for-episode-5\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#cocos-creator--prior-for-episode-5\">\u003Cspan>#\u003C/span>\u003C/a>Cocos Creator | Prior for Episode 5\u003C/h2>\n\u003Cblockquote>\u003Cp>I am wirting a demo by Cocos Creator for episode 5\u003C/p>\u003C/blockquote>\n\u003Ch3 id=\"what\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#what\">\u003Cspan>#\u003C/span>\u003C/a>What\u003C/h3>\n\u003Cp>Cocos Creator is a content creation-focused, scripted, component-based and\ndata-driven game development tool. It features an easy-to-use content production\nworkflow and a powerful developer tool suite for implementing game logic and\nhigh-performance game effects. In keeping with Cocosâ€™s usual product features\nlike open-source, easy-to-use, high-performance and cross-platform, this new\ngame engine is designed to be the new choice for developers to create 2D and 3D\ngames.\u003C/p>\n\u003Ch3 id=\"why\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#why\">\u003Cspan>#\u003C/span>\u003C/a>Why\u003C/h3>\n\u003Cul>\u003Cli>Easy to use with developer tool suite especially a official visualize editor\u003C/li>\n\u003Cli>Integrate many target platformsâ€™ SDK\u003C/li>\n\u003Cli>Well popularity of Mini Game on Wechat and other platform apps\u003C/li>\n\u003Cli>Almost same work flow with Unity, attract developer who use Unity before and\nwant post game on mini game platform\u003C/li>\u003C/ul>","1 min read",[73,74,75],{"title":14,"slug":15,"coverImage":5,"date":16,"excerpt":17,"tags":18,"html":19,"readingTime":20},{"title":22,"slug":23,"coverImage":5,"date":24,"excerpt":25,"tags":26,"html":27,"readingTime":28},{"title":30,"slug":31,"coverImage":5,"date":32,"excerpt":33,"tags":34,"html":35,"readingTime":28},{"title":77,"slug":78,"coverImage":5,"date":79,"excerpt":80,"tags":81,"html":82,"readingTime":20,"relatedPosts":83},"Make a multiplayer card game - Episode 4","play-cards-with-other-players-e4","2021-03-01T21:55:15.361Z","Play cards with other players",[9],"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-4--play-cards-with-other-players\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-4--play-cards-with-other-players\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 4 | Play cards with other players\u003C/h2>\n\u003Cblockquote>\u003Cp>This section is a milestone in this series of tutorials, and after this\narticle, there will present a complete multiplayer local online card game.\u003C/p>\u003C/blockquote>\n\u003Cp>The key point of this section is how to link multiplayer to play.\u003C/p>\n\u003Ch4 id=\"almost-all-changes-is-on-the-server-side\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#almost-all-changes-is-on-the-server-side\">\u003Cspan>#\u003C/span>\u003C/a>Almost all changes is on the server side:\u003C/h4>\n\u003Cp>We make a server and listen on â€œconnectionâ€ event.\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">const net = require(&#39;net&#39;);\nconst server = net.createServer();\nserver.on(&quot;connection&quot;,()=&gt;&#123;&#125;);\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Then we generate a player ID and seat number for the player connecting.\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">var playerIDArr = [];\nfunction generatePlayerIDAndSeatNumber() &#123;\n    let _seat = playerIDArr.length;\n    let _id = Math.floor(Math.random() * 10000);\n    let _isExist = playerIDArr.indexOf(_id) != -1;\n    if (_isExist) &#123;\n        generatePlayerIDAndSeatNumber();\n    &#125; else &#123;\n        playerIDArr.push(_id);\n    &#125;\n    return &#123; id: _id, seat: _seat &#125;;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Back to the â€œconnectionâ€ event, we assign some attributes on socket to make a\nidentification.\u003C/p>\n\u003Cpre class=\"language-javascript\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-javascript\">server\u003Cspan class=\"token punctuation\">.\u003C/span>\u003Cspan class=\"token function\">on\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token string\">\"connection\"\u003C/span>\u003Cspan class=\"token punctuation\">,\u003C/span> \u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token parameter\">socket\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span> \u003Cspan class=\"token operator\">=>\u003C/span> \u003Cspan class=\"token punctuation\">&#123;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _id_seat \u003Cspan class=\"token operator\">=\u003C/span> \u003Cspan class=\"token function\">generatePlayerIDAndSeatNumber\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _playerID \u003Cspan class=\"token operator\">=\u003C/span> _id_seat\u003Cspan class=\"token punctuation\">.\u003C/span>id\u003Cspan class=\"token punctuation\">;\u003C/span>\n  \u003Cspan class=\"token keyword\">let\u003C/span> _seatNumber \u003Cspan class=\"token operator\">=\u003C/span> _id_seat\u003Cspan class=\"token punctuation\">.\u003C/span>seat\u003Cspan class=\"token punctuation\">;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>id \u003Cspan class=\"token operator\">=\u003C/span> _playerID\u003Cspan class=\"token punctuation\">;\u003C/span>\n  socket\u003Cspan class=\"token punctuation\">.\u003C/span>seat \u003Cspan class=\"token operator\">=\u003C/span> _seatNumber\u003Cspan class=\"token punctuation\">;\u003C/span>\n  socketDic\u003Cspan class=\"token punctuation\">[\u003C/span>_playerID\u003Cspan class=\"token punctuation\">]\u003C/span> \u003Cspan class=\"token operator\">=\u003C/span> socket\u003Cspan class=\"token punctuation\">;\u003C/span>\n\n  \u003Cspan class=\"token function\">addSocketListener\u003C/span>\u003Cspan class=\"token punctuation\">(\u003C/span>socket\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\n\u003Cspan class=\"token punctuation\">&#125;\u003C/span>\u003Cspan class=\"token punctuation\">)\u003C/span>\u003Cspan class=\"token punctuation\">;\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Add event listener to each socket, listen playersâ€™ interaction information\nthrough data which cotain the command ID to route different game logic:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">function addSocketListener(socket) &#123;\n    socket.on(&#39;data&#39;, (data) =&gt; &#123;\n        let _playerID = socket.id;\n        decodeData(data, _playerID);\n    &#125;);\n    socket.on(&#39;error&#39;, (error) =&gt; &#123;\n        //player disconnect\n        console.log(error);\n    &#125;);\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>the server forwards each playerâ€™s messages, which are divided into separate\nsending and broadcasting.\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">//send to a specific player\nfunction send(playerID, cmd, data) &#123;\n    if (!mIsGaming) return;\n    const _dataBuffer = encodeData(cmd, data);\n    if (_dataBuffer) socketDic[playerID].write(_dataBuffer);\n&#125;\n//send to all players\nfunction broadcast(cmd, data) &#123;\n    if (!mIsGaming) return;\n    const _dataBuffer = encodeData(cmd, data);\n    if (_dataBuffer) &#123;\n        let _keyArr = Object.keys(socketDic);\n        for (let i = 0; i &lt; _keyArr.length; i++) &#123;\n            let _socket = socketDic[_keyArr[i]];\n            _socket.write(_dataBuffer);\n        &#125;\n    &#125;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>Thatâ€™s all the key points in this section, as above present, players can be\nconnect to a server and play with each other. You can check\n\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode4\" rel=\"nofollow\">episode4 tag\u003C/a>\nto see the complete code.\u003C/p>\n\u003Chr>\n\u003Cp>The progress of the project up to this point have make a milestone, will not add\nnew content to the relevant repo main branch, excluding the subsequent\nrefactoring to prepare for the involvement of the game engine and framework.\u003C/p>\n\u003Cp>The addition of new content will open another branch for development. Like each\nepisode, a tag will still be added after the chapter ends. You can find the\ncontent of the corresponding chapter through the corresponding tag at any time.\u003C/p>\n\u003Cp>In order to reflect the simplicity of native nodejs, I chose javascript. But I\nhave been developing with typescript in the past few years, is not very familiar\nwith javascript, which I must spend a little bit more time on debugging.\u003C/p>\n\u003Cp>The content of the following chapters will expand rapidly. For either the\nrobustness of development or my proficiency. I will use typescript for new\ncontent development and refactoring in later articles.\u003C/p>\n\u003Cp>\u003Cstrong>The next episode, as the content list in the first episode, I will add game\nengine Cocos Creator, before which I will make a refactory, besides move\njavascript to typescript, but something about modularity.\u003C/strong>\u003C/p>\n\u003Cp>Thanks for your reading, and discussion is always welcome, I am very glad to\ntalk with you in below comment sectionğŸ˜Š.\u003C/p>",[84,85,86],{"title":14,"slug":15,"coverImage":5,"date":16,"excerpt":17,"tags":18,"html":19,"readingTime":20},{"title":22,"slug":23,"coverImage":5,"date":24,"excerpt":25,"tags":26,"html":27,"readingTime":28},{"title":30,"slug":31,"coverImage":5,"date":32,"excerpt":33,"tags":34,"html":35,"readingTime":28},{"title":14,"slug":15,"coverImage":5,"date":16,"excerpt":17,"tags":18,"html":19,"readingTime":20,"relatedPosts":88},[89,90,91],{"title":22,"slug":23,"coverImage":5,"date":24,"excerpt":25,"tags":26,"html":27,"readingTime":28},{"title":30,"slug":31,"coverImage":5,"date":32,"excerpt":33,"tags":34,"html":35,"readingTime":28},{"title":41,"slug":42,"coverImage":5,"date":43,"excerpt":44,"tags":45,"html":46,"readingTime":47},{"title":93,"slug":94,"coverImage":5,"date":95,"excerpt":93,"tags":96,"html":97,"readingTime":47,"relatedPosts":98},"Prior Knowledge For Episode 2","prior-knowledge-for-episode-2","2021-02-15T21:55:15.361Z",[9],"\u003Ch2 id=\"prior-knowledge-for-episode-2\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#prior-knowledge-for-episode-2\">\u003Cspan>#\u003C/span>\u003C/a>Prior Knowledge For Episode 2\u003C/h2>\n\u003Cp>Before episode 2, weâ€™d better to know the rule of the game we are going to make.\u003C/p>\n\u003Cblockquote>\u003Cp>Background story:\u003C/p>\u003C/blockquote>\n\u003Cblockquote>\u003Cp>In the old days in China, the rich and powerful landowners oppressed the\nfarmers who work hard on the land, threatened the villagers . In order to gave\nfull vent to their hate, the farmers invent the â€œFighting the Landlordsâ€.\u003C/p>\u003C/blockquote>\n\u003Cblockquote>\u003Cp>At the beginning, the landlords were given three more cards to highlight the\ndomineering of the landlords, while the farmers Use two-on-one to express the\npsychology of winning by teamwork.\u003C/p>\u003C/blockquote>\n\u003Col>\u003Cli>\u003Cp>Basic Rules The landlord is on one side, and the other two players are on the\nfarmer side. The game ends when any player finishes playing cards. There are\n54 cards in total. After the game starts, each of the 3 players is dealt 17\ncards, and the remaining 3 cards are the landlord cards.\u003C/p>\u003C/li>\n\u003Cli>\u003Cp>The brand\u003C/p>\n\u003Cul>\u003Cli>Spring: After the landlord has played all the cards, and the peasants have\nnot played a single card, it is spring.\u003C/li>\n\u003Cli>Anti-Spring: After the landlord plays the first hand of cards, the farmer\ncontrols it, and until the farmer finishes playing the hand, the landlord\nhas not played a card, that is, the anti-spring.\u003C/li>\n\u003Cli>Double: After confirming the landlord again, both the landlord and the\npeasant can freely choose to double or not to double, and if they choose to\ndouble, the multiple will be x 2 (if both of them choose double, the\nmultiple will be x 4).\u003C/li>\n\u003Cli>King Fried: That is, the double king is in hand, and the card type is the\nlargest card type and can press any card type.\u003C/li>\n\u003Cli>Bomb: Four cards of the same rank are bomb cards. For example: 4444.\u003C/li>\n\u003Cli>Single: A single card.\u003C/li>\n\u003Cli>Pair: Two cards of the same value.\u003C/li>\n\u003Cli>Three Cards: Three cards of the same rank.\u003C/li>\n\u003Cli>Three with one: Three cards of the same rank + any single card. For\nexample: 333+4.\u003C/li>\n\u003Cli>Three with two: Three cards of the same rank + a pair of cards. For\nexample: 333+44.\u003C/li>\n\u003Cli>Four with two: Four cards of the same rank + any two cards. For example:\n3333+4+5 or 3333+44.\u003C/li>\n\u003Cli>Straight: A single card with five or more consecutive points, 2 and the\nking cannot be linked. For example: 34567.\u003C/li>\n\u003Cli>Connected Pair: Three or more consecutive pairs of cards, 2 and king cannot\nbe connected. For example: 334455.\u003C/li>\n\u003Cli>Airplane: Two or more adjacent three cards, 2 and the king cannot be\nconnected. For example 333444.\u003C/li>\n\u003Cli>Airplane with wings: Plane + the same number of singles or pairs. For\nexample: 333444+5+6 or 333444+55+66.\u003C/li>\u003C/ul>\u003C/li>\n\u003Cli>\u003Cp>Multiples\u003C/p>\n\u003Cul>\u003Cli>Bomb (King Bomb): x2\u003C/li>\n\u003Cli>Spring: x2\u003C/li>\n\u003Cli>Anti-spring: x2\u003C/li>\n\u003Cli>Pair, Flush, King: x2\u003C/li>\n\u003Cli>Double king and straight in the hole card: x3\u003C/li>\n\u003Cli>A straight flush, three cards in the hole card: x4\u003C/li>\u003C/ul>\u003C/li>\n\u003Cli>\u003Cp>Game Rules\u003C/p>\n\u003Cul>\u003Cli>The system randomly selects a player to call the landlord first, and then\nthe other 2 will grab the landlord or not.\u003C/li>\n\u003Cli>When calling the landlord, you can choose not to call or call the landlord.\nAfter someone calls the landlord, you can rob the landlord. Call the\nlandlord multiples of 1, 2, and 3 times, and the first to grab 3 times is\nthe landlord.\u003C/li>\n\u003Cli>After confirming the landlord, the three hole cards are shown and the\nlandlord gets the last three hole cards.\u003C/li>\n\u003Cli>In the card playing stage, when it is your turn to press the card, you can\nfreely choose not to play or play a higher card than the previous player.\u003C/li>\n\u003Cli>The game ends when any farmer player finishes playing cards, and 2 peasants\nwin. If the landlord have finished playing cards, the game ends and the\nlandlord wins.\u003C/li>\u003C/ul>\u003C/li>\u003C/ol>\n\u003Cp>Fighting the Landlord itself is a strategic game. As a landlord, you must\nunderstand the advantages of your three cards. As a farmer, when your own\nadvantages are insufficient, you must choose to cooperate in a group.\nOpportunity to defeat the landlord to win.\u003C/p>",[99,100,101],{"title":14,"slug":15,"coverImage":5,"date":16,"excerpt":17,"tags":18,"html":19,"readingTime":20},{"title":22,"slug":23,"coverImage":5,"date":24,"excerpt":25,"tags":26,"html":27,"readingTime":28},{"title":30,"slug":31,"coverImage":5,"date":32,"excerpt":33,"tags":34,"html":35,"readingTime":28},{"title":103,"slug":104,"coverImage":5,"date":105,"excerpt":106,"tags":107,"html":108,"readingTime":20,"relatedPosts":109},"Play cards in terminal with bots - Episode 2","play-cards-in-terminal-with-bots-e2","2021-02-08T21:55:15.361Z","Play cards in terminal with bots",[9],"\u003Ch2 id=\"make-a-multiplayer-card-game---episode-2--play-cards-in-terminal-with-bots\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#make-a-multiplayer-card-game---episode-2--play-cards-in-terminal-with-bots\">\u003Cspan>#\u003C/span>\u003C/a>Make a multiplayer card game - Episode 2 | Play cards in terminal with bots\u003C/h2>\n\u003Cblockquote>\u003Cp>Before the tech content, I canâ€™t help but express my feeling after writing my\nfirst blog post.\u003C/p>\u003C/blockquote>\n\u003Cblockquote>\u003Cp>I have learned a lot from writing blog. I will never understand the benefits\ncontained in it before I wrote the first blog.\u003C/p>\u003C/blockquote>\n\u003Cblockquote>\u003Cp>The output of the content will prompt you to review the known knowledge. In\nthe process of reviewing the known knowledge, you will comprehend new\ncognition from the old knowledge by sorting out and summarizing the knowledge.\nIn order to make it easier for readers to understand, you will understand the\npreviously vague knowledge points by learning new knowledge.\u003C/p>\u003C/blockquote>\n\u003Cblockquote>\u003Cp>At the same time, I began to understand the authorâ€™s gratitude to his family\nin the preface of the book. Content output is a time-consuming and\nlabor-intensive thing that requires a high degree of concentration.\u003C/p>\u003C/blockquote>\n\u003Cblockquote>\u003Cp>If you are a developer and have not started your own blog writing, it is\nrecommended to start now, no matter the content is good or bad, take the first\nstep and feel the magical power of the output of the content.\u003C/p>\u003C/blockquote>\n\u003Cp>Based on the server and client we had create in the previous episode, we\nconcentrate on the logic of game process flow this time. For easy understanding,\nwe ignore some process such as calculating score which we will supplement in the\nmulti player version.\u003C/p>\n\u003Cp>First of all, have a look at the new directory structure:\u003C/p>\n\u003Cp>\u003Cimg src=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1645975508993/Svw37SWa5.png\" alt=\"Screen Shot 2022-02-27 at 23.24.54.png\">\u003C/p>\n\u003Cp>As we can see above, we add a directory named share, which will be use by both\nclient and server.\u003C/p>\n\u003Ccode>helper.js for common logic.\u003C/code>\n\u003Ccode>proto.js for message definitions.\u003C/code>\n\u003Ccode>rule-checker.js for rule of our card game &quot;Doudizhu&quot;.\u003C/code>\n\u003Col>\u003Cli>Define messages between client and server.\u003C/li>\u003C/ol>\n\u003Cp>share/proto.js:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">function generateEnum(protoArr) &#123;\n    let _enum = &#123;&#125;;\n    for (let i = 0; i &lt; protoArr.length; i++) &#123;\n        const _protoName = protoArr[i];\n        const _cmdID = i;\n        _enum[_enum[_protoName] = _cmdID] = _protoName;\n    &#125;\n    return _enum;\n&#125;\n\nconst ENUM_CMD_FN = generateEnum(\n    [\n        &quot;ready_C2S&quot;,\n        &quot;dealCards_S2C&quot;,\n        &quot;competeForLandLordRole_C2S&quot;,\n        &quot;playTurn&quot;,\n        &quot;playCards_C2S&quot;,\n        &quot;playCards_S2C&quot;,\n        &quot;notAllowedByRule_S2C&quot;,\n        &quot;gameEnd_S2C&quot;\n    ]);\n\nmodule.exports = &#123; ENUM_CMD_FN: ENUM_CMD_FN &#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>The codes above create a enum like structure, which make the communication\nintuitive. We define the function in client and server with the same name\ncreated in it.\u003C/p>\n\u003Cp>We encode message by the cmdID. server/index.js:\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">function encodeData(cmd, data)&#123;\n    let _header = Buffer.alloc(1);\n    _header.writeUInt8(cmd);\n    let _body = Buffer.from(JSON.stringify(data));\n    const _dataBuffer = Buffer.concat([_header, _body]);\n    return _dataBuffer;\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cp>And decode message by cmdID to find the function to execute. server/index.js\u003C/p>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">function decodeData(data) &#123;\n    let _cmd = data.readUInt8();\n    let _body = JSON.parse(data.slice(1));\n    const _funcName = ENUM_CMD_FN[_cmd];\n    if (_funcName &amp;&amp; typeof _this[_funcName] == &quot;function&quot;) _this[_funcName](_body);\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cblockquote>\u003Cp>Caution: the function called through _this[_funcName] must be define as:\u003C/p>\u003C/blockquote>\n\u003Cpre class=\"language-undefined\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-undefined\">this.dealCards_S2C = function (data) &#123;\n    let _cards = data.cards;\n    mCardsArr = sortByValue(_cards);\n    let _myHandCardsShowArr = convert2ReadableNames(mCardsArr);\n    console.log(&#39;Deal cards complete, your seat number is-&gt; &#39;, data.seatNumber, &#39;your cards-&gt;&#39;, _myHandCardsShowArr.join(&#39;,&#39;));\n    console.log(&#39;Select a score to confirm role (you can input 1|2|3, the one who select the biggest number will be the land lord, and the base score is the selected number.): &#39;);\n    const _score = getInputFromCmd();\n    this.competeForLandLordRole_C2S(_score);\n&#125;\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003Cblockquote>\u003Cp>define like function dealCards_S2C(), can not be found.\u003C/p>\u003C/blockquote>\n\u003Cp>The key point of this episode is all above, other codes are all about the game\nprocess flow and rules which has introduce in my\n\u003Ca href=\"https://lizhiyu.me/prior-knowledge-for-episode-2\" rel=\"nofollow\">previous post\u003C/a>. If you has\ninterest in this game, please clone the demo and play with the bots.\u003C/p>\n\u003Cp>The complete demo can be found on:\n\u003Ca href=\"https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode2\" rel=\"nofollow\">https://github.com/lizhiyu-me/Make-a-multiplayer-card-game/tree/episode2\u003C/a>\u003C/p>\n\u003Cp>Any problems, discussion is welcome.\u003C/p>\n\u003Cp>\u003Cstrong>In the next episode, we will add the\n\u003Ca href=\"https://github.com/protocolbuffers/protobuf\" rel=\"nofollow\">protobuf.js\u003C/a> which is most popular\nin game development to define our messages between client and server.\u003C/strong>\u003C/p>\n\u003Cp>Thanks for your reading.\u003C/p>",[110,111,112],{"title":14,"slug":15,"coverImage":5,"date":16,"excerpt":17,"tags":18,"html":19,"readingTime":20},{"title":22,"slug":23,"coverImage":5,"date":24,"excerpt":25,"tags":26,"html":27,"readingTime":28},{"title":30,"slug":31,"coverImage":5,"date":32,"excerpt":33,"tags":34,"html":35,"readingTime":28},{"title":30,"slug":31,"coverImage":5,"date":32,"excerpt":33,"tags":34,"html":35,"readingTime":28,"relatedPosts":114},[115,116,117],{"title":14,"slug":15,"coverImage":5,"date":16,"excerpt":17,"tags":18,"html":19,"readingTime":20},{"title":22,"slug":23,"coverImage":5,"date":24,"excerpt":25,"tags":26,"html":27,"readingTime":28},{"title":41,"slug":42,"coverImage":5,"date":43,"excerpt":44,"tags":45,"html":46,"readingTime":47},{"slug":119,"title":120,"date":121,"excerpt":122,"coverImage":123,"tags":124,"html":126,"readingTime":20,"relatedPosts":127},"customization","How to Customize this Template","1997-04-22T21:55:27.154Z","How to customize what you're seeing here and make it your own.","/images/posts/customization.jpg",[125],"Documentation","\u003Cp>In general, content can be modified by editing the \u003Cstrong>organisms\u003C/strong> and the pages themselves. Below is a list of the most common changes that you may want to make.\u003C/p>\n\u003Ch2 id=\"domainsite-url\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#domainsite-url\">\u003Cspan>#\u003C/span>\u003C/a>Domain/site URL\u003C/h2>\n\u003Cp>The first thing you might want to do is replace the domain of of the site with your own. There are two places where you need to do that:\u003C/p>\n\u003Cul>\u003Cli>In the \u003Ccode>package.json\u003C/code> file, check the \u003Ccode>postbuild\u003C/code> script. Change the domain there to your own, so it ends up like this: \u003Ccode>svelte-sitemap --domain https://your-domain.com\u003C/code>. This is used to generate the sitemap of your website, which is used by search engines to index your site.\u003C/li>\n\u003Cli>In the \u003Ccode>src/lib/data/meta.ts\u003C/code> file, change the \u003Ccode>siteBaseUrl\u003C/code> property to your own domain. This is used in multiple parts of the app wherever the site needs to link to itself.\u003C/li>\u003C/ul>\n\u003Ch2 id=\"headersite-logo\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#headersite-logo\">\u003Cspan>#\u003C/span>\u003C/a>Header/site logo\u003C/h2>\n\u003Cp>To replace the logo that appears in the header, modify or replace the contents of the \u003Ccode>Logo.svelte\u003C/code> atom.\u003C/p>\n\u003Cp>The links that appear on the header can be modified directly in the \u003Ccode>Header.svelte\u003C/code> organism.\u003C/p>\n\u003Ch2 id=\"hero-section\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#hero-section\">\u003Cspan>#\u003C/span>\u003C/a>Hero section\u003C/h2>\n\u003Cp>The hero section is the first section of the siteâ€™s home page. It is composed of a Heading, the \u003Cem>intro\u003C/em> text, and a list of buttons/CTAs. The contents of this section can be modified directly in the \u003Ccode>Hero.svelte\u003C/code> organism.\u003C/p>\n\u003Ch2 id=\"about-section\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#about-section\">\u003Cspan>#\u003C/span>\u003C/a>About section\u003C/h2>\n\u003Cp>The about section contains another headline, a paragraph of text, some social media links, and optionally an image. The contents of this section can be modified directly in the \u003Ccode>About.svelte\u003C/code> organism.\u003C/p>\n\u003Ch2 id=\"social-links\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#social-links\">\u003Cspan>#\u003C/span>\u003C/a>Social Links\u003C/h2>\n\u003Cp>The social links are contained in the \u003Ccode>Socials.svelte\u003C/code> molecule and can be used in any page. This template shows them on the About section and in the Footer.\u003C/p>\n\u003Ch2 id=\"footer\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#footer\">\u003Cspan>#\u003C/span>\u003C/a>Footer\u003C/h2>\n\u003Cp>The footer contains some credits, a list of social links, and the RSS/Theme toggle. The contents of this section can be modified directly in the \u003Ccode>Footer.svelte\u003C/code> organism.\u003C/p>\n\u003Ch2 id=\"colors\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#colors\">\u003Cspan>#\u003C/span>\u003C/a>Colors\u003C/h2>\n\u003Cp>You can change the color palette of the website just by tweaking the \u003Ccode>_themes.scss\u003C/code> file. The file uses the \u003Ccode>define-color\u003C/code> scss function to automatically set the color variables in Hex, RGB and HSL formats, so you can choose whichever format you need.\u003C/p>\n\u003Cp>The main theme colors (primary and secondary) have two variants: shade and tint. The shade is a lighter version of the color (darker in dark mode), and the tint should almost match the pageâ€™s background, so that in light mode, itâ€™s really bright, and in dark mode, itâ€™s really dark.\u003C/p>\n\u003Ch2 id=\"fonts\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#fonts\">\u003Cspan>#\u003C/span>\u003C/a>Fonts\u003C/h2>\n\u003Cp>This template uses the Inter, Merriweather and Ubuntu Mono font families. You can change the font family by editing the \u003Ccode>_variables.scss\u003C/code> file, and the code is already set up to accept a default font, a heading font, and a monospace font.\u003C/p>\n\u003Cp>I recommend using \u003Ca href=\"https://fontsource.org/\" rel=\"nofollow\">Fontsource\u003C/a> to import the fonts you need, or self-hosting them. In case youâ€™re using Fontsource, you can import the fonts in \u003Ccode>global.scss\u003C/code> file to make sure theyâ€™re available in the entire site.\u003C/p>\n\u003Ch2 id=\"favicon\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#favicon\">\u003Cspan>#\u003C/span>\u003C/a>Favicon\u003C/h2>\n\u003Cp>Favicons are located in the \u003Ccode>static/favicons\u003C/code> folder. I like to use \u003Ca href=\"https://realfavicongenerator.net\" rel=\"nofollow\">Real Favicon Generator\u003C/a> to generate mine, but you can use any other tool you like. I wrote \u003Ca href=\"https://fantinel.dev/fixing-favicons\" rel=\"nofollow\">a blog post about Favicons\u003C/a> in case you want to learn more about them.\u003C/p>\n\u003Ch2 id=\"social-media-link-preview\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#social-media-link-preview\">\u003Cspan>#\u003C/span>\u003C/a>Social Media Link Preview\u003C/h2>\n\u003Cp>You probably want to customize how links to your website look when posted on social media/messaging apps. To do that, you can edit the info in \u003Ccode>src/lib/data/meta.ts\u003C/code>. There, you can edit the siteâ€™s title, description, tags (used by search engines) and the image that appears when sharing a link.\u003C/p>",[128,135,143],{"title":129,"slug":130,"coverImage":5,"date":131,"excerpt":132,"tags":133,"html":134,"readingTime":20},"How Blog Posts Work","blog-posts","1997-04-22T21:55:15.361Z","How to manage existing blog posts and create new ones",[125],"\u003Cp>All blog posts are located inside the \u003Ccode>src/routes/(blog-article)\u003C/code> folder. Each folder inside it represents a blog post, and each folder has a \u003Ccode>+page.md\u003C/code> file, which is the file that contains the postâ€™s content.\u003C/p>\n\u003Cp>This way, the URL for each blog post is generated with the folderâ€™s name. For example, the folder \u003Ccode>src/routes/(blog-article)/how-blog-posts-work\u003C/code> will generate the URL \u003Ccode>https://mysite.com/how-blog-posts-work\u003C/code>.\u003C/p>\n\u003Cp>All posts are Markdown files, which means you can use the \u003Ca href=\"https://www.markdownguide.org/basic-syntax\" rel=\"nofollow\">Markdown syntax\u003C/a> in them, and it will work out of the box. However, since this projects uses \u003Ca href=\"https://mdsvex.pngwn.io/\" rel=\"nofollow\">MDsveX\u003C/a> to parse Markdown, you can also use Svelte components inside them! This means that the components used in other pages can also be used in blog posts.\u003C/p>\n\u003Cdiv class=\"callout-block info svelte-sxx0n0\">\u003Cdiv class=\"icon-wrapper svelte-sxx0n0\">\u003Csvg width=\"100%\" height=\"100%\" stroke-width=\"1.5\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\u003Cpath d=\"M12 11.5V16.5\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 7.51L12.01 7.49889\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003Cpath d=\"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\u003C/path>\u003C/svg>\u003C/div>\n\tThis is a Svelte component inside a Markdown file!\n\n\u003C/div>\n\u003Ch2 id=\"processing\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#processing\">\u003Cspan>#\u003C/span>\u003C/a>Processing\u003C/h2>\n\u003Cp>Besides the blog post page itself, the blog posts can be displayed in other places, such as the \u003Ccode>/blog\u003C/code> page, which lists all blog posts, and the \u003Ccode>&lt;RecentPosts&gt;\u003C/code> component, used in the home page.\u003C/p>\n\u003Cp>To be able to do that, posts are processed in the \u003Ccode>src/lib/data/blog-posts/index.ts\u003C/code> file. That file imports the blog post files and processes them, so weâ€™re able to use some of the postâ€™s metadata to list them. For example, we get the postâ€™s title, cover image, and calculate the reading time based on its content, so that information is displayed in the blog post cards in the \u003Ccode>/blog\u003C/code> page.\u003C/p>\n\u003Cp>There is also some basic logic to get related posts based on a postâ€™s tags. The logic should be straightforward enough to modify it to your needs.\u003C/p>\n\u003Ch2 id=\"creating-a-new-post\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#creating-a-new-post\">\u003Cspan>#\u003C/span>\u003C/a>Creating a new post\u003C/h2>\n\u003Cp>To create a new post, create a new folder inside the \u003Ccode>src/routes/(blog-article)\u003C/code> folder, and inside it, create a \u003Ccode>+page.md\u003C/code> file. The folder name will be used as the postâ€™s URL slug, so make sure itâ€™s a valid URL slug.\u003C/p>\n\u003Cp>Inside the \u003Ccode>+page.md\u003C/code> file, you must start with the front matter, which is a YAML-like syntax that is used to define metadata for the post. The front matter must be the first thing in the file, and must be separated from the rest of the content by three dashes (\u003Ccode>---\u003C/code>). An example of a front matter is:\u003C/p>\n\u003Cdiv class=\"code-block svelte-1pkpsrg\">\n\t\u003Cdiv class=\"lang svelte-1pkpsrg\">markdown\u003C/div>\n\t\u003Cpre class=\"language-md\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-md\">\u003Cspan class=\"token front-matter-block\">\u003Cspan class=\"token punctuation\">---\u003C/span>\n\u003Cspan class=\"token front-matter yaml language-yaml\">slug: my-new-blog-post\ntitle: My New Blog Post\ndate: 2023-04-22T20:45:25.350Z\nexcerpt: A short description of the post\ncoverImage: /images/posts/cover-image.jpg\ntags:\n  - Example\u003C/span>\n\u003Cspan class=\"token punctuation\">---\u003C/span>\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003C/div>\n\u003Ch2 id=\"managing-blog-posts\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#managing-blog-posts\">\u003Cspan>#\u003C/span>\u003C/a>Managing blog posts\u003C/h2>\n\u003Cp>I highly recommend the \u003Ca href=\"https://frontmatter.codes/\" rel=\"nofollow\">Front Matter VS Code extension\u003C/a> to manage blog posts. It gives you a nice CMS-like UI to manage the front matter of all blog posts, as well as a preview of their content. It is, of course, optional, and you can manage everything directly in the Markdown files if you prefer.\u003C/p>\n\u003Cimg srcset=\"/images/posts/frontmatter-preview-dashboard.avif, /images/posts/frontmatter-preview-dashboard.webp, /images/posts/frontmatter-preview-dashboard.png\" src=\"/images/posts/frontmatter-preview-dashboard.png\" alt=\"Screenshot of the Front Matter VS Code extension, showing the dashboard with all posts\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj full-bleed\">\n\u003Cimg srcset=\"/images/posts/frontmatter-preview-edit.avif, /images/posts/frontmatter-preview-edit.webp, /images/posts/frontmatter-preview-edit.png\" src=\"/images/posts/frontmatter-preview-edit.png\" alt=\"Screenshot of the Front Matter VS Code extension, showing the post editing UI\" loading=\"lazy\" decoding=\"async\" class=\"svelte-1ykl0dj full-bleed\">\n\u003Ch2 id=\"rss\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#rss\">\u003Cspan>#\u003C/span>\u003C/a>RSS\u003C/h2>\n\u003Cp>This template automatically generates a RSS feed of your blog posts. It is generated in the \u003Ccode>src/routes/rss.xml/+server.ts\u003C/code> file, and it is available at the \u003Ccode>/rss.xml\u003C/code> URL.\u003C/p>",{"slug":136,"title":137,"date":138,"excerpt":139,"coverImage":140,"tags":141,"html":142,"readingTime":28},"project-structure","Project Structure","1997-04-22T21:55:21.800Z","How code and structure are organized.","/images/posts/project-structure.jpg",[125],"\u003Cp>This project follows the basic \u003Ca href=\"https://kit.svelte.dev/docs/project-structure\" rel=\"nofollow\">SvelteKit structure\u003C/a>, with some added conventions to make customization a post-management easier.\u003C/p>\n\u003Ch2 id=\"components\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#components\">\u003Cspan>#\u003C/span>\u003C/a>Components\u003C/h2>\n\u003Cp>The components are organized following the \u003Ca href=\"https://medium.com/@WeAreMobile1st/atomic-design-getting-started-916bc81bad0e\" rel=\"nofollow\">Atomic Design\u003C/a> principles, albeit somewhat simplified. Components are in the \u003Ccode>src/lib/components\u003C/code> folder, and are organized in the following way:\u003C/p>\n\u003Ch3 id=\"atoms\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#atoms\">\u003Cspan>#\u003C/span>\u003C/a>Atoms\u003C/h3>\n\u003Cp>Atoms are the most basic components, which can be seen as building blocks for other components. Theyâ€™re small and self-contained, and do only one thing. Examples of atoms are buttons, inputs, and tags.\u003C/p>\n\u003Ch3 id=\"molecules\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#molecules\">\u003Cspan>#\u003C/span>\u003C/a>Molecules\u003C/h3>\n\u003Cp>Molecules are groups of atoms that work together to form a more complex component. Examples of molecules are cards, groups of links, or an alert callout.\u003C/p>\n\u003Ch3 id=\"organisms\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#organisms\">\u003Cspan>#\u003C/span>\u003C/a>Organisms\u003C/h3>\n\u003Cp>Organisms, in this project, are code blocks that represent a section of a page, such as the header, footer and hero section. They can be used directly in a page as a sort of building block, so the pageâ€™s code can be as simple as this:\u003C/p>\n\u003Cdiv class=\"code-block svelte-1pkpsrg\">\u003Cdiv class=\"filename svelte-1pkpsrg\">+page.svelte\u003C/div>\n\t\u003Cdiv class=\"lang svelte-1pkpsrg\">html\u003C/div>\n\t\u003Cpre class=\"language-html\">\u003C!-- HTML_TAG_START -->\u003Ccode class=\"language-html\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&lt;\u003C/span>Header\u003C/span> \u003Cspan class=\"token punctuation\">/>\u003C/span>\u003C/span>\n\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&lt;\u003C/span>Hero\u003C/span> \u003Cspan class=\"token punctuation\">/>\u003C/span>\u003C/span>\n\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&lt;\u003C/span>About\u003C/span> \u003Cspan class=\"token punctuation\">/>\u003C/span>\u003C/span>\n\u003Cspan class=\"token tag\">\u003Cspan class=\"token tag\">\u003Cspan class=\"token punctuation\">&lt;\u003C/span>Footer\u003C/span> \u003Cspan class=\"token punctuation\">/>\u003C/span>\u003C/span>\u003C/code>\u003C!-- HTML_TAG_END -->\u003C/pre>\n\u003C/div>\n\u003Ch2 id=\"component-gallery\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#component-gallery\">\u003Cspan>#\u003C/span>\u003C/a>Component Gallery\u003C/h2>\n\u003Cp>This project uses \u003Ca href=\"https://histoire.dev\" rel=\"nofollow\">Histoire\u003C/a> to be able to see and develop components in isolation. To open it, run \u003Ccode>npm run story:dev\u003C/code>. This way you can customize and build new components with placeholder content and without worrying about where to put them in a page.\u003C/p>\n\u003Ch2 id=\"pages\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#pages\">\u003Cspan>#\u003C/span>\u003C/a>Pages\u003C/h2>\n\u003Cp>Pages obey the default SvelteKit structure, but can be summarized as follows:\u003C/p>\n\u003Cul>\u003Cli>There are two different file types: the pages (\u003Ccode>+page.svelte\u003C/code>) and the layouts (\u003Ccode>+layout.svelte\u003C/code>). Layouts are a way to reuse the same structure between different pages without having to duplicate code;\u003C/li>\n\u003Cli>There are two different page layouts in this site: the â€œWavesâ€ layout, which all pages inside the \u003Ccode>(waves)\u003C/code> folder use, and the â€œBlog Articleâ€ layout, which all pages inside the \u003Ccode>(blog-article)\u003C/code> folder use;\u003C/li>\u003C/ul>\n\u003Ch2 id=\"blog-posts\">\u003Ca class=\"heading-link\" title=\"Permalink\" aria-hidden=\"true\" href=\"#blog-posts\">\u003Cspan>#\u003C/span>\u003C/a>Blog Posts\u003C/h2>\n\u003Cp>To know how blog posts work and how to create new ones, check out \u003Ca href=\"/blog-posts\">How Blog Posts Work\u003C/a>.\u003C/p>",{"title":14,"slug":15,"coverImage":5,"date":16,"excerpt":17,"tags":18,"html":19,"readingTime":20},{"slug":136,"title":137,"date":138,"excerpt":139,"coverImage":140,"tags":141,"html":142,"readingTime":28,"relatedPosts":145},[146,147,148],{"title":129,"slug":130,"coverImage":5,"date":131,"excerpt":132,"tags":133,"html":134,"readingTime":20},{"slug":119,"title":120,"date":121,"excerpt":122,"coverImage":123,"tags":124,"html":126,"readingTime":20},{"title":14,"slug":15,"coverImage":5,"date":16,"excerpt":17,"tags":18,"html":19,"readingTime":20},{"title":129,"slug":130,"coverImage":5,"date":131,"excerpt":132,"tags":133,"html":134,"readingTime":20,"relatedPosts":150},[151,152,153],{"slug":119,"title":120,"date":121,"excerpt":122,"coverImage":123,"tags":124,"html":126,"readingTime":20},{"slug":136,"title":137,"date":138,"excerpt":139,"coverImage":140,"tags":141,"html":142,"readingTime":28},{"title":14,"slug":15,"coverImage":5,"date":16,"excerpt":17,"tags":18,"html":19,"readingTime":20}],"uses":{}}]}
